{"version":3,"file":"test/suite/index.js","mappings":"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","sources":["webpack://rainbow-csv/./extension.js","webpack://rainbow-csv/./fast_load_utils.js","webpack://rainbow-csv/./node_modules/assert/build/assert.js","webpack://rainbow-csv/./node_modules/assert/build/internal/assert/assertion_error.js","webpack://rainbow-csv/./node_modules/assert/build/internal/errors.js","webpack://rainbow-csv/./node_modules/assert/build/internal/util/comparisons.js","webpack://rainbow-csv/./node_modules/call-bind/callBound.js","webpack://rainbow-csv/./node_modules/call-bind/index.js","webpack://rainbow-csv/./node_modules/define-properties/index.js","webpack://rainbow-csv/./node_modules/es6-object-assign/index.js","webpack://rainbow-csv/./node_modules/for-each/index.js","webpack://rainbow-csv/./node_modules/function-bind/implementation.js","webpack://rainbow-csv/./node_modules/function-bind/index.js","webpack://rainbow-csv/./node_modules/get-intrinsic/index.js","webpack://rainbow-csv/./node_modules/gopd/index.js","webpack://rainbow-csv/./node_modules/has-property-descriptors/index.js","webpack://rainbow-csv/./node_modules/has-symbols/index.js","webpack://rainbow-csv/./node_modules/has-symbols/shams.js","webpack://rainbow-csv/./node_modules/has-tostringtag/shams.js","webpack://rainbow-csv/./node_modules/has/src/index.js","webpack://rainbow-csv/./node_modules/inherits/inherits_browser.js","webpack://rainbow-csv/./node_modules/is-arguments/index.js","webpack://rainbow-csv/./node_modules/is-callable/index.js","webpack://rainbow-csv/./node_modules/is-generator-function/index.js","webpack://rainbow-csv/./node_modules/is-nan/implementation.js","webpack://rainbow-csv/./node_modules/is-nan/index.js","webpack://rainbow-csv/./node_modules/is-nan/polyfill.js","webpack://rainbow-csv/./node_modules/is-nan/shim.js","webpack://rainbow-csv/./node_modules/is-typed-array/index.js","webpack://rainbow-csv/./node_modules/object-is/implementation.js","webpack://rainbow-csv/./node_modules/object-is/index.js","webpack://rainbow-csv/./node_modules/object-is/polyfill.js","webpack://rainbow-csv/./node_modules/object-is/shim.js","webpack://rainbow-csv/./node_modules/object-keys/implementation.js","webpack://rainbow-csv/./node_modules/object-keys/index.js","webpack://rainbow-csv/./node_modules/object-keys/isArguments.js","webpack://rainbow-csv/./node_modules/process/browser.js","webpack://rainbow-csv/./node_modules/util/support/isBufferBrowser.js","webpack://rainbow-csv/./node_modules/util/support/types.js","webpack://rainbow-csv/./node_modules/util/util.js","webpack://rainbow-csv/./node_modules/which-typed-array/index.js","webpack://rainbow-csv/./rainbow_utils.js","webpack://rainbow-csv/./rbql_core/rbql-js/csv_utils.js","webpack://rainbow-csv/./rbql_core/rbql-js/rbql.js","webpack://rainbow-csv/./rbql_core/rbql-js/rbql_csv.js","webpack://rainbow-csv/./test/suite/unit_tests.js","webpack://rainbow-csv/external commonjs \"vscode\"","webpack://rainbow-csv/./node_modules/available-typed-arrays/index.js","webpack://rainbow-csv/webpack/bootstrap","webpack://rainbow-csv/webpack/runtime/global","webpack://rainbow-csv/./test/suite/index.js"],"sourcesContent":["const vscode = require('vscode');\n\nconst path = require('path');\nconst fs = require('fs');\nconst os = require('os');\nconst child_process = require('child_process');\n\nconst fast_load_utils = require('./fast_load_utils.js');\n\n// Please see DEV_README.md file for additional info.\n// FIXME add an updated README.md RBQL screenshot.\n\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nvar rbql_csv = null; // Using lazy load to improve startup performance.\nfunction ll_rbql_csv() {\n    if (rbql_csv === null)\n        rbql_csv = require('./rbql_core/rbql-js/rbql_csv.js');\n    return rbql_csv;\n}\n\n\nvar rainbow_utils = null; // Using lazy load to improve startup performance.\nfunction ll_rainbow_utils() {\n    if (rainbow_utils === null) {\n        rainbow_utils = require('./rainbow_utils.js');\n    }\n    return rainbow_utils;\n}\n\n\nconst is_web_ext = (os.homedir === undefined); // Runs as web extension in browser.\nconst preview_window_size = 100;\nconst scratch_buf_marker = 'vscode_rbql_scratch';\nconst dynamic_csv_highlight_margin = 50; // TODO make configurable\n\nlet client_html_template_web = null;\n\nvar aligned_files = new Set();\nvar result_set_parent_map = new Map();\nvar cached_table_parse_result = new Map(); // TODO store doc timestamp / size to invalidate the entry when the doc changes.\nvar manual_comment_prefix_stoplist = new Set();\n\nvar rbql_status_bar_button = null;\nvar align_shrink_button = null;\nvar rainbow_off_status_bar_button = null;\nvar copy_back_button = null;\nvar column_info_button = null;\nvar dynamic_dialect_select_button = null;\n\nvar rbql_context = null;\n\nvar last_rbql_queries = new Map(); // Query history does not replace this structure, it is also used to store partially entered queries for preview window switch.\n\nvar client_html_template = null;\n\nvar global_state = null;\n\nvar preview_panel = null;\n\nvar doc_first_edit_subscription = null;\nvar keyboard_cursor_subscription = null;\n\nvar _unit_test_last_rbql_report = null; // For unit tests only.\nvar _unit_test_last_warnings = null; // For unit tests only.\n\nlet cursor_timeout_handle = null;\n\nlet rainbow_token_event = null;\nlet comment_token_event = null;\n\nconst DYNAMIC_CSV = 'dynamic csv';\n\nconst QUOTED_POLICY = 'quoted';\nconst WHITESPACE_POLICY = 'whitespace';\nconst QUOTED_RFC_POLICY = 'quoted_rfc';\nconst SIMPLE_POLICY = 'simple';\n\n\nlet extension_context = {\n    lint_results: new Map(),\n    lint_status_bar_button: null,\n    dynamic_document_dialects: new Map(),\n    custom_comment_prefixes: new Map(),\n    original_language_ids: new Map(),\n    autodetection_stoplist: new Set(),\n    autodetection_temporarily_disabled_for_rbql: false,\n    dynamic_dialect_for_next_request: null,\n};\n\nconst dialect_map = {\n    'csv': [',', QUOTED_POLICY],\n    'tsv': ['\\t', SIMPLE_POLICY],\n    'csv (semicolon)': [';', QUOTED_POLICY],\n    'csv (pipe)': ['|', SIMPLE_POLICY],\n    'csv (whitespace)': [' ', WHITESPACE_POLICY],\n    [DYNAMIC_CSV]: [null, null]\n};\n\nconst tokenTypes = ['rainbow1', 'macro', 'function', 'comment', 'string', 'parameter', 'type', 'enumMember', 'keyword', 'regexp'];\nconst tokens_legend = new vscode.SemanticTokensLegend(tokenTypes);\n\n\nfunction safe_lower(src_str) {\n    if (!src_str)\n        return src_str;\n    return src_str.toLowerCase();\n}\n\n\nfunction get_default_policy(separator) {\n    // This function is most likely a temporal workaround, get rid of it when possible.\n    for (let language_id in dialect_map) {\n        if (!dialect_map.hasOwnProperty(language_id))\n            continue;\n        if (dialect_map[language_id][0] == separator)\n            return dialect_map[language_id][1];\n    }\n    return SIMPLE_POLICY;\n}\n\n\nfunction map_dialect_to_language_id(separator, policy) {\n    for (let language_id in dialect_map) {\n        if (!dialect_map.hasOwnProperty(language_id))\n            continue;\n        if (dialect_map[language_id][0] == separator && dialect_map[language_id][1] == policy)\n            return language_id;\n    }\n    return DYNAMIC_CSV;\n}\n\n\n// This structure will get properly initialized during the startup.\nlet absolute_path_map = {\n    'rbql_client.js': null,\n    'contrib/textarea-caret-position/index.js': null,\n    'rbql_suggest.js': null,\n    'rbql_logo.svg': null,\n    'rbql_client.html': null,\n    'rbql mock/rbql_mock.py': null,\n    'rbql_core/vscode_rbql.py': null\n};\n\n\nfunction show_single_line_error(error_msg) {\n    var active_window = vscode.window;\n    if (!active_window)\n        return;\n    // Do not \"await\" error messages because the promise gets resolved only on error dismissal.\n    active_window.showErrorMessage(error_msg);\n}\n\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nasync function push_current_stack_to_js_callback_queue_to_allow_ui_update() {\n    await sleep(0);\n}\n\n\nfunction get_from_global_state(key, default_value) {\n    if (global_state) {\n        var value = global_state.get(key);\n        if (value !== null && value !== undefined)\n            return value;\n    }\n    return default_value;\n}\n\n\nasync function save_to_global_state(key, value) {\n    if (global_state && key) {\n        await global_state.update(key, value);\n        return true;\n    }\n    return false;\n}\n\n\nasync function replace_doc_content(active_editor, active_doc, new_content) {\n    let invalid_range = new vscode.Range(0, 0, active_doc.lineCount /* Intentionally missing the '-1' */, 0);\n    let full_range = active_doc.validateRange(invalid_range);\n    await active_editor.edit(edit => edit.replace(full_range, new_content));\n}\n\n\nfunction make_header_key(file_path) {\n    return 'rbql_header:' + file_path;\n}\n\n\nfunction make_with_headers_key(file_path) {\n    return 'rbql_with_headers:' + file_path;\n}\n\n\nfunction get_from_config(param_name, default_value, config=null) {\n    if (!config) {\n        config = vscode.workspace.getConfiguration('rainbow_csv');\n    }\n    return config ? config.get(param_name) : default_value;\n}\n\n\nfunction get_header_from_document(document, delim, policy, comment_prefix) {\n    let header_line = ll_rainbow_utils().get_header_line(document, comment_prefix);\n    return csv_utils.smart_split(header_line, delim, policy, /*preserve_quotes_and_whitespaces=*/false)[0];\n}\n\n\nfunction get_header(document, delim, policy, comment_prefix) {\n    var file_path = document.fileName;\n    if (file_path) {\n        let raw_header = get_from_global_state(make_header_key(file_path), null);\n        if (raw_header) {\n            return JSON.parse(raw_header);\n        }\n    }\n    return get_header_from_document(document, delim, policy, comment_prefix);\n}\n\n\nfunction get_dialect(document) {\n    let language_id = document.languageId;\n    let delim = null;\n    let policy = null;\n\n    let comment_prefix = '';\n    if (extension_context.custom_comment_prefixes.has(document.fileName)) {\n        comment_prefix = extension_context.custom_comment_prefixes.get(document.fileName);\n    } else {\n        comment_prefix = get_from_config('comment_prefix', '');\n    }\n    if (language_id != DYNAMIC_CSV && dialect_map.hasOwnProperty(language_id)) {\n        [delim, policy] = dialect_map[language_id];\n        return [delim, policy, comment_prefix];\n    }\n    // Here we don't check if language_id is DYNAMIC_CSV because we want to return the once selected dialect anyway even if file is now 'plaintext' or some other non-csv filetype.\n    if (extension_context.dynamic_document_dialects.has(document.fileName)) {\n        let dialect_info = extension_context.dynamic_document_dialects.get(document.fileName);\n        delim = dialect_info.delim;\n        policy = dialect_info.policy;\n        return [delim, policy, comment_prefix];\n    }\n    // The language id can be `dynamic csv` here e.g. if user just now manually selected the \"Dynamic CSV\" filetype.\n    return [null, null, null];\n}\n\n\nfunction show_status_bar_items(active_doc) {\n    if (dynamic_dialect_select_button) {\n        dynamic_dialect_select_button.hide();\n    }\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, active_doc.fileName, active_doc.languageId);\n    show_rbql_status_bar_button();\n    show_align_shrink_button(active_doc.fileName);\n    show_rainbow_off_status_bar_button();\n    show_rbql_copy_to_source_button(active_doc.fileName);\n    show_column_info_button(); // This function finds active_doc internally, but the possible inconsistency is harmless.\n}\n\n\nfunction enable_dynamic_semantic_tokenization() {\n    let token_provider = new RainbowTokenProvider();\n    if (rainbow_token_event !== null) {\n        rainbow_token_event.dispose();\n    }\n    let document_selector = { language: DYNAMIC_CSV }; // Use '*' to select all languages if needed.\n    rainbow_token_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(document_selector, token_provider, tokens_legend);\n}\n\n\nfunction register_comment_tokenization_handler() {\n    let token_provider = new CommentTokenProvider();\n    if (comment_token_event !== null) {\n        comment_token_event.dispose();\n    }\n    let document_selector = [];\n    for (let language_id in dialect_map) {\n        if (dialect_map.hasOwnProperty(language_id) && language_id != DYNAMIC_CSV) {\n            // We skip DYNAMIC_CSV here because its provider already handles comment lines.\n            document_selector.push({language: language_id});\n        }\n    }\n    comment_token_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(document_selector, token_provider, tokens_legend);\n}\n\n\nasync function get_dialect_from_user_dialog() {\n    let title = \"Select separator character or string e.g. `,` or `:=`. For tab use `TAB`\";\n    let input_box_props = {\"prompt\": title, \"value\": ','};\n    let delim = await vscode.window.showInputBox(input_box_props);\n    if (!delim) {\n        return [null, null];\n    }\n    let policy = (delim == ',' || delim == ';') ? QUOTED_RFC_POLICY : SIMPLE_POLICY;\n    return [delim, policy];\n}\n\n\nasync function choose_dynamic_separator() {\n    let active_doc = get_active_doc();\n    if (active_doc.languageId != DYNAMIC_CSV) {\n        show_single_line_error('Dynamic separator can only be adjusted for \"Dynamic CSV\" filetype.');\n        return;\n    }\n    let [delim, policy] = await get_dialect_from_user_dialog();\n    if (!delim) {\n        show_single_line_error('Unable to use empty string separator');\n        return;\n    }\n    extension_context.dynamic_document_dialects.set(active_doc.fileName, {delim: delim, policy: policy});\n    await enable_rainbow_features_if_csv(active_doc);\n}\n\n\nfunction show_choose_dynamic_separator_button() {\n    if (!dynamic_dialect_select_button)\n        dynamic_dialect_select_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    dynamic_dialect_select_button.text = 'Choose Separator...';\n    dynamic_dialect_select_button.tooltip = 'Click to choose Dynamic CSV separator';\n    dynamic_dialect_select_button.command = 'rainbow-csv.ChooseDynamicSeparator';\n    dynamic_dialect_select_button.show();\n}\n\n\nasync function enable_rainbow_features_if_csv(active_doc) {\n    let file_path = active_doc ? active_doc.fileName : null;\n    if (!active_doc || !file_path || file_path.endsWith('.git')) {\n        // For new untitled scratch documents `file_path` would be \"Untitled-1\", \"Untitled-2\", etc, so we won't enter this branch.\n        // Sometimes for git-controlled dirs VSCode opens mysterious .git files - skip them.\n        return;\n    }\n    var language_id = active_doc.languageId;\n    if (!dialect_map.hasOwnProperty(language_id)) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (!policy && extension_context.dynamic_dialect_for_next_request != null) {\n        [delim, policy] = extension_context.dynamic_dialect_for_next_request;\n        extension_context.dynamic_document_dialects.set(file_path, {delim: delim, policy: policy});\n        extension_context.dynamic_dialect_for_next_request = null;\n        [delim, policy, comment_prefix] = get_dialect(active_doc);\n    }\n    if (!policy) {\n        if (language_id == DYNAMIC_CSV) {\n            [delim, policy] = await get_dialect_from_user_dialog();\n            if (!policy) {\n                // Last attempt: retry getting dialect, because it can be set asynchronously: after opening the (which would trigger enable_rainbow_features_if_csv in the end) the caller could update dynamic_document_dialects for example this happens in RBQL queries handling.\n                [delim, policy, comment_prefix] = get_dialect(active_doc);\n            }\n            if (!policy) {\n                hide_buttons(); // Hide buttons when switching \"csv\" -> \"dynamic csv\".\n                show_choose_dynamic_separator_button();\n                return;\n            }\n            extension_context.dynamic_document_dialects.set(file_path, {delim: delim, policy: policy});\n        } else {\n            return;\n        }\n    }\n    if (!delim) {\n        return; // Adding this condition JIC, this should never happen at this point - we would return earlier if there were no policy (hence no delim).\n    }\n    if (get_from_config('enable_cursor_position_info', false)) {\n        keyboard_cursor_subscription = vscode.window.onDidChangeTextEditorSelection(handle_cursor_movement);\n    }\n    if (comment_prefix) {\n        // It is currently impoossible to set comment_prefix on document level, so we have to set it on language level instead.\n        // This could potentially cause minor problems in very rare situations.\n        // Applying 'setLanguageConfiguration' doesn't disable static configuration in language-configuration.json.\n        vscode.languages.setLanguageConfiguration(language_id, { comments: { lineComment: comment_prefix } });\n    }\n\n    if (language_id == DYNAMIC_CSV) {\n        // Re-enable tokenization to explicitly trigger the highligthing. Sometimes this doesn't happen automatically.\n        enable_dynamic_semantic_tokenization();\n    }\n    show_status_bar_items(active_doc);\n    await csv_lint(active_doc, false);\n}\n\n\nfunction hide_buttons() {\n    let all_buttons = [extension_context.lint_status_bar_button, rbql_status_bar_button, rainbow_off_status_bar_button, copy_back_button, align_shrink_button, column_info_button, dynamic_dialect_select_button];\n    for (let i = 0; i < all_buttons.length; i++) {\n        if (all_buttons[i])\n            all_buttons[i].hide();\n    }\n}\n\n\nfunction disable_rainbow_features_if_non_csv(active_doc) {\n    let file_path = active_doc ? active_doc.fileName : null;\n    if (!active_doc) {\n        // This can happen when openning settings tab for example.\n        hide_buttons();\n        return;\n    }\n    if (file_path && file_path.endsWith('.git')) {\n        // Sometimes for git-controlled dirs VSCode opens mysterious .git files which are not even present - skip them, don't disable features.\n        return;\n    }\n    var language_id = active_doc.languageId;\n    if (dialect_map.hasOwnProperty(language_id))\n        return;\n    hide_buttons();\n    if (keyboard_cursor_subscription) {\n        keyboard_cursor_subscription.dispose();\n        keyboard_cursor_subscription = null;\n    }\n}\n\n\nfunction get_active_editor() {\n    var active_window = vscode.window;\n    if (!active_window)\n        return null;\n    var active_editor = active_window.activeTextEditor;\n    if (!active_editor)\n        return null;\n    return active_editor;\n}\n\n\nfunction get_active_doc(active_editor=null) {\n    if (!active_editor)\n        active_editor = get_active_editor();\n    if (!active_editor)\n        return null;\n    var active_doc = active_editor.document;\n    if (!active_doc)\n        return null;\n    return active_doc;\n}\n\n\nfunction show_align_shrink_button(file_path) {\n    if (!align_shrink_button)\n        align_shrink_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    if (aligned_files.has(file_path)) {\n        align_shrink_button.text = 'Shrink';\n        align_shrink_button.tooltip = 'Click to shrink table (Then you can click again to align)';\n        align_shrink_button.command = 'rainbow-csv.Shrink';\n    } else {\n        align_shrink_button.text = 'Align';\n        align_shrink_button.tooltip = 'Click to align table (Then you can click again to shrink)';\n        align_shrink_button.command = 'rainbow-csv.Align';\n    }\n    align_shrink_button.show();\n}\n\n\nfunction do_show_column_info_button(full_report, short_report) {\n    if (!column_info_button)\n        column_info_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 1000);\n    column_info_button.text = short_report;\n    column_info_button.tooltip = full_report;\n    column_info_button.show();\n}\n\n\nfunction make_hover(document, language_id, position, cancellation_token) {\n    if (!get_from_config('enable_tooltip', false)) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(document);\n    let cursor_position_info = ll_rainbow_utils().get_cursor_position_info(vscode, document, delim, policy, comment_prefix, position);\n    if (!cursor_position_info || cancellation_token.isCancellationRequested)\n        return null;\n    let enable_tooltip_column_names = get_from_config('enable_tooltip_column_names', false);\n    let header = get_header(document, delim, policy, comment_prefix);\n    let [_full_text, short_report] = ll_rainbow_utils().format_cursor_position_info(cursor_position_info, header, enable_tooltip_column_names, /*show_comments=*/true, /*max_label_length=*/25);\n    let mds = null;\n    if (language_id == DYNAMIC_CSV) {\n        mds = short_report; // Do not colorize hover text because dynamic csv provides inconsistent colors for some of the tokens.\n    } else {\n        mds = new vscode.MarkdownString();\n        mds.appendCodeblock(short_report, 'rainbow hover markup');\n    }\n    return new vscode.Hover(mds);\n}\n\n\nfunction show_column_info_button() {\n    let active_editor = get_active_editor();\n    if (!active_editor) {\n        return false;\n    }\n    let position = ll_rainbow_utils().get_cursor_position_if_unambiguous(active_editor);\n    if (!position) {\n        return false;\n    }\n    let active_doc = get_active_doc(active_editor);\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    let cursor_position_info = ll_rainbow_utils().get_cursor_position_info(vscode, active_doc, delim, policy, comment_prefix, position);\n    if (!cursor_position_info)\n        return false;\n    let enable_tooltip_column_names = get_from_config('enable_tooltip_column_names', false);\n    let header = get_header(active_doc, delim, policy, comment_prefix);\n    let [full_report, short_report] = ll_rainbow_utils().format_cursor_position_info(cursor_position_info, header, enable_tooltip_column_names, /*show_comments=*/false, /*max_label_length=*/25);\n    do_show_column_info_button(full_report, short_report);\n    return true;\n}\n\n\nfunction show_rainbow_off_status_bar_button() {\n    if (!rainbow_off_status_bar_button)\n        rainbow_off_status_bar_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    rainbow_off_status_bar_button.text = 'Rainbow OFF';\n    rainbow_off_status_bar_button.tooltip = 'Click to restore original file type and syntax';\n    rainbow_off_status_bar_button.command = 'rainbow-csv.RainbowSeparatorOff';\n    rainbow_off_status_bar_button.show();\n}\n\n\nfunction show_rbql_status_bar_button() {\n    if (!rbql_status_bar_button)\n        rbql_status_bar_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    rbql_status_bar_button.text = 'Query';\n    rbql_status_bar_button.tooltip = 'Click to run SQL-like RBQL query';\n    rbql_status_bar_button.command = 'rainbow-csv.RBQL';\n    rbql_status_bar_button.show();\n}\n\n\nfunction show_rbql_copy_to_source_button(file_path) {\n    let parent_table_path = result_set_parent_map.get(safe_lower(file_path));\n    if (!parent_table_path || parent_table_path.indexOf(scratch_buf_marker) != -1)\n        return;\n    let parent_basename = path.basename(parent_table_path);\n    if (!copy_back_button)\n        copy_back_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    copy_back_button.text = 'Copy Back';\n    copy_back_button.tooltip = `Copy to parent table: ${parent_basename}`;\n    copy_back_button.command = 'rainbow-csv.CopyBack';\n    copy_back_button.show();\n}\n\n\nasync function csv_lint(active_doc, is_manual_op) {\n    if (!active_doc)\n        active_doc = get_active_doc();\n    if (!active_doc)\n        return null;\n    var file_path = active_doc.fileName; // For new untitled scratch documents this would be \"Untitled-1\", \"Untitled-2\", etc...\n    if (!file_path)\n        return null;\n    var language_id = active_doc.languageId;\n    if (!dialect_map.hasOwnProperty(language_id))\n        return null;\n    let lint_cache_key = `${file_path}.${language_id}`;\n    if (!is_manual_op) {\n        if (extension_context.lint_results.has(lint_cache_key))\n            return null;\n        if (!get_from_config('enable_auto_csv_lint', false))\n            return null;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null)\n        return null;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true});\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, file_path, language_id); // Visual feedback.\n    let detect_trailing_spaces = get_from_config('csv_lint_detect_trailing_spaces', false);\n    let [_records, _num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, detect_trailing_spaces);\n    let is_ok = (first_defective_line === null && fields_info.size <= 1);\n    let lint_result = {'is_ok': is_ok, 'first_defective_line': first_defective_line, 'fields_info': fields_info, 'first_trailing_space_line': first_trailing_space_line};\n    extension_context.lint_results.set(lint_cache_key, lint_result);\n    if (is_manual_op) {\n        // Need timeout here to give user enough time to notice green -> yellow -> green switch, this is a sort of visual feedback.\n        await sleep(500);\n    }\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, file_path, language_id); // Visual feedback.\n    return lint_result;\n}\n\n\nasync function csv_lint_cmd() {\n    // TODO re-run on each file save with content change.\n    let lint_report_for_unit_tests = await csv_lint(null, true);\n    return lint_report_for_unit_tests;\n}\n\n\nasync function run_internal_test_cmd(integration_test_options) {\n    if (integration_test_options && integration_test_options.check_initialization_state) {\n        // This mode is to ensure that the most basic operations do not cause rainbow csv to load extra (potentially heavy) code.\n        // Vim uses the same approach with its plugin/autoload folder layout design.\n        return {initialized: global_state !== null, lazy_loaded: rainbow_utils !== null};\n    }\n    if (integration_test_options && integration_test_options.check_last_rbql_report) {\n        return _unit_test_last_rbql_report;\n    }\n    if (integration_test_options && integration_test_options.check_last_rbql_warnings) {\n        return {'warnings': _unit_test_last_warnings};\n    }\n    return null;\n}\n\n\nasync function show_warnings(warnings) {\n    _unit_test_last_warnings = [];\n    if (!warnings || !warnings.length)\n        return;\n    var active_window = vscode.window;\n    if (!active_window)\n        return null;\n    for (var i = 0; i < warnings.length; i++) {\n        // Do not \"await\" warning messages because the promise gets resolved only on warning dismissal.\n        active_window.showWarningMessage('RBQL warning: ' + warnings[i]);\n    }\n    _unit_test_last_warnings = warnings;\n}\n\n\nasync function handle_rbql_result_file_node(text_doc, delim, policy, warnings) {\n    try {\n        await vscode.window.showTextDocument(text_doc);\n    } catch (error) {\n        show_single_line_error('Unable to open RBQL result document');\n        return;\n    }\n    let language_id = map_dialect_to_language_id(delim, policy);\n    if (language_id && text_doc.languageId != language_id) {\n        // In non-web version we open a new doc without preset filetype, so we need to manually set it.\n        await vscode.languages.setTextDocumentLanguage(text_doc, language_id);\n    }\n    await show_warnings(warnings);\n}\n\n\nasync function handle_rbql_result_file_web(text_doc, warnings) {\n    try {\n        await vscode.window.showTextDocument(text_doc);\n    } catch (error) {\n        show_single_line_error('Unable to open RBQL result document');\n        return;\n    }\n    await show_warnings(warnings);\n}\n\n\nfunction run_command(cmd, args, close_and_error_guard, callback_func) {\n    var command = child_process.spawn(cmd, args, {'windowsHide': true});\n    var stdout = '';\n    var stderr = '';\n    command.stdout.on('data', function(data) {\n        stdout += data.toString();\n    });\n    command.stderr.on('data', function(data) {\n        stderr += data.toString();\n    });\n    command.on('close', function(code) {\n        if (!close_and_error_guard['process_reported']) {\n            close_and_error_guard['process_reported'] = true;\n            callback_func(code, stdout, stderr);\n        }\n    });\n    command.on('error', function(error) {\n        var error_msg = error ? error.name + ': ' + error.message : '';\n        if (!close_and_error_guard['process_reported']) {\n            close_and_error_guard['process_reported'] = true;\n            callback_func(1, '', 'Something went wrong. Make sure you have python installed and added to PATH variable in your OS. Or you can use it with JavaScript instead - it should work out of the box\\nDetails:\\n' + error_msg);\n        }\n    });\n}\n\n\nasync function handle_command_result(src_table_path, dst_table_path, dst_delim, dst_policy, error_code, stdout, stderr, webview_report_handler) {\n    let json_report = stdout;\n    let error_type = null;\n    let error_msg = null;\n    let warnings = [];\n    if (error_code || !json_report || stderr) {\n        error_type = 'Integration';\n        error_msg = stderr ? stderr : 'empty error';\n    } else {\n        try {\n            let report = JSON.parse(json_report);\n            if (report.hasOwnProperty('error_type'))\n                error_type = report['error_type'];\n            if (report.hasOwnProperty('error_msg'))\n                error_msg = report['error_msg'];\n            if (report.hasOwnProperty('warnings'))\n                warnings = report['warnings'];\n        } catch (e) {\n            error_type = 'Integration';\n            error_msg = 'Unable to parse JSON report';\n        }\n    }\n    webview_report_handler(error_type, error_msg);\n    if (error_type || error_msg) {\n        return; // Just exit: error would be shown in the preview window.\n    }\n    // No need to close the RBQL console here, better to leave it open so it can be used to quickly adjust the query if needed.\n    extension_context.autodetection_stoplist.add(dst_table_path);\n    result_set_parent_map.set(safe_lower(dst_table_path), src_table_path);\n    extension_context.autodetection_temporarily_disabled_for_rbql = true;\n    let target_language_id = map_dialect_to_language_id(dst_delim, dst_policy);\n    let doc = await vscode.workspace.openTextDocument(dst_table_path);\n    extension_context.autodetection_temporarily_disabled_for_rbql = false;\n    if (target_language_id == DYNAMIC_CSV) {\n        // TODO it would be better to set this before openTextDocument and adjust the logic so this would affect autodetection.\n        extension_context.dynamic_dialect_for_next_request = [dst_delim, dst_policy];\n    }\n    await handle_rbql_result_file_node(doc, dst_delim, dst_policy, warnings);\n    extension_context.dynamic_dialect_for_next_request = null;\n}\n\n\nfunction get_dst_table_name(input_path, output_delim) {\n    var table_name = path.basename(input_path);\n    var orig_extension = path.extname(table_name);\n    var delim_ext_map = {'\\t': '.tsv', ',': '.csv'};\n    var dst_extension = '.txt';\n    if (delim_ext_map.hasOwnProperty(output_delim)) {\n        dst_extension = delim_ext_map[output_delim];\n    } else if (orig_extension.length > 1) {\n        dst_extension = orig_extension;\n    }\n    let result_table_name = table_name + dst_extension;\n    if (result_table_name == table_name) { // Just being paranoid to avoid overwriting input table accidentally when output dir configured to be the same as input.\n        result_table_name += '.txt';\n    }\n    return result_table_name;\n}\n\n\nfunction file_path_to_query_key(file_path) {\n    return (file_path && file_path.indexOf(scratch_buf_marker) != -1) ? scratch_buf_marker : file_path;\n}\n\nfunction get_dst_table_dir(input_table_path) {\n    let rbql_output_dir = get_from_config('rbql_output_dir', 'TMP');\n    if (rbql_output_dir == 'TMP') {\n        return os.tmpdir();\n    } else if (rbql_output_dir == 'INPUT') {\n        return path.dirname(input_table_path);\n    } else {\n        // Return custom directory. If the directory does not exist or isn't writable RBQL itself will report more or less clear error.\n        return rbql_output_dir;\n    }\n}\n\n\nasync function run_rbql_query(input_path, csv_encoding, backend_language, rbql_query, output_dialect, with_headers, webview_report_handler) {\n    last_rbql_queries.set(file_path_to_query_key(input_path), rbql_query);\n    var cmd = 'python';\n    const test_marker = 'test ';\n    let close_and_error_guard = {'process_reported': false};\n\n    let [input_delim, input_policy, comment_prefix] = [rbql_context.delim, rbql_context.policy, rbql_context.comment_prefix];\n    let [output_delim, output_policy] = [input_delim, input_policy];\n    if (output_dialect == 'csv')\n        [output_delim, output_policy] = [',', QUOTED_POLICY];\n    if (output_dialect == 'tsv')\n        [output_delim, output_policy] = ['\\t', SIMPLE_POLICY];\n    rbql_context.output_delim = output_delim;\n    rbql_context.output_policy = output_policy;\n\n    let output_path = is_web_ext ? null : path.join(get_dst_table_dir(input_path), get_dst_table_name(input_path, output_delim));\n\n    if (rbql_query.startsWith(test_marker)) {\n        if (rbql_query.indexOf('nopython') != -1) {\n            cmd = 'nopython';\n        }\n        let args = [absolute_path_map['rbql mock/rbql_mock.py'], rbql_query];\n        run_command(cmd, args, close_and_error_guard, function(error_code, stdout, stderr) { handle_command_result(input_path, output_path, output_delim, output_policy, error_code, stdout, stderr, webview_report_handler); });\n        return;\n    }\n    if (backend_language == 'js') {\n        let warnings = [];\n        let result_doc = null;\n        let target_language_id = map_dialect_to_language_id(output_delim, output_policy);\n        try {\n            if (is_web_ext) {\n                let result_lines = await ll_rainbow_utils().rbql_query_web(rbql_query, rbql_context.input_document, input_delim, input_policy, output_delim, output_policy, warnings, with_headers, comment_prefix);\n                let output_doc_cfg = {content: result_lines.join('\\n'), language: target_language_id};\n                if (target_language_id == DYNAMIC_CSV) {\n                    extension_context.dynamic_dialect_for_next_request = [output_delim, output_policy];\n                }\n                extension_context.autodetection_temporarily_disabled_for_rbql = true;\n                result_doc = await vscode.workspace.openTextDocument(output_doc_cfg);\n                extension_context.dynamic_dialect_for_next_request = null;\n                extension_context.autodetection_temporarily_disabled_for_rbql = false;\n                webview_report_handler(null, null);\n                await handle_rbql_result_file_web(result_doc, warnings);\n            } else {\n                let csv_options = {'bulk_read': true};\n                await ll_rainbow_utils().rbql_query_node(global_state, rbql_query, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, warnings, with_headers, comment_prefix, /*user_init_code=*/'', csv_options);\n                result_set_parent_map.set(safe_lower(output_path), input_path);\n                extension_context.autodetection_temporarily_disabled_for_rbql = true;\n                result_doc = await vscode.workspace.openTextDocument(output_path);\n                extension_context.autodetection_temporarily_disabled_for_rbql = false;\n                webview_report_handler(null, null);\n                if (target_language_id == DYNAMIC_CSV) {\n                    // TODO it would be better to set this before openTextDocument and adjust the logic so this would affect autodetection.\n                    extension_context.dynamic_dialect_for_next_request = [output_delim, output_policy];\n                }\n                await handle_rbql_result_file_node(result_doc, output_delim, output_policy, warnings);\n                extension_context.dynamic_dialect_for_next_request = null;\n            }\n        } catch (e) {\n            let [error_type, error_msg] = ll_rbql_csv().exception_to_error_info(e);\n            webview_report_handler(error_type, error_msg);\n            return;\n        }\n    } else {\n        if (is_web_ext) {\n            webview_report_handler('Input error', 'Python backend for RBQL is not supported in web version, please use JavaScript backend.');\n            return;\n        }\n        let cmd_safe_query = Buffer.from(rbql_query, \"utf-8\").toString(\"base64\");\n        if (!comment_prefix) {\n            comment_prefix = '';\n        }\n        let args = [absolute_path_map['rbql_core/vscode_rbql.py'], cmd_safe_query, input_path, input_delim, input_policy, output_path, output_delim, output_policy, comment_prefix, csv_encoding];\n        if (with_headers)\n            args.push('--with_headers');\n        run_command(cmd, args, close_and_error_guard, function(error_code, stdout, stderr) { handle_command_result(input_path, output_path, output_delim, output_policy, error_code, stdout, stderr, webview_report_handler); });\n    }\n}\n\n\nasync function set_header_line() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n\n    let [delim, policy, _comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        show_single_line_error('Unable to set header line: no separator specified');\n        return;\n    }\n    let file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to set header line for non-file documents');\n        return;\n    }\n    let selection = active_editor.selection;\n    let raw_header = active_doc.lineAt(selection.start.line).text;\n\n    let header = csv_utils.smart_split(raw_header, delim, policy, false)[0];\n    await save_to_global_state(make_header_key(file_path), JSON.stringify(header));\n}\n\n\nfunction preserve_original_language_id_if_needed(file_path, original_language_id, original_language_ids) {\n    if (original_language_id == DYNAMIC_CSV) {\n        // This is to prevent invalid noop \"dynamic csv\" -> \"dynamic csv\" switch without carying dialect info.\n        return;\n    }\n    if (original_language_ids.has(file_path)) {\n        // Rainbow Off should act more like an actuall off i.e. return to the first filetype in the chain instead of the previous one.\n        return;\n    }\n    original_language_ids.set(file_path, original_language_id);\n}\n\n\nasync function manually_set_rainbow_separator(policy=null) {\n    // The effect of manually setting the separator will disapear in the preview mode when the file is toggled in preview tab: see https://code.visualstudio.com/docs/getstarted/userinterface#_preview-mode\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let selection = active_editor.selection;\n    if (!selection) {\n        show_single_line_error(\"Selection is empty\");\n        return;\n    }\n    if (selection.start.line != selection.end.line) {\n        show_single_line_error(\"Rainbow separator must not span multiple lines\");\n        return;\n    }\n    let separator = active_doc.lineAt(selection.start.line).text.substring(selection.start.character, selection.end.character);\n    if (!separator) {\n        show_single_line_error(\"Make nonempty separator selection with the cursor\");\n        return;\n    }\n    if (policy == QUOTED_RFC_POLICY && separator != ',' && separator != ';') {\n        show_single_line_error(\"Only comma and semicolon separators are currently supported to use with multiline fields.\");\n        return;\n    }\n    if (policy === null) {\n        policy = get_default_policy(separator);\n    }\n    let language_id = map_dialect_to_language_id(separator, policy);\n    // Adding to stoplist just in case: this is the manual op, so the user now fully controls the filetype.\n    extension_context.autodetection_stoplist.add(active_doc.fileName);\n    if (language_id == DYNAMIC_CSV) {\n        extension_context.dynamic_document_dialects.set(active_doc.fileName, {delim: separator, policy: policy});\n    }\n    let original_language_id = active_doc.languageId;\n    if (original_language_id == DYNAMIC_CSV && language_id == DYNAMIC_CSV) {\n        // We need to somehow explicitly re-tokenize file, because otherwise setTextDocumentLanguage would be a NO-OP, so we do this workaround with temporarily switching to plaintext and back.\n        extension_context.autodetection_stoplist.add(active_doc.fileName); // This is to avoid potential autodetection in plaintext.\n        extension_context.autodetection_temporarily_disabled_for_rbql = true;\n        active_doc = await vscode.languages.setTextDocumentLanguage(active_doc, 'plaintext');\n        extension_context.autodetection_temporarily_disabled_for_rbql = false;\n    }\n    let doc = await vscode.languages.setTextDocumentLanguage(active_doc, language_id);\n    preserve_original_language_id_if_needed(doc.fileName, original_language_id, extension_context.original_language_ids);\n}\n\n\nasync function set_comment_prefix() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let selection = active_editor.selection;\n    if (!selection) {\n        show_single_line_error(\"Selection is empty\");\n        return;\n    }\n    let comment_prefix = active_doc.lineAt(selection.start.line).text.substring(selection.start.character, selection.end.character);\n    extension_context.custom_comment_prefixes.set(active_doc.fileName, comment_prefix);\n    if (!comment_prefix) {\n        manual_comment_prefix_stoplist.add(active_doc.fileName);\n    } else {\n        manual_comment_prefix_stoplist.delete(active_doc.fileName);\n    }\n    if (comment_prefix) {\n        vscode.languages.setLanguageConfiguration(active_doc.languageId, { comments: { lineComment: comment_prefix } });\n    }\n    if (active_doc.languageId == DYNAMIC_CSV) {\n        // Re-enable tokenization to explicitly trigger the highligthing. Sometimes this doesn't happen automatically.\n        enable_dynamic_semantic_tokenization();\n    } else {\n        // Re-enable comment tokenization to explicitly adjust the comment highligthing (sometimes to disable it if comment prefix is set to an empty string).\n        register_comment_tokenization_handler();\n    }\n}\n\n\nasync function restore_original_language() {\n    var active_doc = get_active_doc();\n    if (!active_doc)\n        return;\n    let file_path = active_doc.fileName;\n    extension_context.autodetection_stoplist.add(file_path);\n    let original_language_id = 'plaintext';\n    if (extension_context.original_language_ids.has(file_path)) {\n        original_language_id = extension_context.original_language_ids.get(file_path);\n    }\n    if (!original_language_id || original_language_id == active_doc.languageId) {\n        show_single_line_error(\"Unable to restore original language\");\n        return;\n    }\n\n    let doc = await vscode.languages.setTextDocumentLanguage(active_doc, original_language_id);\n    extension_context.original_language_ids.delete(file_path);\n    disable_rainbow_features_if_non_csv(doc);\n    // If the previous language is restored via native VSCode filetype selection the custom dialect info will be kept and in case of future manual Dynamic CSV selection the highlighting will be automatically activated without separator entry dialog.\n    extension_context.dynamic_document_dialects.delete(file_path);\n}\n\n\nasync function set_join_table_name() {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    var active_doc = get_active_doc();\n    if (!active_doc)\n        return;\n    let file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to use this document as join table');\n        return;\n    }\n    var title = \"Input table name to use in RBQL JOIN expressions instead of table path\";\n    var input_box_props = {\"prompt\": title, \"value\": 'b'};\n    let table_name = await vscode.window.showInputBox(input_box_props);\n    if (!table_name)\n        return; // User pressed Esc and closed the input box.\n    await save_to_global_state(ll_rainbow_utils().make_table_name_key(table_name), file_path);\n}\n\n\nasync function set_virtual_header() {\n    var active_doc = get_active_doc();\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        show_single_line_error('Unable to set virtual header: no separator specified');\n        return;\n    }\n    var file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to edit column names for non-file documents');\n        return;\n    }\n    var old_header = get_header(active_doc, delim, policy, comment_prefix);\n    var title = \"Adjust column names displayed in hover tooltips. Actual header line and file content won't be affected.\";\n    var old_header_str = quoted_join(old_header, delim);\n    var input_box_props = {\"prompt\": title, \"value\": old_header_str};\n    let raw_new_header = await vscode.window.showInputBox(input_box_props);\n    if (!raw_new_header)\n        return; // User pressed Esc and closed the input box.\n    let new_header = csv_utils.smart_split(raw_new_header, delim, policy, false)[0];\n    await save_to_global_state(make_header_key(file_path), JSON.stringify(new_header));\n}\n\n\nasync function column_edit(edit_mode) {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    let active_doc = active_editor.document;\n    if (!active_doc)\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let position = ll_rainbow_utils().get_cursor_position_if_unambiguous(active_editor);\n    if (!position) {\n        show_single_line_error('Unable to enter column edit mode: make sure that no text is selected and only one cursor is active');\n        return;\n    }\n    if (active_doc.lineCount >= 10000) {\n        show_single_line_error('Multicursor column edit works only for files smaller than 10000 lines.');\n        return;\n    }\n    let col_num = (ll_rainbow_utils().get_cursor_position_info(vscode, active_doc, delim, policy, comment_prefix, position)).column_number;\n    let [selections, error_msg, warning_msg] = ll_rainbow_utils().generate_column_edit_selections(vscode, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    if (error_msg !== null) {\n        show_single_line_error(error_msg);\n        return;\n    }\n    if (warning_msg) {\n        vscode.window.showWarningMessage(warning_msg);\n    }\n    active_editor.selections = selections;\n    // Call showTextDocument so that the editor will gain focus and the cursors will become active and blinking. This is a critical step here!\n    await vscode.window.showTextDocument(active_doc);\n}\n\n\nasync function shrink_table() {\n    let active_editor = get_active_editor();\n    let active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let language_id = active_doc.languageId;\n    if (!dialect_map.hasOwnProperty(language_id))\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let progress_options = {location: vscode.ProgressLocation.Window, title: 'Rainbow CSV'};\n    await vscode.window.withProgress(progress_options, async (progress) => {\n        progress.report({message: 'Preparing'});\n        await push_current_stack_to_js_callback_queue_to_allow_ui_update();\n        let [shrinked_doc_text, first_failed_line] = ll_rainbow_utils().shrink_columns(active_doc, delim, policy, comment_prefix);\n        if (first_failed_line) {\n            show_single_line_error(`Unable to shrink: Inconsistent double quotes at line ${first_failed_line}`);\n            return;\n        }\n        aligned_files.delete(active_doc.fileName);\n        show_align_shrink_button(active_doc.fileName);\n        if (shrinked_doc_text === null) {\n            vscode.window.showWarningMessage('No trailing whitespaces found, skipping');\n            return;\n        }\n        progress.report({message: 'Shrinking columns'});\n        await push_current_stack_to_js_callback_queue_to_allow_ui_update();\n        await replace_doc_content(active_editor, active_doc, shrinked_doc_text);\n    });\n}\n\n\nasync function align_table() {\n    let active_editor = get_active_editor();\n    let active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let language_id = active_doc.languageId;\n    if (!dialect_map.hasOwnProperty(language_id))\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let progress_options = {location: vscode.ProgressLocation.Window, title: 'Rainbow CSV'};\n    await vscode.window.withProgress(progress_options, async (progress) => {\n        progress.report({message: 'Calculating column statistics'});\n        await push_current_stack_to_js_callback_queue_to_allow_ui_update();\n        let [column_stats, first_failed_line, records, comments] = ll_rainbow_utils().calc_column_stats(active_doc, delim, policy, comment_prefix);\n        if (first_failed_line) {\n            show_single_line_error(`Unable to align: Inconsistent double quotes at line ${first_failed_line}`);\n            return;\n        }\n        column_stats = ll_rainbow_utils().adjust_column_stats(column_stats, delim.length);\n        if (column_stats === null) {\n            show_single_line_error('Unable to allign: Internal Rainbow CSV Error');\n            return;\n        }\n        progress.report({message: 'Preparing final alignment'});\n        await push_current_stack_to_js_callback_queue_to_allow_ui_update();\n        let aligned_doc_text = ll_rainbow_utils().align_columns(records, comments, column_stats, delim);\n        aligned_files.add(active_doc.fileName);\n        show_align_shrink_button(active_doc.fileName);\n        // The last stage of actually applying the edits takes almost 80% of the whole alignment runtime.\n        progress.report({message: 'Aligning columns'});\n        await push_current_stack_to_js_callback_queue_to_allow_ui_update();\n        await replace_doc_content(active_editor, active_doc, aligned_doc_text);\n    });\n}\n\n\nasync function do_copy_back(query_result_doc, active_editor) {\n    let data = query_result_doc.getText();\n    let active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    await replace_doc_content(active_editor, active_doc, data);\n}\n\n\nasync function copy_back() {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    let result_doc = get_active_doc();\n    if (!result_doc)\n        return;\n    let file_path = result_doc.fileName;\n    let parent_table_path = result_set_parent_map.get(safe_lower(file_path));\n    if (!parent_table_path)\n        return;\n    let parent_doc = await vscode.workspace.openTextDocument(parent_table_path);\n    let parent_editor = await vscode.window.showTextDocument(parent_doc);\n    await do_copy_back(result_doc, parent_editor);\n}\n\n\nasync function update_query_history(query) {\n    let history_list = get_from_global_state('rbql_query_history', []);\n    let old_index = history_list.indexOf(query);\n    if (old_index != -1) {\n        history_list.splice(old_index, 1);\n    } else if (history_list.length >= 20) {\n        history_list.splice(0, 1);\n    }\n    history_list.push(query);\n    await save_to_global_state('rbql_query_history', history_list);\n}\n\n\nasync function handle_rbql_client_message(webview, message, integration_test_options=null) {\n    let message_type = message['msg_type'];\n\n    let webview_report_handler = async function(error_type, error_msg) {\n        let report_msg = {'msg_type': 'rbql_report'};\n        if (error_type)\n            report_msg[\"error_type\"] = error_type;\n        if (error_msg)\n            report_msg[\"error_msg\"] = error_msg;\n        _unit_test_last_rbql_report = report_msg;\n        await webview.postMessage(report_msg);\n    };\n\n    if (message_type == 'handshake') {\n        var backend_language = get_from_global_state('rbql_backend_language', 'js');\n        var encoding = get_from_global_state('rbql_encoding', 'utf-8');\n        var init_msg = {'msg_type': 'handshake', 'backend_language': backend_language, 'encoding': encoding};\n        ll_rainbow_utils().sample_preview_records_from_context(rbql_context, init_msg, preview_window_size, cached_table_parse_result);\n        let path_key = file_path_to_query_key(rbql_context.input_document_path);\n        if (last_rbql_queries.has(path_key))\n            init_msg['last_query'] = last_rbql_queries.get(path_key);\n        let history_list = get_from_global_state('rbql_query_history', []);\n        init_msg['query_history'] = history_list;\n        init_msg['policy'] = rbql_context.policy;\n        init_msg['with_headers'] = rbql_context.with_headers;\n        init_msg['header'] = rbql_context.header;\n        init_msg['is_web_ext'] = is_web_ext;\n        if (integration_test_options) {\n            init_msg['integration_test_language'] = integration_test_options.rbql_backend;\n            init_msg['integration_test_query'] = integration_test_options.rbql_query;\n            init_msg['integration_test_with_headers'] = integration_test_options.with_headers || false;\n            init_msg['integration_test_delay'] = integration_test_options.integration_test_delay || 2000;\n        }\n        await webview.postMessage(init_msg);\n    }\n\n    if (message_type == 'fetch_table_header') {\n        try {\n            let table_id = message['table_id'];\n            let encoding = message['encoding'];\n\n            let input_table_dir = rbql_context.input_document_path ? path.dirname(rbql_context.input_document_path) : null;\n            let table_path = ll_rainbow_utils().find_table_path(global_state, input_table_dir, table_id);\n            if (!table_path)\n                return;\n            let header_line = await ll_rainbow_utils().read_header(table_path, encoding);\n            let [fields, warning] = csv_utils.smart_split(header_line, rbql_context.delim, rbql_context.policy, false);\n            if (!warning) {\n                webview.postMessage({'msg_type': 'fetch_table_header_response', 'header': fields});\n            }\n        } catch (e) {\n            console.error('Unable to get join table header: ' + String(e));\n        }\n    }\n\n    if (message_type == 'update_query') {\n        let rbql_query = message['query'];\n        if (!rbql_query)\n            return;\n        if (rbql_context.input_document_path)\n            last_rbql_queries.set(file_path_to_query_key(rbql_context.input_document_path), rbql_query);\n    }\n\n    if (message_type == 'with_headers_change') {\n        rbql_context.with_headers = message['with_headers'];\n        if (rbql_context.input_document_path)\n            await save_to_global_state(make_with_headers_key(rbql_context.input_document_path), rbql_context.with_headers);\n    }\n\n    if (message_type == 'navigate') {\n        var navig_direction = message['direction'];\n        if (navig_direction == 'backward') {\n            rbql_context.requested_start_record -= preview_window_size;\n        } else if (navig_direction == 'forward') {\n            rbql_context.requested_start_record += preview_window_size;\n        } else if (navig_direction == 'begin') {\n            rbql_context.requested_start_record = 0;\n        } else if (navig_direction == 'end') {\n            rbql_context.requested_start_record = rbql_context.input_document.lineCount; // This is just max possible value which is incorrect and will be adjusted later.\n        }\n        let protocol_message = {'msg_type': 'navigate'};\n        ll_rainbow_utils().sample_preview_records_from_context(rbql_context, protocol_message, preview_window_size, cached_table_parse_result);\n        await webview.postMessage(protocol_message);\n    }\n\n    if (message_type == 'run') {\n        let rbql_query = message['query'];\n        let backend_language = message['backend_language'];\n        let encoding = message['encoding'];\n        let output_dialect = message['output_dialect'];\n        let with_headers = message['with_headers'];\n        await update_query_history(rbql_query);\n        await run_rbql_query(rbql_context.input_document_path, encoding, backend_language, rbql_query, output_dialect, with_headers, webview_report_handler);\n    }\n\n    if (message_type == 'edit_udf') {\n        if (is_web_ext) {\n            webview_report_handler('Input error', 'UDFs are currently not supported in web version');\n            return;\n        }\n        let backend_language = message['backend_language'];\n        let udf_file_path = null;\n        let default_content = '';\n        if (backend_language == 'js') {\n            udf_file_path = path.join(os.homedir(), '.rbql_init_source.js');\n            default_content = ll_rainbow_utils().get_default_js_udf_content();\n        } else {\n            udf_file_path = path.join(os.homedir(), '.rbql_init_source.py');\n            default_content = ll_rainbow_utils().get_default_python_udf_content();\n        }\n        if (!fs.existsSync(udf_file_path)) {\n            fs.writeFileSync(udf_file_path, default_content);\n        }\n        let udf_doc = await vscode.workspace.openTextDocument(udf_file_path);\n        await vscode.window.showTextDocument(udf_doc);\n    }\n\n    if (message_type == 'global_param_change') {\n        await save_to_global_state(message['key'], message['value']);\n    }\n}\n\n\nfunction adjust_webview_paths(paths_list, client_html) {\n    for (const local_path of paths_list) {\n        let adjusted_webview_url = null;\n        if (is_web_ext) {\n            adjusted_webview_url = absolute_path_map[local_path];\n        } else {\n            adjusted_webview_url = preview_panel.webview.asWebviewUri(vscode.Uri.file(absolute_path_map[local_path]));\n        }\n        client_html = client_html.replace(`src=\"${local_path}\"`, `src=\"${adjusted_webview_url}\"`);\n    }\n    return client_html;\n}\n\n\nasync function edit_rbql(integration_test_options=null) {\n    let active_window = vscode.window;\n    if (!active_window)\n        return;\n    let active_editor = active_window.activeTextEditor;\n    if (!active_editor)\n        return;\n    let active_doc = active_editor.document;\n    if (!active_doc)\n        return;\n    let orig_uri = active_doc.uri;\n    if (!orig_uri)\n        return;\n    // For web orig_uri.scheme can have other valid values e.g. `vscode-test-web` when testing the browser integration.\n    if (orig_uri.scheme != 'file' && orig_uri.scheme != 'untitled' && !is_web_ext)\n        return;\n    if (orig_uri.scheme == 'file' && active_doc.isDirty && !is_web_ext) {\n        show_single_line_error(\"Unable to run RBQL: file has unsaved changes\");\n        return;\n    }\n    let input_path = null;\n    if (orig_uri.scheme == 'untitled' && !is_web_ext) {\n        // Scheme 'untitled' means that the document is a scratch buffer that hasn't been saved yet, see https://code.visualstudio.com/api/references/document-selector\n        let data = active_doc.getText();\n        let rnd_suffix = String(Math.floor(Math.random() * 1000000));\n        input_path = path.join(os.tmpdir(), `${scratch_buf_marker}_${rnd_suffix}.txt`);\n        // TODO consider adding username to the input_path and using chmod 600 on it.\n        fs.writeFileSync(input_path, data);\n    } else {\n        input_path = active_doc.fileName;\n    }\n\n    if (!input_path) {\n        show_single_line_error(\"Unable to run RBQL for this file\");\n        return;\n    }\n\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        policy = 'monocolumn';\n        delim = 'monocolumn';\n    }\n    let with_headers_by_default = get_from_config('rbql_with_headers_by_default', false);\n    let with_headers = get_from_global_state(make_with_headers_key(input_path), with_headers_by_default);\n    let header = get_header_from_document(active_doc, delim, policy, comment_prefix);\n    rbql_context = {\n        \"input_document\": active_doc,\n        \"input_document_path\": input_path,\n        \"requested_start_record\": 0,\n        \"delim\": delim,\n        \"policy\": policy,\n        \"comment_prefix\": comment_prefix,\n        \"with_headers\": with_headers,\n        \"header\": header\n    };\n\n    preview_panel = vscode.window.createWebviewPanel('rbql-console', 'RBQL Console', vscode.ViewColumn.Active, {enableScripts: true});\n    if (!client_html_template) {\n        if (is_web_ext) {\n            client_html_template = client_html_template_web;\n        } else {\n            client_html_template = fs.readFileSync(absolute_path_map['rbql_client.html'], \"utf8\");\n        }\n    }\n    let client_html = client_html_template;\n    client_html = adjust_webview_paths(['contrib/textarea-caret-position/index.js', 'rbql_suggest.js', 'rbql_client.js', 'rbql_logo.svg'], client_html);\n    preview_panel.webview.html = client_html;\n    preview_panel.webview.onDidReceiveMessage(function(message) { handle_rbql_client_message(preview_panel.webview, message, integration_test_options); });\n}\n\n\nfunction autodetect_dialect(config, active_doc, candidate_separators, comment_prefix) {\n    let candidate_dialects = [];\n    for (let separator of candidate_separators) {\n        let policy = get_default_policy(separator);\n        let dialect_id = map_dialect_to_language_id(separator, policy);\n        if (!dialect_id || !policy)\n            continue;\n        candidate_dialects.push([dialect_id, separator, policy]);\n        if (separator == ',' || separator == ';') {\n            candidate_dialects.push([DYNAMIC_CSV, separator, QUOTED_RFC_POLICY]);\n        }\n    }\n    let detect_trailing_spaces = get_from_config('csv_lint_detect_trailing_spaces', false, config);\n    let min_num_lines = get_from_config('autodetection_min_line_count', 10, config);\n    if (active_doc.lineCount < min_num_lines)\n        return [null, null, null];\n    let [best_dialect, best_separator, best_policy, best_dialect_first_trailing_space_line] = [null, null, null, null];\n    let best_dialect_num_columns = 1;\n    for (let candidate_dialect of candidate_dialects) {\n        let [dialect_id, separator, policy] = candidate_dialect;\n        let [_records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(active_doc, separator, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, detect_trailing_spaces, /*min_num_fields_for_autodetection=*/best_dialect_num_columns + 1);\n        if (first_defective_line !== null || fields_info.size != 1)\n            continue;\n        if (num_records_parsed < min_num_lines) {\n            // Ensure that min_num_lines also applies to number of parsed records. There could be a discrepancy between number of lines and records due to comment lines and/or multiline rfc records.\n            continue;\n        }\n        let num_columns = Array.from(fields_info.keys())[0];\n        if (num_columns >= best_dialect_num_columns + 1) {\n            best_dialect_num_columns = num_columns;\n            [best_dialect, best_separator, best_policy] = [dialect_id, separator, policy];\n            best_dialect_first_trailing_space_line = first_trailing_space_line;\n        }\n    }\n    return [best_dialect, best_separator, best_policy, best_dialect_first_trailing_space_line];\n}\n\n\nfunction autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test) {\n    let [best_dialect, best_separator, best_policy] = ['csv', ',', QUOTED_POLICY];\n    let best_dialect_frequency = 0;\n    let data = active_doc.getText();\n    if (!data)\n        return [best_dialect, best_separator, best_policy];\n    for (let separator of candidate_separators) {\n        if (separator == ' ' || separator == '.')\n            continue; // Whitespace and dot have advantage over other separators in this algorithm, so we just skip them.\n        let frequency = 0;\n        for (let j = 0; j < max_num_chars_to_test && j < data.length; j++) {\n            if (data[j] == separator)\n                frequency += 1;\n        }\n        if (frequency > best_dialect_frequency) {\n            let policy = get_default_policy(separator);\n            let dialect_id = map_dialect_to_language_id(separator, policy);\n            [best_dialect, best_separator, best_policy] = [dialect_id, separator, policy];\n            best_dialect_frequency = frequency;\n        }\n    }\n    return [best_dialect, best_separator, best_policy];\n}\n\n\nasync function try_autoenable_rainbow_csv(vscode, config, extension_context, active_doc) {\n    // VSCode to some extent is capable of \"remembering\" doc id in the previous invocation, at least when used in debug mode.\n\n    // VSCode may (and will?) forget documentId of a document \"A\" if document \"B\" is opened in the tab where \"A\" was (double VS single click in file browser panel).\n    // see https://code.visualstudio.com/docs/getstarted/userinterface#_preview-mode\n    if (extension_context.autodetection_temporarily_disabled_for_rbql)\n        return active_doc;\n    if (!active_doc)\n        return active_doc;\n    if (!get_from_config('enable_separator_autodetection', false, config))\n        return active_doc;\n    let candidate_separators = get_from_config('autodetect_separators', [], config).map((s) => s === 'TAB' ? '\\t' : s);\n    var original_language_id = active_doc.languageId;\n    var file_path = active_doc.fileName;\n    if (!file_path || extension_context.autodetection_stoplist.has(file_path) || file_path.endsWith('.git')) { // For some reason there are some ghost '.git' files. TODO figure this out!\n        return active_doc;\n    }\n    let is_default_csv = file_path.endsWith('.csv') && original_language_id == 'csv';\n    if (original_language_id != 'plaintext' && !is_default_csv)\n        return active_doc;\n    let comment_prefix_for_autodetection = get_from_config('comment_prefix', '', config) || '#'; // Assume '#' as a comment prefix for autodetection purposes only.\n    let [rainbow_csv_language_id, delim, policy, first_trailing_space_line] = autodetect_dialect(config, active_doc, candidate_separators, comment_prefix_for_autodetection);\n    if (rainbow_csv_language_id) {\n        // Add the file to lint results to avoid re-parsing it with CSV Lint later.\n        extension_context.lint_results.set(`${active_doc.fileName}.${rainbow_csv_language_id}`, {'is_ok': true, 'first_trailing_space_line': first_trailing_space_line});\n    } else if (!rainbow_csv_language_id && is_default_csv) {\n        // Smart autodetection method has failed, but we need to choose a separator because this is a csv file. Let's just find the most popular one within the first N characters.\n        [rainbow_csv_language_id, delim, policy] = autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000);\n    }\n    if (!rainbow_csv_language_id)\n        return active_doc;\n    // Intentionally do not store comment prefix used for autodetection in the dialect info since it is not file-specific anyway and is stored in the settings.\n    // And in case if user changes it in the settings it would immediately affect the autodetected files.\n    if (rainbow_csv_language_id == DYNAMIC_CSV)  {\n        extension_context.dynamic_document_dialects.set(active_doc.fileName, {delim: delim, policy: policy});\n    }\n    if (rainbow_csv_language_id == original_language_id)\n        return active_doc;\n    let doc = await vscode.languages.setTextDocumentLanguage(active_doc, rainbow_csv_language_id);\n    preserve_original_language_id_if_needed(file_path, original_language_id, extension_context.original_language_ids);\n    return doc;\n}\n\n\nasync function handle_first_edit_for_an_empty_doc(change_event) {\n    if (!change_event)\n        return;\n    if (doc_first_edit_subscription) {\n        doc_first_edit_subscription.dispose();\n        doc_first_edit_subscription = null;\n    }\n    await try_autoenable_rainbow_csv(vscode, vscode.workspace.getConfiguration('rainbow_csv'), extension_context, change_event.document);\n}\n\n\nfunction register_csv_copy_paste_for_empty_doc(active_doc) {\n    if (!get_from_config('enable_separator_autodetection', false))\n        return;\n    if (!active_doc || doc_first_edit_subscription)\n        return;\n    if (!active_doc.isUntitled && active_doc.lineCount != 0)\n        return;\n    doc_first_edit_subscription = vscode.workspace.onDidChangeTextDocument(handle_first_edit_for_an_empty_doc);\n}\n\n\nasync function handle_editor_switch(editor) {\n    let active_doc = get_active_doc(editor);\n    disable_rainbow_features_if_non_csv(active_doc);\n    await enable_rainbow_features_if_csv(active_doc); // No-op if non-csv.\n}\n\n\nfunction do_handle_cursor_movement() {\n    if (!show_column_info_button() && column_info_button) {\n        column_info_button.hide();\n    }\n}\n\n\nfunction handle_cursor_movement(_unused_cursor_event) {\n    if (cursor_timeout_handle !== null) {\n        clearTimeout(cursor_timeout_handle);\n    }\n    // We need timeout delay here to deduplicate/debounce events from multiple consecutive movements, see https://stackoverflow.com/a/49050990/2898283.\n    cursor_timeout_handle = setTimeout(() => do_handle_cursor_movement(), 10);\n}\n\n\nasync function handle_doc_open(active_doc) {\n    // The onDidOpenTextDocument handler will trigger for already \"opened\" docs too if they are re-opened in the same tab. Example\n    // Document \"A\" opens in tab1 -> triggers onDidOpenTextDocument\n    // Document \"B\" opens in tab1 -> triggers onDidOpenTextDocument  (this could happen if user clicks on document \"B\" in the left file browser panel)\n    // Document \"A\" opens in tab1 -> triggers onDidOpenTextDocument again! The previous languageId is reset.\n    // In other words if user opens a different document in the same tab (single click VS double click in the file browser panel) it may trigger the curent document closing and opening of a new doc.\n    // This behavior is called Preview Mode, see https://vscode.one/new-tab-vscode/ and https://code.visualstudio.com/docs/getstarted/userinterface#_preview-mode\n    register_csv_copy_paste_for_empty_doc(active_doc);\n    active_doc = await try_autoenable_rainbow_csv(vscode, vscode.workspace.getConfiguration('rainbow_csv'), extension_context, active_doc);\n    disable_rainbow_features_if_non_csv(active_doc);\n    await enable_rainbow_features_if_csv(active_doc); // No-op if non-csv.\n}\n\n\nfunction quote_field(field, delim) {\n    if (field.indexOf('\"') != -1 || field.indexOf(delim) != -1) {\n        return '\"' + field.replace(/\"/g, '\"\"') + '\"';\n    }\n    return field;\n}\n\n\nfunction quoted_join(fields, delim) {\n    var quoted_fields = fields.map(function(val) { return quote_field(val, delim); });\n    return quoted_fields.join(delim);\n}\n\n\nasync function make_preview(uri, preview_mode) {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    var file_path = uri.fsPath;\n    if (!file_path || !fs.existsSync(file_path)) {\n        vscode.window.showErrorMessage('Invalid file');\n        return;\n    }\n\n    var size_limit = 1024000; // ~1MB\n    var file_size_in_bytes = fs.statSync(file_path)['size'];\n    if (file_size_in_bytes <= size_limit) {\n        vscode.window.showWarningMessage('Rainbow CSV: The file is not big enough, showing the full file instead. Use this preview for files larger than 1MB');\n        let full_orig_doc = await vscode.workspace.openTextDocument(file_path);\n        await vscode.window.showTextDocument(full_orig_doc);\n        return;\n    }\n\n    let file_basename = path.basename(file_path);\n    const out_path = path.join(os.tmpdir(), `.rb_csv_preview.${preview_mode}.${file_basename}`);\n\n    fs.open(file_path, 'r', (err, fd) => {\n        if (err) {\n            console.log(err.message);\n            vscode.window.showErrorMessage('Unable to preview file');\n            return;\n        }\n\n        var buffer = Buffer.alloc(size_limit);\n        let read_begin_pos = preview_mode == 'head' ? 0 : Math.max(file_size_in_bytes - size_limit, 0);\n        fs.read(fd, buffer, 0, size_limit, read_begin_pos, function(err, _num) {\n            if (err) {\n                console.log(err.message);\n                vscode.window.showErrorMessage('Unable to preview file');\n                return;\n            }\n\n            const buffer_str = buffer.toString();\n            // TODO handle old mac '\\r' line endings - still used by Mac version of Excel.\n            let content = null;\n            if (preview_mode == 'head') {\n                content = buffer_str.substr(0, buffer_str.lastIndexOf(buffer_str.includes('\\r\\n') ? '\\r\\n' : '\\n'));\n            } else {\n                content = buffer_str.substr(buffer_str.indexOf('\\n') + 1);\n            }\n            fs.writeFileSync(out_path, content);\n            vscode.workspace.openTextDocument(out_path).then(doc => vscode.window.showTextDocument(doc));\n        });\n    });\n}\n\n\nfunction register_csv_hover_info_provider(language_id, context) {\n    let hover_provider = vscode.languages.registerHoverProvider(language_id, {\n        provideHover(document, position, token) {\n            return make_hover(document, language_id, position, token);\n        }\n    });\n    context.subscriptions.push(hover_provider);\n}\n\n\nclass RainbowTokenProvider {\n    // We don't utilize typescript `implement` interface keyword, because TS doesn't seem to be exporting interfaces to JS (unlike classes).\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(document, range, _token) {\n        let [delim, policy, comment_prefix] = get_dialect(document);\n        if (!policy || document.languageId != DYNAMIC_CSV) {\n            return null;\n        }\n        let table_ranges = ll_rainbow_utils().parse_document_range(vscode, document, delim, policy, comment_prefix, range);\n        // Create a new builder to clear the previous tokens.\n        const builder = new vscode.SemanticTokensBuilder(tokens_legend);\n        for (let row_info of table_ranges) {\n            if (row_info.hasOwnProperty('comment_range')) {\n                builder.push(row_info.comment_range, 'comment');\n            } else {\n                for (let col_num = 0; col_num < row_info.record_ranges.length; col_num++) {\n                    for (let record_range of row_info.record_ranges[col_num]) {\n                        // One logical field can map to multiple tokens if it spans multiple lines because VSCode doesn't support multiline tokens.\n                        builder.push(record_range, tokenTypes[col_num % tokenTypes.length]);\n                    }\n                }\n            }\n        }\n        return builder.build();\n    }\n}\n\n\nclass CommentTokenProvider {\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(doc, range, _token) {\n        let [_delim, policy, comment_prefix] = get_dialect(doc);\n        if (manual_comment_prefix_stoplist.has(doc.fileName) && !comment_prefix) {\n            // We can't use empty comment prefix (and early return) - in that case the previous highlighting would not go away due to a VSCode quirk, need to make an empty build instead to make sure that all previously highlighted lines were cleared.\n            comment_prefix = '#####COMMENT_PREFIX_THAT_CAN_NOT_OCCURE_IN_A_NORMAL_FILE_AND_EVEN_IF_IT_OCCURES_NOT_A_BIG_DEAL####';\n        }\n        if (!comment_prefix || policy === null || policy == QUOTED_RFC_POLICY) {\n            return null; // Sanity check: with QUOTED_RFC_POLICY we should be using a different tokenizer which also handles comments.\n        }\n        // Create a new builder to clear the previous tokens.\n        const builder = new vscode.SemanticTokensBuilder(tokens_legend);\n        let begin_line = Math.max(0, range.start.line - dynamic_csv_highlight_margin);\n        let end_line = Math.min(doc.lineCount, range.end.line + dynamic_csv_highlight_margin);\n        for (let lnum = begin_line; lnum < end_line; lnum++) {\n            let line_text = doc.lineAt(lnum).text;\n            if (line_text.startsWith(comment_prefix)) {\n                builder.push(new vscode.Range(lnum, 0, lnum, line_text.length), 'comment');\n            }\n        }\n        return builder.build();\n    }\n}\n\n\nasync function activate(context) {\n    // TODO consider storing `context` itself in a global variable.\n    global_state = context.globalState;\n\n    if (is_web_ext) {\n        let rbql_client_uri = vscode.Uri.joinPath(context.extensionUri, 'rbql_client.html');\n        let bytes = await vscode.workspace.fs.readFile(rbql_client_uri);\n        // Using TextDecoder because it should work fine in web extension.\n        client_html_template_web = new TextDecoder().decode(bytes);\n    }\n\n    for (let local_path in absolute_path_map) {\n        if (absolute_path_map.hasOwnProperty(local_path)) {\n            if (is_web_ext) {\n                absolute_path_map[local_path] = vscode.Uri.joinPath(context.extensionUri, local_path);\n            } else {\n                absolute_path_map[local_path] = context.asAbsolutePath(local_path);\n            }\n        }\n    }\n\n    if (get_from_config('enable_tooltip', false)) {\n        for (let language_id in dialect_map) {\n            if (dialect_map.hasOwnProperty(language_id)) {\n                register_csv_hover_info_provider(language_id, context);\n            }\n        }\n    }\n\n    var lint_cmd = vscode.commands.registerCommand('rainbow-csv.CSVLint', csv_lint_cmd);\n    var rbql_cmd = vscode.commands.registerCommand('rainbow-csv.RBQL', edit_rbql);\n    var set_header_line_cmd = vscode.commands.registerCommand('rainbow-csv.SetHeaderLine', set_header_line);\n    var set_comment_prefix_cmd = vscode.commands.registerCommand('rainbow-csv.SetCommentPrefix', set_comment_prefix);\n    var edit_column_names_cmd = vscode.commands.registerCommand('rainbow-csv.SetVirtualHeader', set_virtual_header);\n    var set_join_table_name_cmd = vscode.commands.registerCommand('rainbow-csv.SetJoinTableName', set_join_table_name); // WEB_DISABLED\n    var column_edit_before_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditBefore', async function() { await column_edit('ce_before'); });\n    var choose_dynamic_separator_cmd = vscode.commands.registerCommand('rainbow-csv.ChooseDynamicSeparator', async function() { await choose_dynamic_separator(); });\n    var column_edit_after_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditAfter', async function() { await column_edit('ce_after'); });\n    var column_edit_select_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditSelect', async function() { await column_edit('ce_select'); });\n    var set_separator_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparator', () => { manually_set_rainbow_separator(/*policy=*/null); });\n    var set_separator_multiline_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparatorMultiline', () => { manually_set_rainbow_separator(QUOTED_RFC_POLICY); });\n    var rainbow_off_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparatorOff', restore_original_language);\n    var sample_head_cmd = vscode.commands.registerCommand('rainbow-csv.SampleHead', async function(uri) { await make_preview(uri, 'head'); }); // WEB_DISABLED\n    var sample_tail_cmd = vscode.commands.registerCommand('rainbow-csv.SampleTail', async function(uri) { await make_preview(uri, 'tail'); }); // WEB_DISABLED\n    var align_cmd = vscode.commands.registerCommand('rainbow-csv.Align', align_table);\n    var shrink_cmd = vscode.commands.registerCommand('rainbow-csv.Shrink', shrink_table);\n    var copy_back_cmd = vscode.commands.registerCommand('rainbow-csv.CopyBack', copy_back); // WEB_DISABLED\n    var internal_test_cmd = vscode.commands.registerCommand('rainbow-csv.InternalTest', run_internal_test_cmd);\n\n    var doc_open_event = vscode.workspace.onDidOpenTextDocument(handle_doc_open);\n    var switch_event = vscode.window.onDidChangeActiveTextEditor(handle_editor_switch);\n\n    enable_dynamic_semantic_tokenization();\n\n    if (get_from_config('comment_prefix', null)) {\n        register_comment_tokenization_handler();\n    }\n\n    // The only purpose to add the entries to context.subscriptions is to guarantee their disposal during extension deactivation\n    context.subscriptions.push(lint_cmd);\n    context.subscriptions.push(rbql_cmd);\n    context.subscriptions.push(edit_column_names_cmd);\n    context.subscriptions.push(column_edit_before_cmd);\n    context.subscriptions.push(column_edit_after_cmd);\n    context.subscriptions.push(column_edit_select_cmd);\n    context.subscriptions.push(set_separator_cmd);\n    context.subscriptions.push(set_separator_multiline_cmd);\n    context.subscriptions.push(rainbow_off_cmd);\n    context.subscriptions.push(sample_head_cmd);\n    context.subscriptions.push(sample_tail_cmd);\n    context.subscriptions.push(set_join_table_name_cmd);\n    context.subscriptions.push(align_cmd);\n    context.subscriptions.push(shrink_cmd);\n    context.subscriptions.push(copy_back_cmd);\n    context.subscriptions.push(set_header_line_cmd);\n    context.subscriptions.push(set_comment_prefix_cmd);\n    context.subscriptions.push(internal_test_cmd);\n    context.subscriptions.push(choose_dynamic_separator_cmd);\n\n    context.subscriptions.push(doc_open_event);\n    context.subscriptions.push(switch_event);\n\n\n    // Need this because \"onDidOpenTextDocument()\" doesn't get called for the first open document.\n    // Another issue is when dev debug logging mode is enabled, the first document would be \"Log\" because it is printing something and gets VSCode focus.\n    await sleep(1000);\n    let active_doc = get_active_doc();\n    handle_doc_open(active_doc);\n}\n\n\nfunction deactivate() {\n    // This method is called when extension is deactivated.\n}\n\n\nexports.activate = activate;\nexports.deactivate = deactivate;\n\n// Exports just for unit tests:\nexports.autodetect_dialect_frequency_based = autodetect_dialect_frequency_based;\nexports.try_autoenable_rainbow_csv = try_autoenable_rainbow_csv;\n","// This file stores only functionality that is required for idle operation of Rainbow CSV i.e. autodetection only.\n// We want to avoid loading/parsing a lot of JS code in cases where we don't have any CSV files to work with.\n\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nclass AssertionError extends Error {}\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\nclass RecordTextConsumer {\n    // The only purpose of this class is to avoid code duplication when dealing with leftover lines in line_aggregator (the second `consume` call).\n    constructor(delim, policy, stop_on_warning, collect_records, preserve_quotes_and_whitespaces, detect_trailing_spaces, min_num_fields_for_autodetection) {\n        this.delim = delim;\n        this.policy = policy;\n        this.stop_on_warning = stop_on_warning;\n        this.first_defective_line = null;\n        this.records = collect_records ? [] : null;\n        this.collect_records = collect_records;\n        this.num_records_parsed = 0;\n        this.fields_info = new Map();\n        this.first_trailing_space_line = null;\n        this.detect_trailing_spaces = detect_trailing_spaces;\n        this.preserve_quotes_and_whitespaces = preserve_quotes_and_whitespaces;\n        this.min_num_fields_for_autodetection = min_num_fields_for_autodetection;\n    }\n\n    consume(record_text, record_start_line) {\n        let [record, warning] = csv_utils.smart_split(record_text, this.delim, this.policy, this.preserve_quotes_and_whitespaces);\n        if (warning) {\n            if (this.first_defective_line === null) {\n                this.first_defective_line = record_start_line;\n            }\n            if (this.stop_on_warning)\n                return /*can_continue=*/false;\n        }\n        if (this.detect_trailing_spaces && this.first_trailing_space_line === null) {\n            for (let field of record) {\n                if (field.length && (field.charAt(0) == ' ' || field.charAt(field.length - 1) == ' ')) {\n                    this.first_trailing_space_line = record_start_line;\n                }\n            }\n        }\n        if (!this.fields_info.has(record.length)) {\n            this.fields_info.set(record.length, this.num_records_parsed);\n            if (this.min_num_fields_for_autodetection != -1) {\n                // Autodetection mode: stop on inconsistent records length and when there is not enough columns (typically less than 2 i.e. 1).\n                if (record.length < this.min_num_fields_for_autodetection)\n                    return /*can_continue=*/false;\n                if (this.fields_info.size > 1)\n                    return /*can_continue=*/false;\n            }\n        }\n        if (this.collect_records) {\n            this.records.push(record);\n        }\n        this.num_records_parsed += 1;\n        return /*can_continue=*/true;\n    }\n}\n\n\nfunction parse_document_records(document, delim, policy, comment_prefix=null, stop_on_warning=false, max_records_to_parse=-1, collect_records=true, preserve_quotes_and_whitespaces=false, detect_trailing_spaces=false, min_num_fields_for_autodetection=-1) {\n    let num_lines = document.lineCount;\n    let record_start_line = 0;\n    let line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n    let consumer = new RecordTextConsumer(delim, policy, stop_on_warning, collect_records, preserve_quotes_and_whitespaces, detect_trailing_spaces, min_num_fields_for_autodetection);\n    let comments = []; // An ordered list of {record_no, comment_text} tuples which can be merged with the records later.\n\n    for (let lnum = 0; lnum < num_lines; ++lnum) {\n        let line_text = document.lineAt(lnum).text;\n        if (lnum + 1 >= num_lines && line_text == \"\") {\n            if (collect_records) {\n                // Treat the last empty line as a comment - this is to prevent align/shrink functions from removing it.\n                comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n            }\n            break; // Skip the last empty line.\n        }\n        let record_text = null;\n        if (policy == 'quoted_rfc') {\n            line_aggregator.add_line(line_text);\n            if (line_aggregator.has_comment_line) {\n                record_start_line = lnum + 1;\n                line_aggregator.reset();\n                if (collect_records) {\n                    comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n                }\n                continue;\n            } else if (line_aggregator.has_full_record) {\n                record_text = line_aggregator.get_full_line('\\n');\n                line_aggregator.reset();\n            } else {\n                continue;\n            }\n        } else {\n            if (comment_prefix && line_text.startsWith(comment_prefix)) {\n                record_start_line = lnum + 1;\n                if (collect_records) {\n                    comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n                }\n                continue;\n            } else {\n                record_text = line_text;\n            }\n        }\n        if (!consumer.consume(record_text, record_start_line)) {\n            return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n        }\n        record_start_line = lnum + 1;\n        if (max_records_to_parse !== -1 && consumer.num_records_parsed >= max_records_to_parse) {\n            return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n        }\n    }\n\n    if (line_aggregator.is_inside_multiline_record()) {\n        assert(policy == 'quoted_rfc');\n        consumer.consume(line_aggregator.get_full_line('\\n'), record_start_line);\n    }\n    return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n}\n\n\nmodule.exports.parse_document_records = parse_document_records;\nmodule.exports.assert = assert;\n","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _require = require('./internal/errors'),\n    _require$codes = _require.codes,\n    ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n    ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\n\nvar AssertionError = require('./internal/assert/assertion_error');\n\nvar _require2 = require('util/'),\n    inspect = _require2.inspect;\n\nvar _require$types = require('util/').types,\n    isPromise = _require$types.isPromise,\n    isRegExp = _require$types.isRegExp;\n\nvar objectAssign = Object.assign ? Object.assign : require('es6-object-assign').assign;\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\n\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n} // Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\n\n\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\n\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\n\nvar warned = false; // The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {}; // All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\n\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n\n    if (argsLen === 2) operator = '!=';\n  }\n\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n\n  var err = new AssertionError(errArgs);\n\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n\n  throw err;\n}\n\nassert.fail = fail; // The AssertionError is defined in internal/error.\n\nassert.AssertionError = AssertionError;\n\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n} // Pure assertion tests whether a value is truthy, as determined\n// by !!value.\n\n\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\n\nassert.ok = ok; // The equality assertion tests shallow, coercive equality with ==.\n\n/* eslint-disable no-restricted-properties */\n\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  } // eslint-disable-next-line eqeqeq\n\n\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n}; // The non-equality assertion tests for whether two objects are not\n// equal with !=.\n\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  } // eslint-disable-next-line eqeqeq\n\n\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n}; // The equivalence assertion tests a deep equality relation.\n\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n}; // The non-equivalence assertion tests for any deep inequality.\n\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\n\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\n\nvar Comparison = function Comparison(obj, keys, actual) {\n  var _this = this;\n\n  _classCallCheck(this, Comparison);\n\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && obj[key].test(actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n};\n\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\n\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return expected.test(actual); // assert.doesNotThrow does not accept objects.\n\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    } // Handle primitives properly.\n\n\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n\n    var keys = Object.keys(expected); // Special handle errors to make sure the name and the message are compared\n    // as well.\n\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && expected[key].test(actual[key])) {\n        return;\n      }\n\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  } // Guard instanceof against arrow functions as they don't have a prototype.\n\n\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n\n  return NO_EXCEPTION_SENTINEL;\n}\n\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\n\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn(); // Fail in case no promise is returned.\n\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\n\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\n\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n\n  throw actual;\n}\n\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\n\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\n\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\n\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\n\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    }); // Make sure we actually have a stack trace!\n\n    var origStack = err.stack;\n\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift(); // Filter all frames existing in err.stack.\n\n      var tmp1 = newErr.stack.split('\\n');\n\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n\n    throw newErr;\n  }\n}; // Expose a strict only variant of assert\n\n\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\n\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n'use strict';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _require = require('util/'),\n    inspect = _require.inspect;\n\nvar _require2 = require('../errors'),\n    ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n\n\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n\n  while (count) {\n    str += str;\n    count--;\n  }\n\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\n\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n}; // Comparing short primitives should just show === / !== instead of using the\n// diff.\n\nvar kMaxShortLength = 10;\n\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\n\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\n\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = ''; // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  } // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n\n\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length; // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        } // Ignore the first characters.\n\n\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  } // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n\n\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n\n  var maxLines = Math.max(actualLines.length, expectedLines.length); // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n'); // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n\n\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      } // Mark the current line as the last diverging one.\n\n\n      lastPos = i; // Add the expected line to the cache.\n\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++; // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      } // Mark the current line as the last diverging one.\n\n\n      lastPos = i; // Add the actual line to the result.\n\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++; // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i]; // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine); // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        } // Mark the current line as the last diverging one.\n\n\n        lastPos = i; // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2; // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = ''; // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    } // Inspected object to big (Show ~20 rows max)\n\n\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\n\nvar AssertionError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(AssertionError, _Error);\n\n  function AssertionError(options) {\n    var _this;\n\n    _classCallCheck(this, AssertionError);\n\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n\n    var message = options.message,\n        operator = options.operator,\n        stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n        expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n\n    if (message != null) {\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, String(message)));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      } // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n\n\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, createErrDiff(actual, expected, operator)));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n'); // In case \"actual\" is an object, it should not be reference equal.\n\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        } // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n\n\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n\n          while (res.length > 27) {\n            res.pop();\n          }\n        } // Only print a single input.\n\n\n        if (res.length === 1) {\n          _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(base, \" \").concat(res[0])));\n        } else {\n          _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\")));\n        }\n      } else {\n        var _res = inspectValue(actual);\n\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(_res).concat(other)));\n      }\n    }\n\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    } // Create error message including the error code in the name.\n\n\n    _this.stack; // Reset the name.\n\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: inspect.custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread({}, ctx, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n\n  return AssertionError;\n}(_wrapNativeSuper(Error));\n\nmodule.exports = AssertionError;","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n\n/* eslint node-core/alphabetize-errors: \"error\" */\n\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n'use strict'; // The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar codes = {}; // Lazy loaded\n\nvar assert;\nvar util;\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inherits(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n\n      _classCallCheck(this, NodeError);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(NodeError).call(this, getMessage(arg1, arg2, arg3)));\n      _this.code = code;\n      return _this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\"); // determiner: 'must be' or 'must not be'\n\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } // TODO(BridgeAR): Improve the output by showing `null` and similar.\n\n\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar regexFlagsSupported = /a/g.flags !== undefined;\n\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\n\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\n\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\n\nvar _require$types = require('util/').types,\n    isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n    isArrayBufferView = _require$types.isArrayBufferView,\n    isDate = _require$types.isDate,\n    isMap = _require$types.isMap,\n    isRegExp = _require$types.isRegExp,\n    isSet = _require$types.isSet,\n    isNativeError = _require$types.isNativeError,\n    isBoxedPrimitive = _require$types.isBoxedPrimitive,\n    isNumberObject = _require$types.isNumberObject,\n    isStringObject = _require$types.isStringObject,\n    isBooleanObject = _require$types.isBooleanObject,\n    isBigIntObject = _require$types.isBigIntObject,\n    isSymbolObject = _require$types.isSymbolObject,\n    isFloat32Array = _require$types.isFloat32Array,\n    isFloat64Array = _require$types.isFloat64Array;\n\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  } // The maximum size for an array is 2 ** 32 -1.\n\n\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\n\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n} // Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (y < x) {\n    return 1;\n  }\n\n  return 0;\n}\n\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3; // Check if they have the same source and flags\n\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\n\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\n\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\n\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n} // Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  } // Check more closely if val1 and val2 are equal.\n\n\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n\n      return false;\n    }\n\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  } // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n\n\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    } // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n\n\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\n\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\n\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2); // The pair must have the same number of owned properties.\n\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  } // Cheap key test\n\n\n  var i = 0;\n\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  } // Use memos to handle cycles.\n\n\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n\n    memos.position++;\n  }\n\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\n\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n\n  return false;\n} // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\n\n\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n\n    case 'symbol':\n      return false;\n\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n\n  }\n\n  return true;\n}\n\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\n\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n\n  if (altValue != null) {\n    return altValue;\n  }\n\n  var curB = b.get(altValue);\n\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\n\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i]; // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      } // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n\n\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false; // Fast path to detect missing string, symbol, undefined and null values.\n\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n\n      if (set === null) {\n        set = new Set();\n      }\n\n      set.add(val);\n    }\n  }\n\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i]; // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n\n    return set.size === 0;\n  }\n\n  return true;\n}\n\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n        key = _aEntries$i[0],\n        item1 = _aEntries$i[1];\n\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false; // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n\n        if (set === null) {\n          set = new Set();\n        }\n\n        set.add(key);\n      }\n    }\n  }\n\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n          key = _bEntries$_i[0],\n          item = _bEntries$_i[1];\n\n      if (_typeof(key) === 'object' && key !== null) {\n        if (!mapHasEqualEntry(set, a, key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(key) || !innerDeepEqual(a.get(key), item, false, memo)) && !mapHasEqualEntry(set, a, key, item, false, memo)) {\n        return false;\n      }\n    }\n\n    return set.size === 0;\n  }\n\n  return true;\n}\n\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n\n        return true;\n      }\n    }\n  } // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n\n\n  for (i = 0; i < keys.length; i++) {\n    var _key = keys[i];\n\n    if (!innerDeepEqual(a[_key], b[_key], strict, memos)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\n\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\n\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar hasPropertyDescriptors = require('has-property-descriptors')();\n\nvar supportsDescriptors = origDefineProperty && hasPropertyDescriptors;\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value; // eslint-disable-line no-param-reassign\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","/**\n * Code refactored from Mozilla Developer Network:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\n\n'use strict';\n\nfunction assign(target, firstSource) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nfunction polyfill() {\n  if (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign\n    });\n  }\n}\n\nmodule.exports = {\n  assign: assign,\n  polyfill: polyfill\n};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\tif ($defineProperty) {\n\t\ttry {\n\t\t\t$defineProperty({}, 'a', { value: 1 });\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// IE 8 has a broken defineProperty\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn false;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!hasPropertyDescriptors()) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar gOPD = require('gopd');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar anyTrue = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!anyTrue) {\n\t\t\ttry {\n\t\t\t\tanyTrue = getter.call(value) === typedArray;\n\t\t\t} catch (e) { /**/ }\n\t\t}\n\t});\n\treturn anyTrue;\n};\n\nmodule.exports = function isTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\treturn $indexOf(typedArrays, tag) > -1;\n\t}\n\tif (!gOPD) { return false; }\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tif (typeof g[typedArray] === 'function') {\n\t\t\tvar arr = new g[typedArray]();\n\t\t\tif (Symbol.toStringTag in arr) {\n\t\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\t\tif (!descriptor) {\n\t\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t\t}\n\t\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar foundName = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!foundName) {\n\t\t\ttry {\n\t\t\t\tvar name = getter.call(value);\n\t\t\t\tif (name === typedArray) {\n\t\t\t\t\tfoundName = name;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\treturn foundName;\n};\n\nvar isTypedArray = require('is-typed-array');\n\nmodule.exports = function whichTypedArray(value) {\n\tif (!isTypedArray(value)) { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) { return $slice($toString(value), 8, -1); }\n\treturn tryTypedArrays(value);\n};\n","const os = require('os');\nconst fs = require('fs');\nconst path = require('path');\n\nconst rbql = require('./rbql_core/rbql-js/rbql.js');\nconst rbql_csv = require('./rbql_core/rbql-js/rbql_csv.js');\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nconst fast_load_utils = require('./fast_load_utils.js');\n\nconst non_numeric_sentinel = -1;\nconst number_regex = /^([0-9]+)(\\.[0-9]+)?$/;\n\n// Copypasted from extension.js\nconst QUOTED_RFC_POLICY = 'quoted_rfc';\nconst QUOTED_POLICY = 'quoted';\nconst dynamic_csv_highlight_margin = 50; // TODO make configurable.\nconst max_preview_field_length = 250;\nconst alignment_extra_readability_whitespace_length = 1;\n\n\nclass AssertionError extends Error {}\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction get_default_js_udf_content() {\n    let default_content = `// This file can be used to store RBQL UDFs. Example:\n    //\n    // function foo(value) {\n    //     return 'foo ' + String(value.length);\n    // }\n    // \n    // Functions defined in this file can be used in RBQL queries e.g.\n    // SELECT foo(a1), a2 WHERE foo(a3) != 'foo 5' LIMIT 10\n    //\n    // Don't forget to save this file after editing!\n    //\n    // Write your own functions below this line:\n    `.replace(new RegExp(/^  */, 'mg'), '');\n    return default_content;\n}\n\n\nfunction get_default_python_udf_content() {\n    let default_content = `# This file can be used to store RBQL UDFs. Example:\n    #\n    # def foo(value):\n    #     return 'foo ' + str(len(value))\n    # \n    # \n    # Functions defined in this file can be used in RBQL queries e.g.\n    # SELECT foo(a1), a2 WHERE foo(a3) != 'foo 5' LIMIT 10\n    #\n    # Don't forget to save this file after editing!\n    #\n    # Write your own functions below this line:\n    `.replace(new RegExp(/^  */, 'mg'), '');\n    return default_content;\n}\n\n\nfunction update_subcomponent_stats(field, is_first_record, max_field_components_lens) {\n    // Extract overall field length and length of integer and fractional parts of the field if it represents a number.\n    max_field_components_lens.max_total_length = Math.max(max_field_components_lens.max_total_length, field.length);\n    if (max_field_components_lens.max_int_length == non_numeric_sentinel) {\n        // Column is not a number, early return.\n        return;\n    }\n    let match_result = number_regex.exec(field);\n    if (match_result === null) {\n        if (!is_first_record && field.length) { // Checking field_length here allows numeric columns to have some of the fields empty.\n            // We only mark the column as non-header if we know that this is not a header line.\n            max_field_components_lens.max_int_length = non_numeric_sentinel;\n            max_field_components_lens.max_fractional_length = non_numeric_sentinel;\n        }\n        return;\n    }\n    let cur_integer_part_length = match_result[1].length;\n    max_field_components_lens.max_int_length = Math.max(max_field_components_lens.max_int_length, cur_integer_part_length);\n    let cur_fractional_part_length = match_result[2] === undefined ? 0 : match_result[2].length;\n    max_field_components_lens.max_fractional_length = Math.max(max_field_components_lens.max_fractional_length, cur_fractional_part_length);\n}\n\n\nfunction get_cursor_position_if_unambiguous(active_editor) {\n    let selections = active_editor.selections;\n    if (!selections || selections.length != 1) {\n        // Support only single-cursor, multicursor is ambiguous.\n        return null;\n    }\n    let selection = selections[0];\n    let position = selection.active;\n    if (!position.isEqual(selection.anchor)) {\n        // Selections are ambiguous.\n        return null;\n    }\n    return position;\n}\n\n\nfunction calc_column_stats(active_doc, delim, policy, comment_prefix) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, first_defective_line + 1, null, null];\n    }\n    let column_stats = [];\n    let is_first_record = true;\n    for (let record of records) {\n        for (let fnum = 0; fnum < record.length; fnum++) {\n            if (column_stats.length <= fnum) {\n                column_stats.push({max_total_length: 0, max_int_length: 0, max_fractional_length: 0});\n            }\n            let field = record[fnum];\n            let field_lines = field.split('\\n');\n            if (field_lines.length > 1) {\n                // We don't allow multiline fields to be numeric for simplicity.\n                column_stats[fnum].max_int_length = non_numeric_sentinel;\n                column_stats[fnum].max_fractional_length = non_numeric_sentinel;\n            }\n            for (let field_line of field_lines) {\n                update_subcomponent_stats(field_line.trim(), is_first_record, column_stats[fnum]);\n            }\n        }\n        is_first_record = false;\n    }\n    return [column_stats, null, records, comments];\n}\n\n\nfunction adjust_column_stats(column_stats, delim_length) {\n    // Ensure that numeric components max widths are consistent with non-numeric (header) width.\n    let adjusted_stats = [];\n    for (let column_stat of column_stats) {\n        if (column_stat.max_int_length <= 0) {\n            column_stat.max_int_length = -1;\n            column_stat.max_fractional_length = -1;\n        }\n        if (column_stat.max_int_length > 0) {\n            // The sum of integer and float parts can be bigger than the max width, e.g. here:\n            // value\n            // 0.12\n            // 1234\n            if (column_stat.max_int_length + column_stat.max_fractional_length > column_stat.max_total_length) {\n                column_stat.max_total_length = column_stat.max_int_length + column_stat.max_fractional_length;\n            }\n            // This is needed when the header is wider than numeric components and/or their sum.\n            if (column_stat.max_total_length - column_stat.max_fractional_length > column_stat.max_int_length) {\n                column_stat.max_int_length = column_stat.max_total_length - column_stat.max_fractional_length;\n            }\n            // Sanity check.\n            if (column_stat.max_total_length != column_stat.max_int_length + column_stat.max_fractional_length) {\n                // Assertion Error, this can never happen.\n                return null;\n            }\n        }\n        let previous_stat = adjusted_stats.length ? adjusted_stats[adjusted_stats.length - 1] : null;\n        column_stat.start_offset = previous_stat === null ? 0 : previous_stat.start_offset + previous_stat.max_total_length + alignment_extra_readability_whitespace_length + delim_length;\n        adjusted_stats.push(column_stat);\n    }\n    return adjusted_stats;\n}\n\n\nfunction align_field(field, is_first_record, max_field_components_lens) {\n    // Align field, use Math.max() to avoid negative delta_length which can happen theorethically due to async doc edit.\n    field = field.trim();\n    if (max_field_components_lens.max_int_length == non_numeric_sentinel) {\n        let delta_length = Math.max(max_field_components_lens.max_total_length - field.length, 0);\n        return field + ' '.repeat(delta_length + alignment_extra_readability_whitespace_length);\n    }\n    if (is_first_record) {\n        if (number_regex.exec(field) === null) {\n            // The line must be a header - align it using max_width rule.\n            let delta_length = Math.max(max_field_components_lens.max_total_length - field.length, 0);\n            return field + ' '.repeat(delta_length + alignment_extra_readability_whitespace_length);\n        }\n    }\n    let dot_pos = field.indexOf('.');\n    let cur_integer_part_length = dot_pos == -1 ? field.length : dot_pos;\n    // Here cur_fractional_part_length includes the leading dot too.\n    let cur_fractional_part_length = dot_pos == -1 ? 0 : field.length - dot_pos;\n    let integer_delta_length = Math.max(max_field_components_lens.max_int_length - cur_integer_part_length, 0);\n    let fractional_delta_length = Math.max(max_field_components_lens.max_fractional_length - cur_fractional_part_length);\n    let trailing_spaces = ' '.repeat(fractional_delta_length + alignment_extra_readability_whitespace_length);\n    return ' '.repeat(integer_delta_length) + field + trailing_spaces;\n}\n\n\nfunction rfc_align_field(field, is_first_record, max_field_components_lens, is_field_segment) {\n    let aligned = align_field(field, is_first_record, max_field_components_lens);\n    if (is_field_segment) {\n        aligned = ' '.repeat(max_field_components_lens.start_offset) + aligned;\n    }\n    return aligned;\n}\n\n\nfunction strip_trailing_spaces(src) {\n    return src.replace(new RegExp(/  *$/, 'mg'), '');\n}\n\nclass RecordCommentMerger {\n    constructor(records, comments) {\n        this.records = records;\n        this.comments = comments;\n        this.nr = 0;\n        this.next_comment = 0;\n    }\n\n    get_next() {\n        // Returns tuple (record, comment).\n        if (this.has_comments_left() && (!this.has_records_left() || this.comments[this.next_comment].record_num <= this.nr)) {\n            let result = [null, this.comments[this.next_comment].comment_text];\n            this.next_comment += 1;\n            return result;\n        }\n        if (this.has_records_left()) {\n            let result = [this.records[this.nr], null];\n            this.nr += 1;\n            return result;\n        }\n        return [null, null];\n    }\n\n    has_comments_left() {\n        return this.next_comment < this.comments.length;\n    }\n\n    has_records_left() {\n        return this.nr < this.records.length;\n    }\n\n    has_entries_left() {\n        return this.has_comments_left() || this.has_records_left();\n    }\n}\n\n\nfunction align_columns(records, comments, column_stats, delim) {\n    // Unlike shrink_columns, here we don't compute `has_edit` flag because it is\n    // 1: Algorithmically complicated (especially for multiline fields) and we also can't just compare fields lengths like in shrink.\n    // 2: The alignment procedure is opinionated and \"Already aligned\" report has little value.\n    // Because of this in case of executing \"Align\" command consecutively N times one would have to run undo N times too.\n    let result_lines = [];\n    let is_first_record = true;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record === null) {\n            result_lines.push(comment);\n            continue;\n        }\n        let aligned_fields = [];\n        for (let fnum = 0; fnum < record.length; fnum++) {\n            if (fnum >= column_stats.length) // Safeguard against async doc edit, should never happen.\n                break;\n            let is_field_segment = false;\n            let field = record[fnum];\n            let field_lines = field.split('\\n');\n            for (let i = 0; i < field_lines.length; i++) {\n                if (i > 0) {\n                    result_lines.push(strip_trailing_spaces(aligned_fields.join(delim)));\n                    aligned_fields = [];\n                    is_field_segment = true;\n                }\n                let aligned_field = rfc_align_field(field_lines[i], is_first_record, column_stats[fnum], is_field_segment);\n                is_field_segment = false;\n                aligned_fields.push(aligned_field);\n            }\n        }\n        is_first_record = false;\n        result_lines.push(strip_trailing_spaces(aligned_fields.join(delim)));\n    }\n    return result_lines.join('\\n');\n}\n\n\nfunction shrink_columns(active_doc, delim, policy, comment_prefix) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, first_defective_line + 1];\n    }\n    let result_lines = [];\n    let has_edit = false;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record === null) {\n            result_lines.push(comment);\n            continue;\n        }\n        let aligned_fields = [];\n        for (let fnum = 0; fnum < record.length; fnum++) {\n            let field = record[fnum];\n            let field_lines = field.split('\\n');\n            for (let i = 0; i < field_lines.length; i++) {\n                if (i > 0) {\n                    result_lines.push(aligned_fields.join(delim));\n                    aligned_fields = [];\n                }\n                let aligned_field = field_lines[i].trim();\n                if (aligned_field.length != field_lines[i].length) {\n                    // Unlike in align function here we can just compare resulting length to decide if change has occured.\n                    has_edit = true;\n                }\n                aligned_fields.push(aligned_field);\n            }\n        }\n        result_lines.push(aligned_fields.join(delim));\n    }\n    if (!has_edit)\n        return [null, null];\n    return [result_lines.join('\\n'), null];\n}\n\n\nfunction make_table_name_key(file_path) {\n    return 'rbql_table_name:' + file_path;\n}\n\n\nfunction expanduser(filepath) {\n    if (filepath.charAt(0) === '~') {\n        return path.join(os.homedir(), filepath.slice(1));\n    }\n    return filepath;\n}\n\n\nfunction find_table_path(vscode_global_state, main_table_dir, table_id) {\n    // If table_id is a relative path it could be relative either to the current directory or to the main table dir.\n    var candidate_path = expanduser(table_id);\n    if (fs.existsSync(candidate_path)) {\n        return candidate_path;\n    }\n    if (main_table_dir && !path.isAbsolute(candidate_path)) {\n        candidate_path = path.join(main_table_dir, candidate_path);\n        if (fs.existsSync(candidate_path)) {\n            return candidate_path;\n        }\n    }\n    let table_path = vscode_global_state ? vscode_global_state.get(make_table_name_key(table_id)) : null;\n    if (table_path && fs.existsSync(table_path)) {\n        return table_path;\n    }\n    return null;\n}\n\n\nasync function read_header(table_path, encoding) {\n    if (encoding == 'latin-1')\n        encoding = 'binary';\n    let readline = require('readline');\n    let input_reader = readline.createInterface({ input: fs.createReadStream(table_path, {encoding: encoding}) });\n    let closed = false;\n    let promise_resolve = null;\n    let promise_reject = null;\n    let output_promise = new Promise(function(resolve, reject) {\n        promise_resolve = resolve;\n        promise_reject = reject;\n    });\n    input_reader.on('line', line => {\n        if (!closed) {\n            closed = true;\n            input_reader.close();\n            promise_resolve(line);\n        }\n    });\n    input_reader.on('error', error => {\n        promise_reject(error);\n    });\n    return output_promise;\n}\n\n\nfunction get_header_line(document, comment_prefix) {\n    const num_lines = document.lineCount;\n    for (let lnum = 0; lnum < num_lines; ++lnum) {\n        const line_text = document.lineAt(lnum).text;\n        if (!comment_prefix || !line_text.startsWith(comment_prefix)) {\n            return line_text;\n        }\n    }\n    return null;\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1 + 1} -> ${num_fields_1} fields, record ${record_num_2 + 1} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nclass RbqlIOHandlingError extends Error {}\n\nclass VSCodeRecordIterator extends rbql.RBQLInputIterator {\n    constructor(document, delim, policy, has_header=false, comment_prefix=null, table_name='input', variable_prefix='a') {\n        // We could have done a hack here actually: convert the document to stream/buffer and then use the standard reader.\n        super();\n        this.has_header = has_header;\n        this.table_name = table_name;\n        this.variable_prefix = variable_prefix;\n        this.NR = 0; // Record number.\n        this.NL = 0; // Line number (NL != NR when the CSV file has comments or multiline fields).\n        let fail_on_warning = policy == 'quoted_rfc';\n        let [_num_records_parsed, _comments] = [null, null];\n        [this.records, _num_records_parsed, this.fields_info, this.first_defective_line, this._first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, fail_on_warning);\n        if (fail_on_warning && this.first_defective_line !== null) {\n            throw new RbqlIOHandlingError(`Inconsistent double quote escaping in ${this.table_name} table at record ${this.records.length}, line ${this.first_defective_line}`);\n        }\n        this.first_record = this.records.length ? this.records[0] : [];\n        this.next_record_index = 0;\n    }\n\n    stop() {\n    }\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        rbql.parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        rbql.parse_array_variables(query_text, this.variable_prefix, variable_map);\n        if (this.has_header) {\n            rbql.parse_attribute_variables(query_text, this.variable_prefix, this.first_record, 'CSV header line', variable_map);\n            rbql.parse_dictionary_variables(query_text, this.variable_prefix, this.first_record, variable_map);\n        }\n        return variable_map;\n    }\n\n    async get_header() {\n        return this.has_header ? this.first_record : null;\n    }\n\n    do_get_record() {\n        if (this.next_record_index >= this.records.length) {\n            return null;\n        }\n        let record = this.records[this.next_record_index];\n        this.next_record_index += 1;\n        return record;\n    }\n\n    async get_record() {\n        if (this.NR == 0 && this.has_header) {\n            this.do_get_record(); // Skip the header record.\n        }\n        this.NR += 1;\n        let record = this.do_get_record();\n        return record;\n    }\n\n    get_warnings() {\n        let result = [];\n        if (this.first_defective_line !== null)\n            result.push(`Inconsistent double quote escaping in ${this.table_name} table. E.g. at line ${this.first_defective_line}`);\n        if (this.fields_info.size > 1)\n            result.push(make_inconsistent_num_fields_warning(this.table_name, this.fields_info));\n        return result;\n    }\n}\n\n\nclass VSCodeWriter extends rbql.RBQLOutputWriter {\n    constructor(delim, policy) {\n        super();\n        this.delim = delim;\n        this.policy = policy;\n        this.header_len = null;\n        this.null_in_output = false;\n        this.delim_in_simple_output = false;\n        this.output_lines = [];\n\n        if (policy == 'simple') {\n            this.polymorphic_join = this.simple_join;\n        } else if (policy == 'quoted') {\n            this.polymorphic_join = this.quoted_join;\n        } else if (policy == 'quoted_rfc') {\n            this.polymorphic_join = this.quoted_join_rfc;\n        } else if (policy == 'monocolumn') {\n            this.polymorphic_join = this.mono_join;\n        } else if (policy == 'whitespace') {\n            this.polymorphic_join = this.simple_join;\n        } else {\n            throw new RbqlIOHandlingError('Unknown output csv policy');\n        }\n    }\n\n    set_header(header) {\n        if (header !== null) {\n            this.header_len = header.length;\n            this.write(header);\n        }\n    }\n\n    quoted_join(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    quoted_join_rfc(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.rfc_quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    mono_join(fields) {\n        if (fields.length > 1) {\n            throw new RbqlIOHandlingError('Unable to use \"Monocolumn\" output format: some records have more than one field');\n        }\n        return fields[0];\n    };\n\n\n    simple_join(fields) {\n        var res = fields.join(this.delim);\n        if (fields.join('').indexOf(this.delim) != -1) {\n            this.delim_in_simple_output = true;\n        }\n        return res;\n    };\n\n\n    normalize_fields(out_fields) {\n        for (var i = 0; i < out_fields.length; i++) {\n            if (out_fields[i] == null) {\n                this.null_in_output = true;\n                out_fields[i] = '';\n            } else if (Array.isArray(out_fields[i])) {\n                this.normalize_fields(out_fields[i]);\n                out_fields[i] = out_fields[i].join(this.sub_array_delim);\n            }\n        }\n    };\n\n\n    write(fields) {\n        if (this.header_len !== null && fields.length != this.header_len)\n            throw new RbqlIOHandlingError(`Inconsistent number of columns in output header and the current record: ${this.header_len} != ${fields.length}`);\n        this.normalize_fields(fields);\n        this.output_lines.push(this.polymorphic_join(fields));\n        return true;\n    };\n\n    async finish() {\n    }\n\n    get_warnings() {\n        let result = [];\n        if (this.null_in_output)\n            result.push('null values in output were replaced by empty strings');\n        if (this.delim_in_simple_output)\n            result.push('Some output fields contain separator');\n        return result;\n    };\n}\n\nclass VSCodeTableRegistry {\n    constructor(){}\n\n    get_iterator_by_table_id(_table_id) {\n        throw new RbqlIOHandlingError(\"JOIN queries are currently not supported in vscode.dev web version.\");\n    }\n\n    get_warnings() {\n        return [];\n    };\n}\n\nasync function rbql_query_web(query_text, input_document, input_delim, input_policy, output_delim, output_policy, output_warnings, with_headers, comment_prefix=null) {\n    let user_init_code = ''; // TODO find a way to have init code.\n    let join_tables_registry = new VSCodeTableRegistry(); // TODO find a way to have join registry.\n    let input_iterator = new VSCodeRecordIterator(input_document, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new VSCodeWriter(output_delim, output_policy);\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    return output_writer.output_lines;\n}\n\n\nclass VSCodeFileSystemCSVRegistry extends rbql.RBQLTableRegistry {\n    constructor(vscode_global_state, input_file_dir, delim, policy, encoding, has_header=false, comment_prefix=null, options=null) {\n        super();\n        this.vscode_global_state = vscode_global_state;\n        this.input_file_dir = input_file_dir;\n        this.delim = delim;\n        this.policy = policy;\n        this.encoding = encoding;\n        this.has_header = has_header;\n        this.comment_prefix = comment_prefix;\n        this.stream = null;\n        this.record_iterator = null;\n\n        this.options = options;\n        this.bulk_input_path = null;\n        this.table_path = null;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        this.table_path = find_table_path(this.vscode_global_state, this.input_file_dir, table_id);\n        if (this.table_path === null) {\n            throw new RbqlIOHandlingError(`Unable to find join table \"${table_id}\"`);\n        }\n        if (this.options && this.options['bulk_read']) {\n            this.bulk_input_path = this.table_path;\n        } else {\n            this.stream = fs.createReadStream(this.table_path);\n        }\n        this.record_iterator = new rbql_csv.CSVRecordIterator(this.stream, this.bulk_input_path, this.encoding, this.delim, this.policy, this.has_header, this.comment_prefix, table_id, 'b');\n        return this.record_iterator;\n    };\n\n    get_warnings(output_warnings) {\n        if (this.record_iterator && this.has_header) {\n            output_warnings.push(`The first record in JOIN file ${path.basename(this.table_path)} was also treated as header (and skipped)`);\n        }\n    }\n}\n\n\nasync function rbql_query_node(vscode_global_state, query_text, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, output_warnings, with_headers=false, comment_prefix=null, user_init_code='', options=null) {\n    let input_stream = null;\n    let bulk_input_path = null;\n    if (options && options['bulk_read'] && input_path) {\n        bulk_input_path = input_path;\n    } else {\n        input_stream = input_path === null ? process.stdin : fs.createReadStream(input_path);\n    }\n    let [output_stream, close_output_on_finish] = output_path === null ? [process.stdout, false] : [fs.createWriteStream(output_path), true];\n    if (input_delim == '\"' && input_policy == 'quoted')\n        throw new RbqlIOHandlingError('Double quote delimiter is incompatible with \"quoted\" policy');\n    if (csv_encoding == 'latin-1')\n        csv_encoding = 'binary';\n    if (!rbql_csv.is_ascii(query_text) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n    if ((!rbql_csv.is_ascii(input_delim) || !rbql_csv.is_ascii(output_delim)) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n\n    let default_init_source_path = path.join(os.homedir(), '.rbql_init_source.js');\n    if (user_init_code == '' && fs.existsSync(default_init_source_path)) {\n        user_init_code = rbql_csv.read_user_init_code(default_init_source_path);\n    }\n    let input_file_dir = input_path ? path.dirname(input_path) : null;\n    let join_tables_registry = new VSCodeFileSystemCSVRegistry(vscode_global_state, input_file_dir, input_delim, input_policy, csv_encoding, with_headers, comment_prefix, options);\n    let input_iterator = new rbql_csv.CSVRecordIterator(input_stream, bulk_input_path, csv_encoding, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new rbql_csv.CSVWriter(output_stream, close_output_on_finish, csv_encoding, output_delim, output_policy);\n\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    join_tables_registry.get_warnings(output_warnings);\n}\n\n\nfunction make_multiline_record_ranges(vscode, delim_length, newline_marker, fields, start_line, expected_end_line_for_control) {\n    // Semantic ranges in VSCode can't span multiple lines, so we use this workaround.\n    let record_ranges = [];\n    let lnum_current = start_line;\n    let pos_in_editor_line = 0;\n    let next_pos_in_editor_line = 0;\n    for (let i = 0; i < fields.length; i++) {\n        let pos_in_logical_field = 0;\n        // Group tokens belonging to the same logical field.\n        let logical_field_tokens = [];\n        while (true) {\n            let newline_marker_pos = fields[i].indexOf(newline_marker, pos_in_logical_field);\n            if (newline_marker_pos == -1)\n                break;\n            logical_field_tokens.push(new vscode.Range(lnum_current, pos_in_editor_line, lnum_current, pos_in_editor_line + newline_marker_pos - pos_in_logical_field));\n            lnum_current += 1;\n            pos_in_editor_line = 0;\n            next_pos_in_editor_line = 0;\n            pos_in_logical_field = newline_marker_pos + newline_marker.length;\n        }\n        next_pos_in_editor_line += fields[i].length - pos_in_logical_field;\n        if (i + 1 < fields.length) {\n            next_pos_in_editor_line += delim_length;\n        }\n        logical_field_tokens.push(new vscode.Range(lnum_current, pos_in_editor_line, lnum_current, next_pos_in_editor_line));\n        record_ranges.push(logical_field_tokens);\n        // From semantic tokenization perspective the end of token doesn't include the last character of vscode.Range i.e. it treats the range as [) interval, unlike the Range.contains() function which treats ranges as [] intervals.\n        pos_in_editor_line = next_pos_in_editor_line;\n    }\n    assert(lnum_current == expected_end_line_for_control);\n    return record_ranges;\n}\n\n\nfunction is_opening_rfc_line(line_text, delim) {\n    // The line is oppening if by adding a character (to avoid accidental double double quote) and single double quote at the end we can make it parsable without warning!\n    // Some lines can be simultaneously opening and closing, e.g. `\",a1,a2` or `a1,a2,\"`\n    let [_record, warning] = csv_utils.split_quoted_str(line_text + 'x\"', delim);\n    return !warning;\n}\n\n\nfunction parse_document_range_rfc(vscode, doc, delim, comment_prefix, range, custom_parsing_margin=null) {\n    if (custom_parsing_margin === null) {\n        custom_parsing_margin = dynamic_csv_highlight_margin;\n    }\n    let begin_line = Math.max(0, range.start.line - custom_parsing_margin);\n    let end_line = Math.min(doc.lineCount, range.end.line + custom_parsing_margin);\n    let table_ranges = [];\n    let line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n    // The first or the second line in range with an odd number of double quotes is a start line, after finding it we can use the standard parsing algorithm.\n    for (let lnum = begin_line; lnum < end_line; lnum++) {\n        let line_text = doc.lineAt(lnum).text;\n        if (lnum + 1 == doc.lineCount && !line_text)\n            break;\n        let inside_multiline_record_before = line_aggregator.is_inside_multiline_record();\n        let start_line = lnum - line_aggregator.get_num_lines_in_record();\n        line_aggregator.add_line(line_text);\n        let inside_multiline_record_after = line_aggregator.is_inside_multiline_record();\n        if (!inside_multiline_record_before && inside_multiline_record_after) {\n            // Must be an odd-num line, check if this is an openning line - otherwise reset ranges.\n            if (!is_opening_rfc_line(line_text, delim)) {\n                table_ranges = [];\n                line_aggregator.reset();\n            }\n        }\n        if (line_aggregator.has_comment_line) {\n            table_ranges.push({comment_range: new vscode.Range(lnum, 0, lnum, line_text.length)});\n            line_aggregator.reset();\n        } else if (line_aggregator.has_full_record) {\n            const newline_marker = '\\r\\n'; // Use '\\r\\n' here to guarantee that this sequence is not present anywhere in the lines themselves.\n            let combined_line = line_aggregator.get_full_line(newline_marker);\n            line_aggregator.reset();\n            let [fields, warning] = csv_utils.smart_split(combined_line, delim, QUOTED_POLICY, /*preserve_quotes_and_whitespaces=*/true);\n            if (!warning) {\n                table_ranges.push({record_ranges: make_multiline_record_ranges(vscode, delim.length, newline_marker, fields, start_line, lnum)});\n            }\n        }\n    }\n    return table_ranges;\n}\n\n\nfunction parse_document_range_single_line(vscode, doc, delim, policy, comment_prefix, range) {\n    let table_ranges = [];\n    let begin_line = Math.max(0, range.start.line - dynamic_csv_highlight_margin);\n    let end_line = Math.min(doc.lineCount, range.end.line + dynamic_csv_highlight_margin);\n    for (let lnum = begin_line; lnum < end_line; lnum++) {\n        let record_ranges = [];\n        let line_text = doc.lineAt(lnum).text;\n        if (lnum + 1 == doc.lineCount && !line_text)\n            break;\n        if (comment_prefix && line_text.startsWith(comment_prefix)) {\n            table_ranges.push({comment_range: new vscode.Range(lnum, 0, lnum, line_text.length)});\n            continue;\n        }\n        let split_result = csv_utils.smart_split(line_text, delim, policy, /*preserve_quotes_and_whitespaces=*/true);\n        // TODO consider handling comments and warnings\n        let fields = split_result[0];\n        let cpos = 0;\n        let next_cpos = 0;\n        for (let i = 0; i < fields.length; i++) {\n            next_cpos += fields[i].length;\n            if (i + 1 < fields.length) {\n                next_cpos += delim.length;\n            }\n            record_ranges.push([new vscode.Range(lnum, cpos, lnum, next_cpos)]);\n            // From semantic tokenization perspective the end of token doesn't include the last character of vscode.Range i.e. it treats the range as [) interval, unlike the Range.contains() function which treats ranges as [] intervals.\n            cpos = next_cpos;\n        }\n        table_ranges.push({record_ranges: record_ranges});\n    }\n    return table_ranges;\n}\n\n\nfunction parse_document_range(vscode, doc, delim, policy, comment_prefix, range) {\n    if (policy == QUOTED_RFC_POLICY) {\n        return parse_document_range_rfc(vscode, doc, delim, comment_prefix, range);\n    } else {\n        return parse_document_range_single_line(vscode, doc, delim, policy, comment_prefix, range);\n    }\n}\n\n\nfunction get_field_by_line_position(fields, delim_length, query_pos) {\n    if (!fields.length)\n        return null;\n    var col_num = 0;\n    var cpos = fields[col_num].length + delim_length;\n    while (query_pos > cpos && col_num + 1 < fields.length) {\n        col_num += 1;\n        cpos = cpos + fields[col_num].length + delim_length;\n    }\n    return col_num;\n}\n\n\nfunction get_cursor_position_info_rfc(vscode, document, delim, comment_prefix, position) {\n    const hover_parse_margin = 20;\n    let range = new vscode.Range(Math.max(position.line - hover_parse_margin, 0), 0, position.line + hover_parse_margin, 0);\n    let table_ranges = parse_document_range_rfc(vscode, document, delim, comment_prefix, range);\n    let last_found_position_info = null; // Use last found instead of first found because cursor position at the border can belong to two ranges simultaneously.\n    for (let row_info of table_ranges) {\n        if (row_info.hasOwnProperty('comment_range')) {\n            if (row_info.comment_range.contains(position)) {\n                last_found_position_info = {is_comment: true};\n            }\n        } else {\n            for (let col_num = 0; col_num < row_info.record_ranges.length; col_num++) {\n                // One logical field can map to multiple ranges if it spans multiple lines.\n                for (let record_range of row_info.record_ranges[col_num]) {\n                    if (record_range.contains(position)) {\n                        last_found_position_info = {column_number: col_num, total_columns: row_info.record_ranges.length, split_warning: false};\n                    }\n                }\n            }\n        }\n    }\n    return last_found_position_info;\n}\n\n\nfunction get_cursor_position_info_standard(document, delim, policy, comment_prefix, position) {\n    var lnum = position.line;\n    var cnum = position.character;\n    var line = document.lineAt(lnum).text;\n\n    if (comment_prefix && line.startsWith(comment_prefix))\n        return {is_comment: true};\n\n    let [entries, warning] = csv_utils.smart_split(line, delim, policy, true);\n    var col_num = get_field_by_line_position(entries, delim.length, cnum + 1);\n    if (col_num == null)\n        return null;\n    return {column_number: col_num, total_columns: entries.length, split_warning: warning};\n}\n\n\nfunction get_cursor_position_info(vscode, document, delim, policy, comment_prefix, position) {\n    if (policy === null)\n        return null;\n    if (policy == QUOTED_RFC_POLICY) {\n        return get_cursor_position_info_rfc(vscode, document, delim, comment_prefix, position);\n    } else {\n        return get_cursor_position_info_standard(document, delim, policy, comment_prefix, position);\n    }\n}\n\n\nfunction format_cursor_position_info(cursor_position_info, header, show_column_names, show_comments, max_label_length) {\n    if (cursor_position_info.is_comment) {\n        if (show_comments) {\n            return ['Comment', 'Comment'];\n        } else {\n            return [null, null];\n        }\n    }\n    let short_report = 'Col ' + (cursor_position_info.column_number + 1);\n    let full_report = '[Rainbow CSV] ' + short_report;\n    if (show_column_names && cursor_position_info.column_number < header.length) {\n        let column_label = header[cursor_position_info.column_number].trim();\n        let short_column_label = column_label.substr(0, max_label_length);\n        if (short_column_label != column_label)\n            short_column_label = short_column_label + '...';\n        short_report += ': ' + short_column_label;\n        full_report += ': ' + column_label;\n    }\n    if (cursor_position_info.split_warning) {\n        full_report += '; ERR: Inconsistent double quotes in line';\n    } else if (header.length != cursor_position_info.total_columns) {\n        full_report += `; WARN: Inconsistent num of fields, header: ${header.length}, this line: ${cursor_position_info.total_columns}`;\n    }\n    return [full_report, short_report];\n}\n\n\nfunction sample_records(document, delim, policy, comment_prefix, end_record, preview_window_size, stop_on_warning, cached_table_parse_result) {\n    let records = [];\n    let first_failed_line = null;\n    let vscode_doc_version = null;\n    let [_num_records_parsed, _fields_info, _first_trailing_space_line, _comments] = [null, null, null, null];\n    // Here `preview_window_size` is typically 100.\n    if (end_record < preview_window_size * 5) {\n        // Re-sample the records. Re-sampling top records is fast and it ensures that all manual changes are mirrored into RBQL console.\n        [records, _num_records_parsed, _fields_info, first_failed_line, _first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, stop_on_warning, /*max_records_to_parse=*/end_record, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false);\n    } else {\n        let need_full_doc_parse = true;\n        if (cached_table_parse_result.has(document.fileName)) {\n            [records, first_failed_line, vscode_doc_version] = cached_table_parse_result.get(document.fileName);\n            if (document.version === vscode_doc_version) {\n                need_full_doc_parse = false;\n            }\n        }\n        if (need_full_doc_parse) {\n            let [records, _num_records_parsed, _fields_info, first_failed_line, _first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, stop_on_warning, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false);\n            cached_table_parse_result.set(document.fileName, [records, first_failed_line, document.version]);\n        }\n        [records, first_failed_line, vscode_doc_version] = cached_table_parse_result.get(document.fileName);\n    }\n    return [records, first_failed_line];\n}\n\n\nfunction sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result) {\n    let [document, delim, policy, comment_prefix] = [rbql_context.input_document, rbql_context.delim, rbql_context.policy, rbql_context.comment_prefix];\n    rbql_context.requested_start_record = Math.max(rbql_context.requested_start_record, 0);\n    let stop_on_warning = policy == QUOTED_RFC_POLICY;\n    let [records, first_failed_line] = sample_records(document, delim, policy, comment_prefix, rbql_context.requested_start_record + preview_window_size, preview_window_size, stop_on_warning, cached_table_parse_result);;\n    if (first_failed_line !== null && policy == QUOTED_RFC_POLICY) {\n        dst_message.preview_sampling_error = `Double quotes are not consistent in record ${records.length + 1} which starts at line ${first_failed_line + 1}`;\n        return;\n    }\n    rbql_context.requested_start_record = Math.max(0, Math.min(rbql_context.requested_start_record, records.length - preview_window_size));\n    let preview_records = records.slice(rbql_context.requested_start_record, rbql_context.requested_start_record + preview_window_size);\n\n    // Here we trim excessively long fields. The only benefit of doing is here instead of UI layer is to minimize the ammount of traffic that we send to UI - the total message size is limited.\n    for (let r = 0; r < preview_records.length; r++) {\n        let cur_record = preview_records[r];\n        for (let c = 0; c < cur_record.length; c++) {\n            if (cur_record[c].length > max_preview_field_length) {\n                cur_record[c] = cur_record[c].substr(0, max_preview_field_length) + '###UI_STRING_TRIM_MARKER###';\n            }\n        }\n    }\n    dst_message.preview_records = preview_records;\n    dst_message.actual_start_record = rbql_context.requested_start_record;\n}\n\n\nfunction show_lint_status_bar_button(vscode, extension_context, file_path, language_id) {\n    let lint_cache_key = `${file_path}.${language_id}`;\n    if (!extension_context.lint_results.has(lint_cache_key))\n        return;\n    var lint_report = extension_context.lint_results.get(lint_cache_key);\n    if (!extension_context.lint_status_bar_button)\n        extension_context.lint_status_bar_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    extension_context.lint_status_bar_button.text = 'CSVLint';\n    let lint_report_msg = '';\n    if (lint_report.is_processing) {\n        extension_context.lint_status_bar_button.color = '#A0A0A0';\n        lint_report_msg = 'Processing';\n    } else if (Number.isInteger(lint_report.first_defective_line)) {\n        lint_report_msg = `Error. Line ${lint_report.first_defective_line} has formatting error: double quote chars are not consistent`;\n        extension_context.lint_status_bar_button.color = '#f44242';\n    } else if (lint_report.fields_info && lint_report.fields_info.size > 1) {\n        let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(lint_report.fields_info);\n        lint_report_msg = `Error. Number of fields is not consistent: e.g. record ${record_num_1 + 1} has ${num_fields_1} fields, and record ${record_num_2 + 1} has ${num_fields_2} fields`;\n        extension_context.lint_status_bar_button.color = '#f44242';\n    } else if (Number.isInteger(lint_report.first_trailing_space_line)) {\n        lint_report_msg = `Leading/Trailing spaces detected: e.g. at line ${lint_report.first_trailing_space_line + 1}. Run \"Shrink\" command to remove them`;\n        extension_context.lint_status_bar_button.color = '#ffff28';\n    } else {\n        assert(lint_report.is_ok);\n        extension_context.lint_status_bar_button.color = '#62f442';\n        lint_report_msg = 'OK';\n    }\n    extension_context.lint_status_bar_button.tooltip = lint_report_msg + '\\nClick to recheck';\n    extension_context.lint_status_bar_button.command = 'rainbow-csv.CSVLint';\n    extension_context.lint_status_bar_button.show();\n}\n\n\nfunction generate_column_edit_selections(vscode, active_doc, delim, policy, comment_prefix, edit_mode, col_num) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, `Unable to enter column edit mode: quoting error at line ${first_defective_line + 1}`, null];\n    }\n    if (records.length + comments.length != active_doc.lineCount) {\n        // It is possible to support editing of non-multiline columns in such files, but for simplicity we won't do this.\n        return [null, 'Column edit mode is not supported for files with multiline fields', null];\n    }\n    let lnum = 0;\n    let selections = [];\n    let warning_msg = null;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record !== null) {\n            if (col_num >= record.length) {\n                return [null, `Line ${lnum + 1} doesn't have field number ${col_num + 1}`, null];\n            }\n            let char_pos_before = record.slice(0, col_num).join('').length + col_num * delim.length;\n            let char_pos_after = record.slice(0, col_num + 1).join('').length + col_num * delim.length;\n            let line_text = record.join(delim);\n            if (!warning_msg && edit_mode == 'ce_before' && (policy == QUOTED_POLICY || policy == QUOTED_RFC_POLICY) && line_text.substring(char_pos_before - 2, char_pos_before + 2).indexOf('\"') != -1) {\n                warning_msg = `Be careful, cursor at line ${lnum + 1} has a double quote is in proximity.`;\n            }\n            if (!warning_msg && edit_mode == 'ce_after' && (policy == QUOTED_POLICY || policy == QUOTED_RFC_POLICY) && line_text.substring(char_pos_after - 2, char_pos_after + 2).indexOf('\"') != -1) {\n                warning_msg = `Be careful, cursor at line ${lnum + 1} has a double quote is in proximity.`;\n            }\n            if (!warning_msg && edit_mode == 'ce_select' && char_pos_before == char_pos_after) {\n                warning_msg = `Be careful, Field ${col_num + 1} at line ${lnum + 1} is empty.`;\n            }\n            let position_before = new vscode.Position(lnum, char_pos_before);\n            let position_after = new vscode.Position(lnum, char_pos_after);\n            if (edit_mode == 'ce_before') {\n                selections.push(new vscode.Selection(position_before, position_before));\n            }\n            if (edit_mode == 'ce_after') {\n                selections.push(new vscode.Selection(position_after, position_after));\n            }\n            if (edit_mode == 'ce_select') {\n                selections.push(new vscode.Selection(position_before, position_after));\n            }\n        }\n        lnum += 1;\n    }\n    return [selections, null, warning_msg];\n}\n\n\nmodule.exports.make_table_name_key = make_table_name_key;\nmodule.exports.find_table_path = find_table_path;\nmodule.exports.read_header = read_header;\nmodule.exports.rbql_query_web = rbql_query_web;\nmodule.exports.rbql_query_node = rbql_query_node;\nmodule.exports.get_header_line = get_header_line;\nmodule.exports.get_default_js_udf_content = get_default_js_udf_content;\nmodule.exports.get_default_python_udf_content = get_default_python_udf_content;\nmodule.exports.align_columns = align_columns;\nmodule.exports.shrink_columns = shrink_columns;\nmodule.exports.calc_column_stats = calc_column_stats;\nmodule.exports.adjust_column_stats = adjust_column_stats;\nmodule.exports.update_subcomponent_stats = update_subcomponent_stats;\nmodule.exports.align_field = align_field;\nmodule.exports.rfc_align_field = rfc_align_field;\nmodule.exports.assert = assert;\nmodule.exports.get_field_by_line_position = get_field_by_line_position;\nmodule.exports.get_cursor_position_info = get_cursor_position_info;\nmodule.exports.format_cursor_position_info = format_cursor_position_info;\nmodule.exports.parse_document_range = parse_document_range;\nmodule.exports.sample_preview_records_from_context = sample_preview_records_from_context;\nmodule.exports.parse_document_range_rfc = parse_document_range_rfc; // Only for unit tests.\nmodule.exports.sample_first_two_inconsistent_records = rbql.sample_first_two_inconsistent_records;\nmodule.exports.is_opening_rfc_line = is_opening_rfc_line; // Only for unit tests.\nmodule.exports.show_lint_status_bar_button = show_lint_status_bar_button;\nmodule.exports.get_cursor_position_if_unambiguous = get_cursor_position_if_unambiguous;\nmodule.exports.RecordCommentMerger = RecordCommentMerger;\nmodule.exports.generate_column_edit_selections = generate_column_edit_selections;\n","let field_regular_expression = '\"((?:[^\"]*\"\")*[^\"]*)\"';\nlet field_rgx = new RegExp('^' + field_regular_expression);\nlet field_rgx_external_whitespaces = new RegExp('^ *' + field_regular_expression + ' *');\n\n\n// TODO consider making this file (and rbql.js) both node and browser compatible: https://caolan.org/posts/writing_for_node_and_the_browser.html\n\n\nfunction split_lines(text) {\n    return text.split(/\\r\\n|\\r|\\n/);\n}\n\n\nfunction extract_next_field(src, dlm, preserve_quotes_and_whitespaces, allow_external_whitespaces, cidx, result) {\n    var warning = false;\n    let src_cur = src.substring(cidx);\n    let rgx = allow_external_whitespaces ? field_rgx_external_whitespaces : field_rgx;\n    let match_obj = rgx.exec(src_cur);\n    if (match_obj !== null) {\n        let match_end = match_obj[0].length;\n        if (cidx + match_end == src.length || src[cidx + match_end] == dlm) {\n            if (preserve_quotes_and_whitespaces) {\n                result.push(match_obj[0]);\n            } else {\n                result.push(match_obj[1].replace(/\"\"/g, '\"'));\n            }\n            return [cidx + match_end + 1, false];\n        }\n        warning = true;\n    }\n    var uidx = src.indexOf(dlm, cidx);\n    if (uidx == -1)\n        uidx = src.length;\n    var field = src.substring(cidx, uidx);\n    warning = warning || field.indexOf('\"') != -1;\n    result.push(field);\n    return [uidx + 1, warning];\n}\n\n\nfunction split_quoted_str(src, dlm, preserve_quotes_and_whitespaces=false) {\n    // This function is newline-agnostic i.e. it can also split records with multiline fields.\n    if (src.indexOf('\"') == -1) // Optimization for most common case\n        return [src.split(dlm), false];\n    var result = [];\n    var cidx = 0;\n    var warning = false;\n    let allow_external_whitespaces = dlm != ' ';\n    while (cidx < src.length) {\n        var extraction_report = extract_next_field(src, dlm, preserve_quotes_and_whitespaces, allow_external_whitespaces, cidx, result);\n        cidx = extraction_report[0];\n        warning = warning || extraction_report[1];\n    }\n    if (src.charAt(src.length - 1) == dlm)\n        result.push('');\n    return [result, warning];\n}\n\n\nfunction quote_field(src, delim) {\n    if (src.indexOf(delim) != -1 || src.indexOf('\"') != -1) {\n        var escaped = src.replace(/\"/g, '\"\"');\n        return `\"${escaped}\"`;\n    }\n    return src;\n}\n\n\nfunction rfc_quote_field(src, delim) {\n    if (src.indexOf(delim) != -1 || src.indexOf('\"') != -1 || src.indexOf('\\n') != -1 || src.indexOf('\\r') != -1) {\n        var escaped = src.replace(/\"/g, '\"\"');\n        return `\"${escaped}\"`;\n    }\n    return src;\n}\n\n\nfunction unquote_field(field) {\n    let rgx = new RegExp('^' + ' *' + field_regular_expression + ' *$');\n    let match_obj = rgx.exec(field);\n    if (match_obj !== null) {\n        return match_obj[1].replace(/\"\"/g, '\"');\n    }\n    return field;\n}\n\n\nfunction unquote_fields(fields) {\n    return fields.map(unquote_field);\n}\n\n\nfunction split_whitespace_separated_str(src, preserve_whitespaces=false) {\n    var rgxp = preserve_whitespaces ? new RegExp(' *[^ ]+ *', 'g') : new RegExp('[^ ]+', 'g');\n    let result = [];\n    let match_obj = null;\n    while((match_obj = rgxp.exec(src)) !== null) {\n        result.push(match_obj[0]);\n    }\n    if (preserve_whitespaces) {\n        for (let i = 0; i < result.length - 1; i++) {\n            result[i] = result[i].slice(0, -1);\n        }\n    }\n    return result;\n}\n\n\nfunction smart_split(src, dlm, policy, preserve_quotes_and_whitespaces) {\n    if (policy === 'simple')\n        return [src.split(dlm), false];\n    if (policy === 'whitespace')\n        return [split_whitespace_separated_str(src, preserve_quotes_and_whitespaces), false];\n    if (policy === 'monocolumn')\n        return [[src], false];\n    return split_quoted_str(src, dlm, preserve_quotes_and_whitespaces);\n}\n\n\nclass MultilineRecordAggregator {\n    constructor(comment_prefix) {\n        this.comment_prefix = comment_prefix;\n        this.reset();\n    }\n    add_line(line_text) {\n        if (this.has_full_record || this.has_comment_line) {\n            throw new Error('Invalid usage - record aggregator must be reset before adding new lines');\n        }\n        if (this.comment_prefix && this.rfc_line_buffer.length == 0 && line_text.startsWith(this.comment_prefix)) {\n            this.has_comment_line = true;\n            return false;\n        }\n        let match_list = line_text.match(/\"/g);\n        let has_unbalanced_double_quote = match_list && match_list.length % 2 == 1;\n        this.rfc_line_buffer.push(line_text);\n        this.has_full_record = (!has_unbalanced_double_quote && this.rfc_line_buffer.length == 1) || (has_unbalanced_double_quote && this.rfc_line_buffer.length > 1);\n        return this.has_full_record;\n    }\n    is_inside_multiline_record() {\n        return this.rfc_line_buffer.length && !this.has_full_record;\n    }\n    get_full_line(line_separator) {\n        return this.rfc_line_buffer.join(line_separator);\n    }\n    get_num_lines_in_record() {\n        return this.rfc_line_buffer.length;\n    }\n    reset() {\n        this.rfc_line_buffer = [];\n        this.has_full_record = false;\n        this.has_comment_line = false;\n    }\n}\n\n\nmodule.exports.split_quoted_str = split_quoted_str;\nmodule.exports.split_whitespace_separated_str = split_whitespace_separated_str;\nmodule.exports.smart_split = smart_split;\nmodule.exports.quote_field = quote_field;\nmodule.exports.rfc_quote_field = rfc_quote_field;\nmodule.exports.unquote_field = unquote_field;\nmodule.exports.unquote_fields = unquote_fields;\nmodule.exports.split_lines = split_lines;\nmodule.exports.MultilineRecordAggregator = MultilineRecordAggregator;\n","(function(exports){\n// The magic line above is to make the module both browser and Node compatible, see https://stackoverflow.com/questions/3225251/how-can-i-share-code-between-node-js-and-the-browser\n\n// This module works with records only. It is CSV-agnostic.\n// Do not add CSV-related logic or variables/functions/objects like \"delim\", \"separator\" etc\n\n\nclass RbqlParsingError extends Error {}\nclass RbqlRuntimeError extends Error {}\nclass AssertionError extends Error {}\nclass RbqlIOHandlingError extends Error {}\n\n\nclass InternalBadFieldError extends Error {\n    constructor(bad_idx, ...params) {\n        super(...params);\n        this.bad_idx = bad_idx;\n    }\n}\n\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction replace_all(src, search, replacement) {\n    return src.split(search).join(replacement);\n}\n\n\nclass RBQLContext {\n    constructor(query_text, input_iterator, output_writer, user_init_code) {\n        this.query_text = query_text;\n        this.input_iterator = input_iterator;\n        this.writer = output_writer;\n        this.user_init_code = user_init_code;\n\n        this.unnest_list = null;\n        this.top_count = null;\n\n        this.like_regex_cache = new Map();\n\n        this.sort_key_expression = null;\n\n        this.aggregation_stage = 0;\n        this.aggregation_key_expression = null;\n        this.functional_aggregators = [];\n\n        this.join_map_impl = null;\n        this.join_map = null;\n        this.lhs_join_var_expression = null;\n\n        this.where_expression = null;\n\n        this.select_expression = null;\n\n        this.update_expressions = null;\n\n        this.variables_init_code = null;\n    }\n}\n\nvar query_context = null; // Needs to be global for MIN(), MAX(), etc functions. TODO find a way to make it local.\n\n\nconst wrong_aggregation_usage_error = 'Usage of RBQL aggregation functions inside JavaScript expressions is not allowed, see the docs';\nconst RBQL_VERSION = '0.25.1';\n\n\nfunction check_if_brackets_match(opening_bracket, closing_bracket) {\n    return (opening_bracket == '[' && closing_bracket == ']') || (opening_bracket == '(' && closing_bracket == ')') || (opening_bracket == '{' && closing_bracket == '}');\n}\n\n\nfunction parse_root_bracket_level_text_spans(select_expression) {\n    let text_spans = []; // parts of text separated by commas at the root parenthesis level\n    let last_pos = 0;\n    let bracket_stack = [];\n    for (let i = 0; i < select_expression.length; i++) {\n        let cur_char = select_expression[i];\n        if (cur_char == ',' && bracket_stack.length == 0) {\n            text_spans.push(select_expression.substring(last_pos, i));\n            last_pos = i + 1;\n        } else if (['[', '{', '('].indexOf(cur_char) != -1) {\n            bracket_stack.push(cur_char);\n        } else if ([']', '}', ')'].indexOf(cur_char) != -1) {\n            if (bracket_stack.length && check_if_brackets_match(bracket_stack[bracket_stack.length - 1], cur_char)) {\n                bracket_stack.pop();\n            } else {\n                throw new RbqlParsingError(`Unable to parse column headers in SELECT expression: No matching opening bracket for closing \"${cur_char}\"`);\n            }\n        }\n    }\n    if (bracket_stack.length) {\n        throw new RbqlParsingError(`Unable to parse column headers in SELECT expression: No matching closing bracket for opening \"${bracket_stack[0]}\"`);\n    }\n    text_spans.push(select_expression.substring(last_pos, select_expression.length));\n    text_spans = text_spans.map(span => span.trim());\n    return text_spans;\n}\n\n\nfunction unquote_string(quoted_str) {\n    // It's possible to use eval here to unqoute the quoted_column_name, but it would be a little barbaric, let's do it manually instead\n    if (!quoted_str || quoted_str.length < 2)\n        return null;\n    if (quoted_str[0] == \"'\" && quoted_str[quoted_str.length - 1] == \"'\") {\n        return quoted_str.substring(1, quoted_str.length - 1).replace(/\\\\'/g, \"'\").replace(/\\\\\\\\/g, \"\\\\\");\n    } else if (quoted_str[0] == '\"' && quoted_str[quoted_str.length - 1] == '\"') {\n        return quoted_str.substring(1, quoted_str.length - 1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, \"\\\\\");\n    } else {\n        return null;\n    }\n}\n\n\nfunction column_info_from_text_span(text_span, string_literals) {\n    // This function is a rough equivalent of \"column_info_from_node()\" function in python version of RBQL\n    text_span = text_span.trim();\n    let rbql_star_marker = '__RBQL_INTERNAL_STAR';\n    let simple_var_match = /^[_a-zA-Z][_a-zA-Z0-9]*$/.exec(text_span);\n    let attribute_match = /^([ab])\\.([_a-zA-Z][_a-zA-Z0-9]*)$/.exec(text_span);\n    let subscript_int_match = /^([ab])\\[([0-9]+)\\]$/.exec(text_span);\n    let subscript_str_match = /^([ab])\\[___RBQL_STRING_LITERAL([0-9]+)___\\]$/.exec(text_span);\n    if (simple_var_match !== null) {\n        if (text_span == rbql_star_marker)\n            return {table_name: null, column_index: null, column_name: null, is_star: true};\n        if (text_span.startsWith('___RBQL_STRING_LITERAL'))\n            return null;\n        let match = /^([ab])([0-9]+)$/.exec(text_span);\n        if (match !== null) {\n            return {table_name: match[1], column_index: parseInt(match[2]) - 1, column_name: null, is_star: false};\n        }\n        // Some examples for this branch: NR, NF\n        return {table_name: null, column_index: null, column_name: text_span, is_star: false};\n    } else if (attribute_match !== null) {\n        let table_name = attribute_match[1];\n        let column_name = attribute_match[2];\n        if (column_name == rbql_star_marker) {\n            return {table_name: table_name, column_index: null, column_name: null, is_star: true};\n        }\n        return {table_name: null, column_index: null, column_name: column_name, is_star: false};\n    } else if (subscript_int_match != null) {\n        let table_name = subscript_int_match[1];\n        let column_index = parseInt(subscript_int_match[2]) - 1;\n        return {table_name: table_name, column_index: column_index, column_name: null, is_star: false};\n    } else if (subscript_str_match != null) {\n        let table_name = subscript_str_match[1];\n        let replaced_string_literal_id = subscript_str_match[2];\n        if (replaced_string_literal_id < string_literals.length) {\n            let quoted_column_name = string_literals[replaced_string_literal_id];\n            let unquoted_column_name = unquote_string(quoted_column_name);\n            if (unquoted_column_name !== null && unquoted_column_name !== undefined) {\n                return {table_name: null, column_index: null, column_name: unquoted_column_name, is_star: false};\n            }\n        }\n    }\n    return null;\n}\n\n\nfunction adhoc_parse_select_expression_to_column_infos(select_expression, string_literals) {\n    // It is acceptable for the algorithm to provide null column name when it could be theorethically possible to deduce the name.\n    // I.e. this algorithm guarantees precision but doesn't guarantee completeness in all theorethically possible queries.\n    // Although the algorithm should be complete in all practical scenarios, i.e. it should be hard to come up with the query that doesn't produce complete set of column names.\n    // The null column name just means that the output column will be named as col{i}, so the failure to detect the proper column name can be tolerated.\n    // Specifically this function guarantees the following:\n    // 1. The number of column_infos is correct and will match the number of fields in each record in the output - otherwise the exception should be thrown\n    // 2. If column_info at pos j is not null, it is guaranteed to correctly represent that column name in the output\n    let text_spans = parse_root_bracket_level_text_spans(select_expression);\n    let column_infos = text_spans.map(ts => column_info_from_text_span(ts, string_literals));\n    return column_infos;\n}\n\n\nfunction stable_compare(a, b) {\n    for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n}\n\n\nfunction safe_get(record, idx) {\n    return idx < record.length ? record[idx] : null;\n}\n\n\nfunction safe_join_get(record, idx) {\n    if (idx < record.length) {\n        return record[idx];\n    }\n    throw new InternalBadFieldError(idx);\n}\n\n\nfunction safe_set(record, idx, value) {\n    if (idx < record.length) {\n        record[idx] = value;\n    } else {\n        throw new InternalBadFieldError(idx);\n    }\n}\n\n\nfunction regexp_escape(text) {\n    // From here: https://stackoverflow.com/a/6969486/2898283\n    return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');  // $& means the whole matched text\n}\n\n\nfunction like_to_regex(pattern) {\n    let p = 0;\n    let i = 0;\n    let converted = '';\n    while (i < pattern.length) {\n        if (pattern.charAt(i) == '_' || pattern.charAt(i) == '%') {\n            converted += regexp_escape(pattern.substring(p, i));\n            p = i + 1;\n            if (pattern.charAt(i) == '_') {\n                converted += '.';\n            } else {\n                converted += '.*';\n            }\n        }\n        i += 1;\n    }\n    converted += regexp_escape(pattern.substring(p, i));\n    return '^' + converted + '$';\n}\n\n\nfunction like(text, pattern) {\n    let matcher = query_context.like_regex_cache.get(pattern);\n    if (matcher === undefined) {\n        matcher = new RegExp(like_to_regex(pattern));\n        query_context.like_regex_cache.set(pattern, matcher);\n    }\n    return matcher.test(text);\n}\nconst LIKE = like;\n\n\nclass RBQLAggregationToken {\n    constructor(marker_id, value) {\n        this.marker_id = marker_id;\n        this.value = value;\n    }\n\n    toString() {\n        throw new RbqlParsingError(wrong_aggregation_usage_error);\n    }\n}\n\n\nclass UnnestMarker {}\n\n\nfunction UNNEST(vals) {\n    if (query_context.unnest_list !== null) {\n        // Technically we can support multiple UNNEST's but the implementation/algorithm is more complex and just doesn't worth it\n        throw new RbqlParsingError('Only one UNNEST is allowed per query');\n    }\n    query_context.unnest_list = vals;\n    return new UnnestMarker();\n}\nconst unnest = UNNEST;\nconst Unnest = UNNEST;\nconst UNFOLD = UNNEST; // \"UNFOLD\" is deprecated, just for backward compatibility\n\n\nfunction parse_number(val) {\n    // We can do a more pedantic number test like `/^ *-{0,1}[0-9]+\\.{0,1}[0-9]* *$/.test(val)`, but  user will probably use just Number(val) or parseInt/parseFloat\n    let result = Number(val);\n    if (isNaN(result)) {\n        throw new RbqlRuntimeError(`Unable to convert value \"${val}\" to a number. MIN, MAX, SUM, AVG, MEDIAN and VARIANCE aggregate functions convert their string arguments to numeric values`);\n    }\n    return result;\n}\n\n\nclass MinAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, Math.min(cur_aggr, val));\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\n\nclass MaxAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, Math.max(cur_aggr, val));\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass SumAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, cur_aggr + val);\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass AvgAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val, 1]);\n        } else {\n            var cur_sum = cur_aggr[0];\n            var cur_cnt = cur_aggr[1];\n            this.stats.set(key, [cur_sum + val, cur_cnt + 1]);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        var cur_sum = cur_aggr[0];\n        var cur_cnt = cur_aggr[1];\n        var avg = cur_sum / cur_cnt;\n        return avg;\n    }\n}\n\n\nclass VarianceAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val, val * val, 1]);\n        } else {\n            var cur_sum = cur_aggr[0];\n            var cur_sum_sq = cur_aggr[1];\n            var cur_cnt = cur_aggr[2];\n            this.stats.set(key, [cur_sum + val, cur_sum_sq + val * val, cur_cnt + 1]);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        var cur_sum = cur_aggr[0];\n        var cur_sum_sq = cur_aggr[1];\n        var cur_cnt = cur_aggr[2];\n        var avg_val = cur_sum / cur_cnt;\n        var variance = cur_sum_sq / cur_cnt - avg_val * avg_val;\n        return variance;\n    }\n}\n\n\nclass MedianAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val]);\n        } else {\n            cur_aggr.push(val);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        cur_aggr.sort(function(a, b) { return a - b; });\n        var m = Math.floor(cur_aggr.length / 2);\n        if (cur_aggr.length % 2) {\n            return cur_aggr[m];\n        } else {\n            return (cur_aggr[m - 1] + cur_aggr[m]) / 2.0;\n        }\n    }\n}\n\n\nclass CountAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, 1);\n        } else {\n            this.stats.set(key, cur_aggr + 1);\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass ArrayAggAggregator {\n    constructor(post_proc=null) {\n        this.post_proc = post_proc;\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        let cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val]);\n        } else {\n            cur_aggr.push(val);\n        }\n    }\n\n    get_final(key) {\n        let cur_aggr = this.stats.get(key);\n        if (this.post_proc === null)\n            return cur_aggr;\n        return this.post_proc(cur_aggr);\n    }\n}\n\n\nclass ConstGroupVerifier {\n    constructor(output_index) {\n        this.output_index = output_index;\n        this.const_values = new Map();\n    }\n\n    increment(key, value) {\n        var old_value = this.const_values.get(key);\n        if (old_value === undefined) {\n            this.const_values.set(key, value);\n        } else if (old_value != value) {\n            throw new RbqlRuntimeError(`Invalid aggregate expression: non-constant values in output column ${this.output_index + 1}. E.g. \"${old_value}\" and \"${value}\"`);\n        }\n    }\n\n    get_final(key) {\n        return this.const_values.get(key);\n    }\n}\n\n\nfunction init_aggregator(generator_name, val, post_proc=null) {\n    query_context.aggregation_stage = 1;\n    var res = new RBQLAggregationToken(query_context.functional_aggregators.length, val);\n    if (post_proc === null) {\n        query_context.functional_aggregators.push(new generator_name());\n    } else {\n        query_context.functional_aggregators.push(new generator_name(post_proc));\n    }\n    return res;\n}\n\n\nfunction MIN(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MinAggregator, val) : val;\n}\nconst min = MIN;\nconst Min = MIN;\n\n\nfunction MAX(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MaxAggregator, val) : val;\n}\nconst max = MAX;\nconst Max = MAX;\n\nfunction COUNT(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(CountAggregator, 1) : 1;\n}\nconst count = COUNT;\nconst Count = COUNT;\n\nfunction SUM(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(SumAggregator, val) : val;\n}\nconst sum = SUM;\nconst Sum = SUM;\n\nfunction AVG(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(AvgAggregator, val) : val;\n}\nconst avg = AVG;\nconst Avg = AVG;\n\nfunction VARIANCE(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(VarianceAggregator, val) : val;\n}\nconst variance = VARIANCE;\nconst Variance = VARIANCE;\n\nfunction MEDIAN(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MedianAggregator, val) : val;\n}\nconst median = MEDIAN;\nconst Median = MEDIAN;\n\nfunction ARRAY_AGG(val, post_proc=null) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(ArrayAggAggregator, val, post_proc) : val;\n}\nconst array_agg = ARRAY_AGG;\nconst FOLD = ARRAY_AGG; // \"FOLD\" is deprecated, just for backward compatibility\n\n\nfunction add_to_set(dst_set, value) {\n    var len_before = dst_set.size;\n    dst_set.add(value);\n    return len_before != dst_set.size;\n}\n\n\nclass TopWriter {\n    constructor(subwriter, top_count) {\n        this.subwriter = subwriter;\n        this.NW = 0;\n        this.top_count = top_count;\n    }\n\n    async write(record) {\n        if (this.top_count !== null && this.NW >= this.top_count)\n            return false;\n        await this.subwriter.write(record);\n        this.NW += 1;\n        return true;\n    }\n\n    async finish() {\n        await this.subwriter.finish();\n    }\n}\n\n\nclass UniqWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.seen = new Set();\n    }\n\n    async write(record) {\n        if (!add_to_set(this.seen, JSON.stringify(record)))\n            return true;\n        if (!await this.subwriter.write(record))\n            return false;\n        return true;\n    }\n\n    async finish() {\n        await this.subwriter.finish();\n    }\n}\n\n\nclass UniqCountWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.records = new Map();\n    }\n\n    async write(record) {\n        var key = JSON.stringify(record);\n        var old_val = this.records.get(key);\n        if (old_val) {\n            old_val[0] += 1;\n        } else {\n            this.records.set(key, [1, record]);\n        }\n        return true;\n    }\n\n    async finish() {\n        for (var [key, value] of this.records) {\n            let [count, record] = value;\n            record.unshift(count);\n            if (!await this.subwriter.write(record))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass SortedWriter {\n    constructor(subwriter, reverse_sort) {\n        this.subwriter = subwriter;\n        this.reverse_sort = reverse_sort;\n        this.unsorted_entries = [];\n    }\n\n    async write(stable_entry) {\n        this.unsorted_entries.push(stable_entry);\n        return true;\n    }\n\n    async finish() {\n        var unsorted_entries = this.unsorted_entries;\n        unsorted_entries.sort(stable_compare);\n        if (this.reverse_sort)\n            unsorted_entries.reverse();\n        for (var i = 0; i < unsorted_entries.length; i++) {\n            var entry = unsorted_entries[i];\n            if (!await this.subwriter.write(entry[entry.length - 1]))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass AggregateWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.aggregators = [];\n        this.aggregation_keys = new Set();\n    }\n\n    async finish() {\n        var all_keys = Array.from(this.aggregation_keys);\n        all_keys.sort();\n        for (var i = 0; i < all_keys.length; i++) {\n            var key = all_keys[i];\n            var out_fields = [];\n            for (var ag of this.aggregators) {\n                out_fields.push(ag.get_final(key));\n            }\n            if (!await this.subwriter.write(out_fields))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass InnerJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n    }\n\n    get_rhs(lhs_key) {\n        return this.join_map.get_join_records(lhs_key);\n    }\n}\n\n\nclass LeftJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n        this.null_record = [[null, join_map.max_record_len, Array(join_map.max_record_len).fill(null)]];\n    }\n\n    get_rhs(lhs_key) {\n        let result = this.join_map.get_join_records(lhs_key);\n        if (result.length == 0) {\n            return this.null_record;\n        }\n        return result;\n    }\n}\n\n\nclass StrictLeftJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n    }\n\n    get_rhs(lhs_key) {\n        let result = this.join_map.get_join_records(lhs_key);\n        if (result.length != 1) {\n            throw new RbqlRuntimeError('In \"STRICT LEFT JOIN\" each key in A must have exactly one match in B. Bad A key: \"' + lhs_key + '\"');\n        }\n        return result;\n    }\n}\n\n\nfunction select_except(src, except_fields) {\n    let result = [];\n    for (let i = 0; i < src.length; i++) {\n        if (except_fields.indexOf(i) == -1)\n            result.push(src[i]);\n    }\n    return result;\n}\n\n\nasync function select_simple(sort_key, NR, out_fields) {\n    if (query_context.sort_key_expression !== null) {\n        var sort_entry = sort_key.concat([NR, out_fields]);\n        if (!await query_context.writer.write(sort_entry))\n            return false;\n    } else {\n        if (!await query_context.writer.write(out_fields))\n            return false;\n    }\n    return true;\n}\n\n\nfunction select_aggregated(key, transparent_values) {\n    if (key !== null) {\n        key = JSON.stringify(key);\n    }\n    if (query_context.aggregation_stage === 1) {\n        if (!(query_context.writer instanceof TopWriter)) {\n            throw new RbqlParsingError('\"ORDER BY\", \"UPDATE\" and \"DISTINCT\" keywords are not allowed in aggregate queries');\n        }\n        query_context.writer = new AggregateWriter(query_context.writer);\n        let num_aggregators_found = 0;\n        for (var i = 0; i < transparent_values.length; i++) {\n            var trans_value = transparent_values[i];\n            if (trans_value instanceof RBQLAggregationToken) {\n                query_context.writer.aggregators.push(query_context.functional_aggregators[trans_value.marker_id]);\n                query_context.writer.aggregators[query_context.writer.aggregators.length - 1].increment(key, trans_value.value);\n                num_aggregators_found += 1;\n            } else {\n                query_context.writer.aggregators.push(new ConstGroupVerifier(query_context.writer.aggregators.length));\n                query_context.writer.aggregators[query_context.writer.aggregators.length - 1].increment(key, trans_value);\n            }\n        }\n        if (num_aggregators_found != query_context.functional_aggregators.length) {\n            throw new RbqlParsingError(wrong_aggregation_usage_error);\n        }\n        query_context.aggregation_stage = 2;\n    } else {\n        for (var i = 0; i < transparent_values.length; i++) {\n            var trans_value = transparent_values[i];\n            query_context.writer.aggregators[i].increment(key, trans_value);\n        }\n    }\n    query_context.writer.aggregation_keys.add(key);\n}\n\n\nasync function select_unnested(sort_key, NR, folded_fields) {\n    let out_fields = folded_fields.slice();\n    let unnest_pos = folded_fields.findIndex(val => val instanceof UnnestMarker);\n    for (var i = 0; i < query_context.unnest_list.length; i++) {\n        out_fields[unnest_pos] = query_context.unnest_list[i];\n        if (!await select_simple(sort_key, NR, out_fields.slice()))\n            return false;\n    }\n    return true;\n}\n\n\nconst PROCESS_SELECT_COMMON = `\n__RBQLMP__variables_init_code\nif (__RBQLMP__where_expression) {\n    let out_fields = __RBQLMP__select_expression;\n    if (query_context.aggregation_stage > 0) {\n        let key = __RBQLMP__aggregation_key_expression;\n        select_aggregated(key, out_fields);\n    } else {\n        let sort_key = [__RBQLMP__sort_key_expression];\n        if (query_context.unnest_list !== null) {\n            if (!await select_unnested(sort_key, NR, out_fields))\n                stop_flag = true;\n        } else {\n            if (!await select_simple(sort_key, NR, out_fields))\n                stop_flag = true;\n        }\n    }\n}\n`;\n\n\nconst PROCESS_SELECT_SIMPLE = `\nlet star_fields = record_a;\n__CODE__\n`;\n\n\nconst PROCESS_SELECT_JOIN = `\nlet join_matches = query_context.join_map.get_rhs(__RBQLMP__lhs_join_var_expression);\nfor (let join_match of join_matches) {\n    let [bNR, bNF, record_b] = join_match;\n    let star_fields = record_a.concat(record_b);\n    __CODE__\n    if (stop_flag)\n        break;\n}\n`;\n\n\nconst PROCESS_UPDATE_JOIN = `\nlet join_matches = query_context.join_map.get_rhs(__RBQLMP__lhs_join_var_expression);\nif (join_matches.length > 1)\n    throw new RbqlRuntimeError('More than one record in UPDATE query matched a key from the input table in the join table');\nlet record_b = null;\nlet bNR = null;\nlet bNF = null;\nif (join_matches.length == 1)\n    [bNR, bNF, record_b] = join_matches[0];\nlet up_fields = record_a;\n__RBQLMP__variables_init_code\nif (join_matches.length == 1 && (__RBQLMP__where_expression)) {\n    NU += 1;\n    __RBQLMP__update_expressions\n}\nif (!await query_context.writer.write(up_fields))\n    stop_flag = true;\n`;\n\n\nconst PROCESS_UPDATE_SIMPLE = `\nlet up_fields = record_a;\n__RBQLMP__variables_init_code\nif (__RBQLMP__where_expression) {\n    NU += 1;\n    __RBQLMP__update_expressions\n}\nif (!await query_context.writer.write(up_fields))\n    stop_flag = true;\n`;\n\n\nconst MAIN_LOOP_BODY = `\n__USER_INIT_CODE__\n\nlet NU = 0;\nlet NR = 0;\n\nlet stop_flag = false;\nwhile (!stop_flag) {\n    let record_a = await query_context.input_iterator.get_record();\n    if (record_a === null)\n        break;\n    NR += 1;\n    let NF = record_a.length;\n    query_context.unnest_list = null; // TODO optimize, don't need to set this every iteration\n    try {\n        __CODE__\n    } catch (e) {\n        if (e.constructor.name === 'InternalBadFieldError') {\n            throw new RbqlRuntimeError(\\`No \"a\\${e.bad_idx + 1}\" field at record \\${NR}\\`);\n        } else if (e.constructor.name === 'RbqlParsingError') {\n            throw(e);\n        } else {\n            throw new RbqlRuntimeError(\\`At record \\${NR}, Details: \\${e.message}\\`);\n        }\n    }\n}\n`;\n\n\nfunction embed_expression(parent_code, child_placeholder, child_expression) {\n    return replace_all(parent_code, child_placeholder, child_expression);\n}\n\n\nfunction embed_code(parent_code, child_placeholder, child_code) {\n    let parent_lines = parent_code.split('\\n');\n    let child_lines = child_code.split('\\n');\n    for (let i = 0; i < parent_lines.length; i++) {\n        let pos = parent_lines[i].indexOf(child_placeholder);\n        if (pos == -1)\n            continue;\n        assert(pos % 4 == 0);\n        let placeholder_indentation = parent_lines[i].substring(0, pos);\n        child_lines = child_lines.map(l => placeholder_indentation + l);\n        let result_lines = parent_lines.slice(0, i).concat(child_lines).concat(parent_lines.slice(i + 1));\n        return result_lines.join('\\n') + '\\n';\n    }\n    assert(false);\n}\n\n\nfunction generate_main_loop_code(query_context) {\n    let is_select_query = query_context.select_expression !== null;\n    let is_join_query = query_context.join_map !== null;\n    let where_expression = query_context.where_expression === null ? 'true' : query_context.where_expression;\n    let aggregation_key_expression = query_context.aggregation_key_expression === null ? 'null' : query_context.aggregation_key_expression;\n    let sort_key_expression = query_context.sort_key_expression === null ? 'null' : query_context.sort_key_expression;\n    let js_code = embed_code(MAIN_LOOP_BODY, '__USER_INIT_CODE__', query_context.user_init_code);\n    if (is_select_query) {\n        if (is_join_query) {\n            js_code = embed_code(embed_code(js_code, '__CODE__', PROCESS_SELECT_JOIN), '__CODE__', PROCESS_SELECT_COMMON);\n            js_code = embed_expression(js_code, '__RBQLMP__lhs_join_var_expression', query_context.lhs_join_var_expression);\n        } else {\n            js_code = embed_code(embed_code(js_code, '__CODE__', PROCESS_SELECT_SIMPLE), '__CODE__', PROCESS_SELECT_COMMON);\n        }\n        js_code = embed_code(js_code, '__RBQLMP__variables_init_code', query_context.variables_init_code);\n        js_code = embed_expression(js_code, '__RBQLMP__select_expression', query_context.select_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__where_expression', where_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__aggregation_key_expression', aggregation_key_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__sort_key_expression', sort_key_expression);\n    } else {\n        if (is_join_query) {\n            js_code = embed_code(js_code, '__CODE__', PROCESS_UPDATE_JOIN);\n            js_code = embed_expression(js_code, '__RBQLMP__lhs_join_var_expression', query_context.lhs_join_var_expression);\n        } else {\n            js_code = embed_code(js_code, '__CODE__', PROCESS_UPDATE_SIMPLE);\n        }\n        js_code = embed_code(js_code, '__RBQLMP__variables_init_code', query_context.variables_init_code);\n        js_code = embed_code(js_code, '__RBQLMP__update_expressions', query_context.update_expressions);\n        js_code = embed_expression(js_code, '__RBQLMP__where_expression', where_expression);\n    }\n    return \"(async () => {\" + js_code + \"})()\";\n}\n\n\nasync function compile_and_run(query_context) {\n    let main_loop_body = generate_main_loop_code(query_context);\n    try {\n        let main_loop_promise = eval(main_loop_body);\n        await main_loop_promise;\n    } catch (e) {\n        if (e instanceof SyntaxError) {\n            // SyntaxError's from eval() function do not contain detailed explanation of what has caused the syntax error, so to guess what was wrong we can only use the original query\n            // v8 issue to fix eval: https://bugs.chromium.org/p/v8/issues/detail?id=2589\n            let lower_case_query = query_context.query_text.toLowerCase();\n            if (lower_case_query.indexOf(' having ') != -1)\n                throw new SyntaxError(e.message + \"\\nRBQL doesn't support \\\"HAVING\\\" keyword\");\n            if (lower_case_query.indexOf(' like ') != -1)\n                throw new SyntaxError(e.message + \"\\nRBQL doesn't support \\\"LIKE\\\" operator, use like() function instead e.g. ... WHERE like(a1, 'foo%bar') ... \"); // UT JSON\n            if (lower_case_query.indexOf(' from ') != -1)\n                throw new SyntaxError(e.message + \"\\nTip: If input table is defined by the environment, RBQL query should not have \\\"FROM\\\" keyword\"); // UT JSON\n            if (e && e.message && String(e.message).toLowerCase().indexOf('unexpected identifier') != -1) {\n                if (lower_case_query.indexOf(' and ') != -1)\n                    throw new SyntaxError(e.message + \"\\nDid you use 'and' keyword in your query?\\nJavaScript backend doesn't support 'and' keyword, use '&&' operator instead!\");\n                if (lower_case_query.indexOf(' or ') != -1)\n                    throw new SyntaxError(e.message + \"\\nDid you use 'or' keyword in your query?\\nJavaScript backend doesn't support 'or' keyword, use '||' operator instead!\");\n            }\n        }\n        if (e && e.message && e.message.indexOf('Received an instance of RBQLAggregationToken') != -1)\n            throw new RbqlParsingError(wrong_aggregation_usage_error);\n        throw e;\n    }\n}\n\n\nconst GROUP_BY = 'GROUP BY';\nconst UPDATE = 'UPDATE';\nconst SELECT = 'SELECT';\nconst JOIN = 'JOIN';\nconst INNER_JOIN = 'INNER JOIN';\nconst LEFT_JOIN = 'LEFT JOIN';\nconst LEFT_OUTER_JOIN = 'LEFT OUTER JOIN';\nconst STRICT_LEFT_JOIN = 'STRICT LEFT JOIN';\nconst ORDER_BY = 'ORDER BY';\nconst WHERE = 'WHERE';\nconst LIMIT = 'LIMIT';\nconst EXCEPT = 'EXCEPT';\nconst WITH = 'WITH';\n\n\nfunction get_ambiguous_error_msg(variable_name) {\n    return `Ambiguous variable name: \"${variable_name}\" is present both in input and in join tables`;\n}\n\n\nfunction get_all_matches(regexp, text) {\n    var result = [];\n    let match_obj = null;\n    while((match_obj = regexp.exec(text)) !== null) {\n        result.push(match_obj);\n    }\n    return result;\n}\n\n\nfunction str_strip(src) {\n    return src.replace(/^ +| +$/g, '');\n}\n\n\nfunction strip_comments(cline) {\n    cline = cline.trim();\n    if (cline.startsWith('//'))\n        return '';\n    return cline;\n}\n\n\nfunction combine_string_literals(backend_expression, string_literals) {\n    for (var i = 0; i < string_literals.length; i++) {\n        backend_expression = replace_all(backend_expression, `___RBQL_STRING_LITERAL${i}___`, string_literals[i]);\n    }\n    return backend_expression;\n}\n\n\nfunction parse_basic_variables(query_text, prefix, dst_variables_map) {\n    assert(prefix == 'a' || prefix == 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}([1-9][0-9]*)(?:$|(?=[^_a-zA-Z0-9]))`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    for (let i = 0; i < matches.length; i++) {\n        let field_num = parseInt(matches[i][1]);\n        dst_variables_map[prefix + String(field_num)] = {initialize: true, index: field_num - 1};\n    }\n}\n\n\nfunction parse_array_variables(query_text, prefix, dst_variables_map) {\n    assert(prefix == 'a' || prefix == 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\[([1-9][0-9]*)\\\\]`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    for (let i = 0; i < matches.length; i++) {\n        let field_num = parseInt(matches[i][1]);\n        dst_variables_map[`${prefix}[${field_num}]`] = {initialize: true, index: field_num - 1};\n    }\n}\n\n\nfunction js_string_escape_column_name(column_name, quote_char) {\n    column_name = column_name.replace(/\\\\/g, '\\\\\\\\');\n    column_name = column_name.replace(/\\n/g, '\\\\n');\n    column_name = column_name.replace(/\\r/g, '\\\\r');\n    column_name = column_name.replace(/\\t/g, '\\\\t');\n    if (quote_char === \"'\")\n        return column_name.replace(/'/g, \"\\\\'\");\n    if (quote_char === '\"')\n        return column_name.replace(/\"/g, '\\\\\"');\n    assert(quote_char === \"`\");\n    return column_name.replace(/`/g, \"\\\\`\");\n}\n\n\nfunction query_probably_has_dictionary_variable(query_text, column_name) {\n    let rgx = new RegExp('[-a-zA-Z0-9_:;+=!.,()%^#@&* ]+', 'g');\n    let continuous_name_segments = get_all_matches(rgx, column_name);\n    for (let continuous_segment of continuous_name_segments) {\n        if (query_text.indexOf(continuous_segment) == -1)\n            return false;\n    }\n    return true;\n}\n\n\nfunction parse_dictionary_variables(query_text, prefix, column_names, dst_variables_map) {\n    // The purpose of this algorithm is to minimize number of variables in varibale_map to improve performance, ideally it should be only variables from the query\n\n    // FIXME to prevent typos in attribute names either use query-based variable parsing which can properly handle back-tick strings or wrap \"a\" and \"b\" variables with ES6 Proxies https://stackoverflow.com/a/25658975/2898283\n    assert(prefix === 'a' || prefix === 'b');\n    let dict_test_rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\[`);\n    if (query_text.search(dict_test_rgx) == -1)\n        return;\n    for (let i = 0; i < column_names.length; i++) {\n        let column_name = column_names[i];\n        if (query_probably_has_dictionary_variable(query_text, column_name)) {\n            let escaped_column_name = js_string_escape_column_name(column_name, '\"');\n            dst_variables_map[`${prefix}[\"${escaped_column_name}\"]`] = {initialize: true, index: i};\n            escaped_column_name = js_string_escape_column_name(column_name, \"'\");\n            dst_variables_map[`${prefix}['${escaped_column_name}']`] = {initialize: false, index: i};\n            escaped_column_name = js_string_escape_column_name(column_name, \"`\");\n            dst_variables_map[`${prefix}[\\`${escaped_column_name}\\`]`] = {initialize: false, index: i};\n        }\n    }\n}\n\n\nfunction parse_attribute_variables(query_text, prefix, column_names, column_names_source, dst_variables_map) {\n    // The purpose of this algorithm is to minimize number of variables in varibale_map to improve performance, ideally it should be only variables from the query\n\n    assert(prefix === 'a' || prefix === 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\.([_a-zA-Z][_a-zA-Z0-9]*)`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    let column_names_from_query = matches.map(v => v[1]);\n    for (let column_name of column_names_from_query) {\n        let zero_based_idx = column_names.indexOf(column_name);\n        if (zero_based_idx != -1) {\n            dst_variables_map[`${prefix}.${column_name}`] = {initialize: true, index: zero_based_idx};\n        } else {\n            throw new RbqlParsingError(`Unable to find column \"${column_name}\" in ${prefix == 'a' ? 'input' : 'join'} ${column_names_source}`);\n        }\n    }\n}\n\n\nfunction map_variables_directly(query_text, column_names, dst_variables_map) {\n    for (let i = 0; i < column_names.length; i++) {\n        let column_name = column_names[i];\n        if ( /^[_a-zA-Z][_a-zA-Z0-9]*$/.exec(column_name) === null)\n            throw new RbqlIOHandlingError(`Unable to use column name \"${column_name}\" as RBQL/JS variable`);\n        if (query_text.indexOf(column_name) != -1)\n            dst_variables_map[column_name] = {initialize: true, index: i};\n    }\n}\n\n\nfunction ensure_no_ambiguous_variables(query_text, input_column_names, join_column_names) {\n    let join_column_names_set = new Set(join_column_names);\n    for (let column_name of input_column_names) {\n        if (join_column_names_set.has(column_name) && query_text.indexOf(column_name) != -1) // False positive is tolerable here\n            throw new RbqlParsingError(get_ambiguous_error_msg(column_name));\n    }\n}\n\n\nfunction parse_join_expression(src) {\n    src = str_strip(src);\n    const invalid_join_syntax_error = 'Invalid join syntax. Valid syntax: <JOIN> /path/to/B/table on a... == b... [and a... == b... [and ... ]]';\n    let rgx = /^ *([^ ]+) +on +/i;\n    let match = rgx.exec(src);\n    if (match === null)\n        throw new RbqlParsingError(invalid_join_syntax_error);\n    let table_id = match[1];\n    src = src.substr(match[0].length);\n\n    let variable_pairs = [];\n    var pair_rgx = /^([^ =]+) *==? *([^ =]+)/;\n    var and_rgx = /^ +(and|&&) +/i;\n    while (true) {\n        match = pair_rgx.exec(src);\n        if (match === null)\n            throw new RbqlParsingError(invalid_join_syntax_error);\n        variable_pairs.push([match[1], match[2]]);\n        src = src.substr(match[0].length);\n        if (!src.length)\n            break;\n        match = and_rgx.exec(src);\n        if (match === null)\n            throw new RbqlParsingError(invalid_join_syntax_error);\n        src = src.substr(match[0].length);\n    }\n    return [table_id, variable_pairs];\n}\n\n\nfunction resolve_join_variables(input_variables_map, join_variables_map, variable_pairs, string_literals) {\n    let lhs_variables = [];\n    let rhs_indices = [];\n    const valid_join_syntax_msg = 'Valid JOIN syntax: <JOIN> /path/to/B/table on a... == b... [and a... == b... [and ... ]]';\n    for (let variable_pair of variable_pairs) {\n        let [join_var_1, join_var_2] = variable_pair;\n        join_var_1 = combine_string_literals(join_var_1, string_literals);\n        join_var_2 = combine_string_literals(join_var_2, string_literals);\n        if (input_variables_map.hasOwnProperty(join_var_1) && join_variables_map.hasOwnProperty(join_var_1))\n            throw new RbqlParsingError(get_ambiguous_error_msg(join_var_1));\n        if (input_variables_map.hasOwnProperty(join_var_2) && join_variables_map.hasOwnProperty(join_var_2))\n            throw new RbqlParsingError(get_ambiguous_error_msg(join_var_2));\n        if (input_variables_map.hasOwnProperty(join_var_2))\n            [join_var_1, join_var_2] = [join_var_2, join_var_1];\n\n        let [lhs_key_index, rhs_key_index] = [null, null];\n        if (['NR', 'a.NR', 'aNR'].indexOf(join_var_1) != -1) {\n            lhs_key_index = -1;\n        } else if (input_variables_map.hasOwnProperty(join_var_1)) {\n            lhs_key_index = input_variables_map[join_var_1].index;\n        } else {\n            throw new RbqlParsingError(`Unable to parse JOIN expression: Input table does not have field \"${join_var_1}\"\\n${valid_join_syntax_msg}`);\n        }\n\n        if (['b.NR', 'bNR'].indexOf(join_var_2) != -1) {\n            rhs_key_index = -1;\n        } else if (join_variables_map.hasOwnProperty(join_var_2)) {\n            rhs_key_index = join_variables_map[join_var_2].index;\n        } else {\n            throw new RbqlParsingError(`Unable to parse JOIN expression: Join table does not have field \"${join_var_2}\"\\n${valid_join_syntax_msg}`);\n        }\n\n        let lhs_join_var_expression = lhs_key_index == -1 ? 'NR' : `safe_join_get(record_a, ${lhs_key_index})`;\n        rhs_indices.push(rhs_key_index);\n        lhs_variables.push(lhs_join_var_expression);\n    }\n    return [lhs_variables, rhs_indices];\n}\n\n\nfunction generate_common_init_code(query_text, variable_prefix) {\n    assert(variable_prefix == 'a' || variable_prefix == 'b');\n    let result = [];\n    result.push(`${variable_prefix} = new Object();`);\n    let base_var = variable_prefix == 'a' ? 'NR' : 'bNR';\n    let attr_var = `${variable_prefix}.NR`;\n    if (query_text.indexOf(attr_var) != -1)\n        result.push(`${attr_var} = ${base_var};`);\n    if (variable_prefix == 'a' && query_text.indexOf('aNR') != -1)\n        result.push('aNR = NR;');\n    return result;\n}\n\n\nfunction generate_init_statements(query_text, variables_map, join_variables_map, indent) {\n    let code_lines = generate_common_init_code(query_text, 'a');\n    let simple_var_name_rgx = /^[_0-9a-zA-Z]+$/;\n    for (const [variable_name, var_info] of Object.entries(variables_map)) {\n        if (var_info.initialize) {\n            let variable_declaration_keyword = simple_var_name_rgx.exec(variable_name) ? 'var ' : '';\n            code_lines.push(`${variable_declaration_keyword}${variable_name} = safe_get(record_a, ${var_info.index});`);\n        }\n    }\n    if (join_variables_map) {\n        code_lines = code_lines.concat(generate_common_init_code(query_text, 'b'));\n        for (const [variable_name, var_info] of Object.entries(join_variables_map)) {\n            if (var_info.initialize) {\n                let variable_declaration_keyword = simple_var_name_rgx.exec(variable_name) ? 'var ' : '';\n                code_lines.push(`${variable_declaration_keyword}${variable_name} = record_b === null ? null : safe_get(record_b, ${var_info.index});`);\n            }\n        }\n    }\n    for (let i = 1; i < code_lines.length; i++) {\n        code_lines[i] = indent + code_lines[i];\n    }\n    return code_lines.join('\\n');\n}\n\n\nfunction replace_star_count(aggregate_expression) {\n    var rgx = /(^|,) *COUNT\\( *\\* *\\) *(?:$|(?=,))/ig;\n    var result = aggregate_expression.replace(rgx, '$1 COUNT(1)');\n    return str_strip(result);\n}\n\n\nfunction replace_star_vars(rbql_expression) {\n    let star_rgx = /(?:^|,) *(\\*|a\\.\\*|b\\.\\*) *(?=$|,)/g;\n    let matches = get_all_matches(star_rgx, rbql_expression);\n    let last_pos = 0;\n    let result = '';\n    for (let match of matches) {\n        let star_expression = match[1];\n        let replacement_expression = ']).concat(' + {'*': 'star_fields', 'a.*': 'record_a', 'b.*': 'record_b'}[star_expression] + ').concat([';\n        if (last_pos < match.index)\n            result += rbql_expression.substring(last_pos, match.index);\n        result += replacement_expression;\n        last_pos = match.index + match[0].length + 1; // Adding one to skip the lookahead comma\n    }\n    result += rbql_expression.substring(last_pos);\n    return result;\n}\n\n\nfunction replace_star_vars_for_header_parsing(rbql_expression) {\n    let star_rgx = /(?:(?<=^)|(?<=,)) *(\\*|a\\.\\*|b\\.\\*) *(?=$|,)/g;\n    let matches = get_all_matches(star_rgx, rbql_expression);\n    let last_pos = 0;\n    let result = '';\n    for (let match of matches) {\n        let star_expression = match[1];\n        let replacement_expression = {'*': '__RBQL_INTERNAL_STAR', 'a.*': 'a.__RBQL_INTERNAL_STAR', 'b.*': 'b.__RBQL_INTERNAL_STAR'}[star_expression];\n        if (last_pos < match.index)\n            result += rbql_expression.substring(last_pos, match.index);\n        result += replacement_expression;\n        last_pos = match.index + match[0].length;\n    }\n    result += rbql_expression.substring(last_pos);\n    return result;\n}\n\n\nfunction translate_update_expression(update_expression, input_variables_map, string_literals, indent) {\n    let first_assignment = str_strip(update_expression.split('=')[0]);\n    let first_assignment_error = `Unable to parse \"UPDATE\" expression: the expression must start with assignment, but \"${first_assignment}\" does not look like an assignable field name`;\n\n    let assignment_looking_rgx = /(?:^|,) *(a[.#a-zA-Z0-9\\[\\]_]*) *=(?=[^=])/g;\n    let update_expressions = [];\n    let pos = 0;\n    while (true) {\n        let match = assignment_looking_rgx.exec(update_expression);\n        if (update_expressions.length == 0 && (match === null || match.index != 0)) {\n            throw new RbqlParsingError(first_assignment_error);\n        }\n        if (match === null) {\n            update_expressions[update_expressions.length - 1] += str_strip(update_expression.substr(pos)) + ');';\n            break;\n        }\n        if (update_expressions.length)\n            update_expressions[update_expressions.length - 1] += str_strip(update_expression.substring(pos, match.index)) + ');';\n        let dst_var_name = combine_string_literals(str_strip(match[1]), string_literals);\n        if (!input_variables_map.hasOwnProperty(dst_var_name))\n            throw new RbqlParsingError(`Unable to parse \"UPDATE\" expression: Unknown field name: \"${dst_var_name}\"`);\n        let var_index = input_variables_map[dst_var_name].index;\n        let current_indent = update_expressions.length ? indent : '';\n        update_expressions.push(`${current_indent}safe_set(up_fields, ${var_index}, `);\n        pos = match.index + match[0].length;\n    }\n    return combine_string_literals(update_expressions.join('\\n'), string_literals);\n}\n\n\nfunction translate_select_expression(select_expression) {\n    let expression_without_stars = replace_star_count(select_expression);\n    let translated = str_strip(replace_star_vars(expression_without_stars));\n    let translated_for_header = str_strip(replace_star_vars_for_header_parsing(expression_without_stars));\n    if (!translated.length)\n        throw new RbqlParsingError('\"SELECT\" expression is empty');\n    return [`[].concat([${translated}])`, translated_for_header];\n}\n\n\nfunction separate_string_literals(rbql_expression) {\n    // The regex consists of 3 almost identicall parts, the only difference is quote type\n    var rgx = /('(\\\\(\\\\\\\\)*'|[^'])*')|(\"(\\\\(\\\\\\\\)*\"|[^\"])*\")|(`(\\\\(\\\\\\\\)*`|[^`])*`)/g;\n    var match_obj = null;\n    var format_parts = [];\n    var string_literals = [];\n    var idx_before = 0;\n    while((match_obj = rgx.exec(rbql_expression)) !== null) {\n        var literal_id = string_literals.length;\n        var string_literal = match_obj[0];\n        string_literals.push(string_literal);\n        var start_index = match_obj.index;\n        format_parts.push(rbql_expression.substring(idx_before, start_index));\n        format_parts.push(`___RBQL_STRING_LITERAL${literal_id}___`);\n        idx_before = rgx.lastIndex;\n    }\n    format_parts.push(rbql_expression.substring(idx_before));\n    var format_expression = format_parts.join('');\n    format_expression = format_expression.replace(/\\t/g, ' ');\n    return [format_expression, string_literals];\n}\n\n\nfunction locate_statements(rbql_expression) {\n    let statement_groups = [];\n    statement_groups.push([STRICT_LEFT_JOIN, LEFT_OUTER_JOIN, LEFT_JOIN, INNER_JOIN, JOIN]);\n    statement_groups.push([SELECT]);\n    statement_groups.push([ORDER_BY]);\n    statement_groups.push([WHERE]);\n    statement_groups.push([UPDATE]);\n    statement_groups.push([GROUP_BY]);\n    statement_groups.push([LIMIT]);\n    statement_groups.push([EXCEPT]);\n    var result = [];\n    for (var ig = 0; ig < statement_groups.length; ig++) {\n        for (var is = 0; is < statement_groups[ig].length; is++) {\n            var statement = statement_groups[ig][is];\n            var rgxp = new RegExp('(?:^| )' + replace_all(statement, ' ', ' *') + '(?= )', 'ig');\n            var matches = get_all_matches(rgxp, rbql_expression);\n            if (!matches.length)\n                continue;\n            if (matches.length > 1)\n                throw new RbqlParsingError(`More than one \"${statement}\" statements found`);\n            assert(matches.length == 1);\n            var match = matches[0];\n            var match_str = match[0];\n            result.push([match.index, match.index + match_str.length, statement]);\n            break; // Break to avoid matching a sub-statement from the same group e.g. \"INNER JOIN\" -> \"JOIN\"\n        }\n    }\n    result.sort(function(a, b) { return a[0] - b[0]; });\n    return result;\n}\n\n\nfunction separate_actions(rbql_expression) {\n    rbql_expression = str_strip(rbql_expression);\n    var result = {};\n    let with_match = /^(.*)  *[Ww][Ii][Tt][Hh] *\\(([a-z]{4,20})\\) *$/.exec(rbql_expression);\n    if (with_match !== null) {\n        rbql_expression = with_match[1];\n        result[WITH] = with_match[2];\n    }\n    var ordered_statements = locate_statements(rbql_expression);\n    for (var i = 0; i < ordered_statements.length; i++) {\n        var statement_start = ordered_statements[i][0];\n        var span_start = ordered_statements[i][1];\n        var statement = ordered_statements[i][2];\n        var span_end = i + 1 < ordered_statements.length ? ordered_statements[i + 1][0] : rbql_expression.length;\n        assert(statement_start < span_start);\n        assert(span_start <= span_end);\n        var span = rbql_expression.substring(span_start, span_end);\n        var statement_params = {};\n        if ([STRICT_LEFT_JOIN, LEFT_OUTER_JOIN, LEFT_JOIN, INNER_JOIN, JOIN].indexOf(statement) != -1) {\n            statement_params['join_subtype'] = statement;\n            statement = JOIN;\n        }\n\n        if (statement == UPDATE) {\n            if (statement_start != 0)\n                throw new RbqlParsingError('UPDATE keyword must be at the beginning of the query');\n            span = span.replace(/^ *SET/i, '');\n        }\n\n        if (statement == ORDER_BY) {\n            span = span.replace(/ ASC *$/i, '');\n            var new_span = span.replace(/ DESC *$/i, '');\n            if (new_span != span) {\n                span = new_span;\n                statement_params['reverse'] = true;\n            } else {\n                statement_params['reverse'] = false;\n            }\n        }\n\n        if (statement == SELECT) {\n            if (statement_start != 0)\n                throw new RbqlParsingError('SELECT keyword must be at the beginning of the query');\n            let match = /^ *TOP *([0-9]+) /i.exec(span);\n            if (match !== null) {\n                statement_params['top'] = parseInt(match[1]);\n                span = span.substr(match.index + match[0].length);\n            }\n            match = /^ *DISTINCT *(COUNT)? /i.exec(span);\n            if (match !== null) {\n                statement_params['distinct'] = true;\n                if (match[1]) {\n                    statement_params['distinct_count'] = true;\n                }\n                span = span.substr(match.index + match[0].length);\n            }\n        }\n        statement_params['text'] = str_strip(span);\n        result[statement] = statement_params;\n    }\n    if (!result.hasOwnProperty(SELECT) && !result.hasOwnProperty(UPDATE)) {\n        throw new RbqlParsingError('Query must contain either SELECT or UPDATE statement');\n    }\n    assert(result.hasOwnProperty(SELECT) != result.hasOwnProperty(UPDATE));\n    return result;\n}\n\n\nfunction find_top(rb_actions) {\n    if (rb_actions.hasOwnProperty(LIMIT)) {\n        var rgx = /^[0-9]+$/;\n        if (rgx.exec(rb_actions[LIMIT]['text']) === null) {\n            throw new RbqlParsingError('LIMIT keyword must be followed by an integer');\n        }\n        var result = parseInt(rb_actions[LIMIT]['text']);\n        return result;\n    }\n    var select_action = rb_actions[SELECT];\n    if (select_action && select_action.hasOwnProperty('top')) {\n        return select_action['top'];\n    }\n    return null;\n}\n\n\nfunction translate_except_expression(except_expression, input_variables_map, string_literals, input_header) {\n    let skip_vars = except_expression.split(',');\n    skip_vars = skip_vars.map(str_strip);\n    let skip_indices = [];\n    for (let var_name of skip_vars) {\n        var_name = combine_string_literals(var_name, string_literals);\n        if (!input_variables_map.hasOwnProperty(var_name))\n            throw new RbqlParsingError(`Unknown field in EXCEPT expression: \"${var_name}\"`);\n        skip_indices.push(input_variables_map[var_name].index);\n    }\n    skip_indices = skip_indices.sort((a, b) => a - b);\n    let output_header = input_header === null ? null : select_except(input_header, skip_indices);\n    let indices_str = skip_indices.join(',');\n    return [output_header, `select_except(record_a, [${indices_str}])`];\n}\n\n\nclass HashJoinMap {\n    constructor(record_iterator, key_indices) {\n        this.max_record_len = 0;\n        this.hash_map = new Map();\n        this.record_iterator = record_iterator;\n        this.nr = 0;\n        if (key_indices.length == 1) {\n            this.key_index = key_indices[0];\n            this.key_indices = null;\n            this.polymorphic_get_key = this.get_single_key;\n        } else {\n            this.key_index = null;\n            this.key_indices = key_indices;\n            this.polymorphic_get_key = this.get_multi_key;\n        }\n    }\n\n    get_single_key(nr, fields) {\n        if (this.key_index >= fields.length)\n            throw new RbqlRuntimeError(`No field with index ${this.key_index + 1} at record ${this.nr} in \"B\" table`);\n        return this.key_index === -1 ? this.nr : fields[this.key_index];\n    };\n\n    get_multi_key(nr, fields) {\n        let result = [];\n        for (let ki of this.key_indices) {\n            if (ki >= fields.length)\n                throw new RbqlRuntimeError(`No field with index ${ki + 1} at record ${this.nr} in \"B\" table`);\n            result.push(ki === -1 ? this.nr : fields[ki]);\n        }\n        return JSON.stringify(result);\n    };\n\n    async build() {\n        while (true) {\n            let fields = await this.record_iterator.get_record();\n            if (fields === null)\n                break;\n            this.nr += 1;\n            let nf = fields.length;\n            this.max_record_len = Math.max(this.max_record_len, nf);\n            let key = this.polymorphic_get_key(this.nr, fields);\n            let key_records = this.hash_map.get(key);\n            if (key_records === undefined) {\n                this.hash_map.set(key, [[this.nr, nf, fields]]);\n            } else {\n                key_records.push([this.nr, nf, fields]);\n            }\n        }\n    };\n\n    get_join_records(key) {\n        let result = this.hash_map.get(key);\n        if (result === undefined)\n            return [];\n        return result;\n    };\n\n    get_warnings() {\n        return this.record_iterator.get_warnings();\n    };\n}\n\n\nfunction cleanup_query(query_text) {\n    return query_text.split('\\n').map(strip_comments).filter(line => line.length).join(' ').replace(/;+$/g, '');\n}\n\n\nfunction remove_redundant_table_name(query_text) {\n    query_text = str_strip(query_text.replace(/ +from +a(?: +|$)/gi, ' '));\n    query_text = str_strip(query_text.replace(/^ *update +a +set /gi, 'update '));\n    return query_text;\n}\n\n\nfunction select_output_header(input_header, join_header, query_column_infos) {\n    if (input_header === null && join_header === null)\n        return null;\n    if (input_header === null)\n        input_header = [];\n    if (join_header === null)\n        join_header = [];\n    let output_header = [];\n    for (let qci of query_column_infos) {\n        // TODO refactor this and python version: extract this code into a function instead to always return something\n        if (qci === null) {\n            output_header.push('col' + (output_header.length + 1));\n        } else if (qci.is_star) {\n            if (qci.table_name === null) {\n                output_header = output_header.concat(input_header).concat(join_header);\n            } else if (qci.table_name === 'a') {\n                output_header = output_header.concat(input_header);\n            } else if (qci.table_name === 'b') {\n                output_header = output_header.concat(join_header);\n            }\n        } else if (qci.column_name !== null) {\n            output_header.push(qci.column_name);\n        } else if (qci.column_index !== null) {\n            if (qci.table_name == 'a' && qci.column_index < input_header.length) {\n                output_header.push(input_header[qci.column_index]);\n            } else if (qci.table_name == 'b' && qci.column_index < join_header.length) {\n                output_header.push(join_header[qci.column_index]);\n            } else {\n                output_header.push('col' + (output_header.length + 1));\n            }\n        } else { // Should never happen\n            output_header.push('col' + (output_header.length + 1));\n        }\n    }\n    return output_header;\n}\n\n\nfunction sample_first_two_inconsistent_records(inconsistent_records_info) {\n    let entries = Array.from(inconsistent_records_info.entries());\n    entries.sort(function(a, b) { return a[1] - b[1]; });\n    assert(entries.length > 1);\n    let [num_fields_1, record_num_1] = entries[0];\n    let [num_fields_2, record_num_2] = entries[1];\n    return [record_num_1, num_fields_1, record_num_2, num_fields_2];\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1} -> ${num_fields_1} fields, record ${record_num_2} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nclass RBQLInputIterator {\n    constructor(){}\n    stop() {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    async get_variables_map(query_text) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    async get_record() {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    handle_query_modifier() {\n        return; // Reimplement if you need to handle a boolean query modifier that can be used like this: `SELECT * WITH (modifiername)`\n    }\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    }\n    async get_header() {\n        return null; // Reimplement if your class can provide input header\n    }\n}\n\n\nclass RBQLOutputWriter {\n    constructor(){}\n\n    async write(fields) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n\n    async finish() {\n        // Reimplement if your class needs to do something on finish e.g. cleanup\n    };\n\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    };\n\n    set_header() {\n        return; // Reimplement if your class can handle output headers in a meaningful way\n    }\n}\n\n\nclass RBQLTableRegistry {\n    constructor(){}\n\n    get_iterator_by_table_id(table_id) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    };\n}\n\n\nclass TableIterator extends RBQLInputIterator {\n    constructor(table, column_names=null, normalize_column_names=true, variable_prefix='a') {\n        super();\n        this.table = table;\n        this.column_names = column_names;\n        this.normalize_column_names = normalize_column_names;\n        this.variable_prefix = variable_prefix;\n        this.nr = 0;\n        this.fields_info = new Map();\n        this.stopped = false;\n    }\n\n\n    stop() {\n        this.stopped = true;\n    };\n\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        parse_array_variables(query_text, this.variable_prefix, variable_map);\n        if (this.column_names !== null) {\n            if (this.table.length && this.column_names.length != this.table[0].length)\n                throw new RbqlIOHandlingError('List of column names and table records have different lengths');\n            if (this.normalize_column_names) {\n                parse_dictionary_variables(query_text, this.variable_prefix, this.column_names, variable_map);\n                parse_attribute_variables(query_text, this.variable_prefix, this.column_names, 'column names list', variable_map);\n            } else {\n                map_variables_directly(query_text, this.column_names, variable_map);\n            }\n        }\n        return variable_map;\n    };\n\n\n    async get_record() {\n        if (this.stopped)\n            return null;\n        if (this.nr >= this.table.length)\n            return null;\n        let record = this.table[this.nr];\n        this.nr += 1;\n        let num_fields = record.length;\n        if (!this.fields_info.has(num_fields))\n            this.fields_info.set(num_fields, this.nr);\n        return record;\n    };\n\n    get_warnings() {\n        if (this.fields_info.size > 1)\n            return [make_inconsistent_num_fields_warning('input', this.fields_info)];\n        return [];\n    };\n\n    async get_header() {\n        return this.column_names;\n    }\n}\n\n\nclass TableWriter extends RBQLOutputWriter {\n    constructor(external_table) {\n        super();\n        this.table = external_table;\n        this.header = null;\n    }\n\n    async write(fields) {\n        this.table.push(fields);\n        return true;\n    };\n\n    set_header(header) {\n        this.header = header;\n    }\n}\n\n\nclass SingleTableRegistry extends RBQLTableRegistry {\n    constructor(table, column_names=null, normalize_column_names=true, table_id='b') {\n        super();\n        this.table = table;\n        this.table_id = table_id;\n        this.column_names = column_names;\n        this.normalize_column_names = normalize_column_names;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        if (table_id.toLowerCase() !== this.table_id)\n            throw new RbqlIOHandlingError(`Unable to find join table: \"${table_id}\"`);\n        return new TableIterator(this.table, this.column_names, this.normalize_column_names, 'b');\n    };\n}\n\n\nasync function shallow_parse_input_query(query_text, input_iterator, join_tables_registry, query_context) {\n    query_text = cleanup_query(query_text);\n    var [format_expression, string_literals] = separate_string_literals(query_text);\n    format_expression = remove_redundant_table_name(format_expression);\n\n    var rb_actions = separate_actions(format_expression);\n    if (rb_actions.hasOwnProperty(WITH)) {\n        input_iterator.handle_query_modifier(rb_actions[WITH]);\n    }\n    var input_variables_map = await input_iterator.get_variables_map(query_text);\n\n    if (rb_actions.hasOwnProperty(ORDER_BY) && rb_actions.hasOwnProperty(UPDATE))\n        throw new RbqlParsingError('\"ORDER BY\" is not allowed in \"UPDATE\" queries');\n\n    if (rb_actions.hasOwnProperty(GROUP_BY)) {\n        if (rb_actions.hasOwnProperty(ORDER_BY) || rb_actions.hasOwnProperty(UPDATE))\n            throw new RbqlParsingError('\"ORDER BY\", \"UPDATE\" and \"DISTINCT\" keywords are not allowed in aggregate queries');\n        query_context.aggregation_key_expression = '[' + combine_string_literals(rb_actions[GROUP_BY]['text'], string_literals) + ']';\n    }\n\n    let join_variables_map = null;\n    let join_header = null;\n    if (rb_actions.hasOwnProperty(JOIN)) {\n        var [rhs_table_id, variable_pairs] = parse_join_expression(rb_actions[JOIN]['text']);\n        if (join_tables_registry === null)\n            throw new RbqlParsingError('JOIN operations are not supported by the application');\n        let join_record_iterator = join_tables_registry.get_iterator_by_table_id(rhs_table_id);\n        if (!join_record_iterator)\n            throw new RbqlParsingError(`Unable to find join table: \"${rhs_table_id}\"`);\n        if (rb_actions.hasOwnProperty(WITH)) {\n            join_record_iterator.handle_query_modifier(rb_actions[WITH]);\n        }\n        join_variables_map = await join_record_iterator.get_variables_map(query_text);\n        join_header = await join_record_iterator.get_header();\n        let [lhs_variables, rhs_indices] = resolve_join_variables(input_variables_map, join_variables_map, variable_pairs, string_literals);\n        let sql_join_type = {'JOIN': InnerJoiner, 'INNER JOIN': InnerJoiner, 'LEFT JOIN': LeftJoiner, 'LEFT OUTER JOIN': LeftJoiner, 'STRICT LEFT JOIN': StrictLeftJoiner}[rb_actions[JOIN]['join_subtype']];\n        query_context.lhs_join_var_expression = lhs_variables.length == 1 ? lhs_variables[0] : 'JSON.stringify([' + lhs_variables.join(',') + '])';\n        query_context.join_map_impl = new HashJoinMap(join_record_iterator, rhs_indices);\n        await query_context.join_map_impl.build();\n        query_context.join_map = new sql_join_type(query_context.join_map_impl);\n    }\n\n    query_context.variables_init_code = combine_string_literals(generate_init_statements(format_expression, input_variables_map, join_variables_map, ' '.repeat(4)), string_literals);\n\n    if (rb_actions.hasOwnProperty(WHERE)) {\n        var where_expression = rb_actions[WHERE]['text'];\n        if (/[^><!=]=[^=]/.exec(where_expression))\n            throw new RbqlParsingError('Assignments \"=\" are not allowed in \"WHERE\" expressions. For equality test use \"==\" or \"===\"');\n        query_context.where_expression = combine_string_literals(where_expression, string_literals);\n    }\n\n    let input_header = await input_iterator.get_header();\n    if (rb_actions.hasOwnProperty(UPDATE)) {\n        var update_expression = translate_update_expression(rb_actions[UPDATE]['text'], input_variables_map, string_literals, ' '.repeat(8));\n        query_context.update_expressions = combine_string_literals(update_expression, string_literals);\n        query_context.writer.set_header(input_header);\n    }\n\n    if (rb_actions.hasOwnProperty(SELECT)) {\n        query_context.top_count = find_top(rb_actions);\n        if (rb_actions.hasOwnProperty(EXCEPT)) {\n            if (rb_actions.hasOwnProperty(JOIN)) {\n                throw new RbqlParsingError('EXCEPT and JOIN are not allowed in the same query');\n            }\n            let [output_header, select_expression] = translate_except_expression(rb_actions[EXCEPT]['text'], input_variables_map, string_literals, input_header);\n            query_context.select_expression = select_expression;\n            query_context.writer.set_header(output_header);\n        } else {\n            let [select_expression, select_expression_for_ast] = translate_select_expression(rb_actions[SELECT]['text']);\n            query_context.select_expression = combine_string_literals(select_expression, string_literals);\n            let column_infos = adhoc_parse_select_expression_to_column_infos(select_expression_for_ast, string_literals);\n            let output_header = select_output_header(input_header, join_header, column_infos);\n            query_context.writer.set_header(output_header);\n        }\n\n        query_context.writer = new TopWriter(query_context.writer, query_context.top_count);\n        if (rb_actions[SELECT].hasOwnProperty('distinct_count')) {\n            query_context.writer = new UniqCountWriter(query_context.writer);\n        } else if (rb_actions[SELECT].hasOwnProperty('distinct')) {\n            query_context.writer = new UniqWriter(query_context.writer);\n        }\n    }\n\n    if (rb_actions.hasOwnProperty(ORDER_BY)) {\n        query_context.sort_key_expression = combine_string_literals(rb_actions[ORDER_BY]['text'], string_literals);\n        let reverse_sort = rb_actions[ORDER_BY]['reverse'];\n        query_context.writer = new SortedWriter(query_context.writer, reverse_sort);\n    }\n}\n\n\nasync function query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry=null, user_init_code='') {\n    query_context = new RBQLContext(query_text, input_iterator, output_writer, user_init_code);\n    await shallow_parse_input_query(query_text, input_iterator, join_tables_registry, query_context);\n    await compile_and_run(query_context);\n    await query_context.writer.finish();\n    output_warnings.push(...input_iterator.get_warnings());\n    if (query_context.join_map_impl)\n        output_warnings.push(...query_context.join_map_impl.get_warnings());\n    output_warnings.push(...output_writer.get_warnings());\n}\n\n\nasync function query_table(query_text, input_table, output_table, output_warnings, join_table=null, input_column_names=null, join_column_names=null, output_column_names=null, normalize_column_names=true, user_init_code='') {\n    if (!normalize_column_names && input_column_names !== null && join_column_names !== null)\n        ensure_no_ambiguous_variables(query_text, input_column_names, join_column_names);\n    let input_iterator = new TableIterator(input_table, input_column_names, normalize_column_names);\n    let output_writer = new TableWriter(output_table);\n    let join_tables_registry = join_table === null ? null : new SingleTableRegistry(join_table, join_column_names, normalize_column_names);\n    await query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    if (output_column_names !== null) {\n        assert(output_column_names.length == 0, '`output_column_names` param must be an empty list or null');\n        if (output_writer.header !== null) {\n            for (let column_name of output_writer.header) {\n                output_column_names.push(column_name);\n            }\n        }\n    }\n}\n\n\nfunction exception_to_error_info(e) {\n    let exceptions_type_map = {\n        'RbqlRuntimeError': 'query execution',\n        'RbqlParsingError': 'query parsing',\n        'SyntaxError': 'JS syntax error',\n        'RbqlIOHandlingError': 'IO handling'\n    };\n    let error_type = 'unexpected';\n    if (e.constructor && e.constructor.name && exceptions_type_map.hasOwnProperty(e.constructor.name)) {\n        error_type = exceptions_type_map[e.constructor.name];\n    }\n    let error_msg = e.hasOwnProperty('message') ? e.message : String(e);\n    return [error_type, error_msg];\n}\n\n\nexports.query = query;\nexports.query_table = query_table;\nexports.RBQLInputIterator = RBQLInputIterator;\nexports.RBQLOutputWriter = RBQLOutputWriter;\nexports.RBQLTableRegistry = RBQLTableRegistry;\n\nexports.version = RBQL_VERSION;\nexports.TableIterator = TableIterator;\nexports.TableWriter = TableWriter;\nexports.SingleTableRegistry = SingleTableRegistry;\nexports.exception_to_error_info = exception_to_error_info;\n\n\n// The functions below are exported just for unit tests, they are not part of the rbql API\n// TODO exports through the special unit_test proxy e.g. exports.unit_test.parse_basic_variables = parse_basic_variables;\nexports.parse_basic_variables = parse_basic_variables;\nexports.parse_array_variables = parse_array_variables;\nexports.parse_dictionary_variables = parse_dictionary_variables;\nexports.parse_attribute_variables = parse_attribute_variables;\nexports.get_all_matches = get_all_matches;\nexports.strip_comments = strip_comments;\nexports.separate_actions = separate_actions;\nexports.separate_string_literals = separate_string_literals;\nexports.combine_string_literals = combine_string_literals;\nexports.parse_join_expression = parse_join_expression;\nexports.resolve_join_variables = resolve_join_variables;\nexports.translate_update_expression = translate_update_expression;\nexports.translate_select_expression = translate_select_expression;\nexports.translate_except_expression = translate_except_expression;\nexports.like_to_regex = like_to_regex;\nexports.adhoc_parse_select_expression_to_column_infos = adhoc_parse_select_expression_to_column_infos;\nexports.replace_star_count = replace_star_count;\nexports.replace_star_vars_for_header_parsing = replace_star_vars_for_header_parsing;\nexports.select_output_header = select_output_header;\nexports.sample_first_two_inconsistent_records = sample_first_two_inconsistent_records;\n\n}(typeof exports === 'undefined' ? this.rbql = {} : exports));\n","const fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst util = require('util');\n\nconst rbql = require('./rbql.js');\nconst csv_utils = require('./csv_utils.js');\n\n\nconst utf_decoding_error = 'Unable to decode input table as UTF-8. Use binary (latin-1) encoding instead';\n\n\nclass RbqlIOHandlingError extends Error {}\nclass AssertionError extends Error {}\n\n\n// TODO performance improvement: replace smart_split() with polymorphic_split()\n\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction interpret_named_csv_format(format_name) {\n    format_name = format_name.toLowerCase();\n    if (format_name == 'monocolumn')\n        return ['', 'monocolumn'];\n    if (format_name == 'csv')\n        return [',', 'quoted'];\n    if (format_name == 'tsv')\n        return ['\\t', 'simple'];\n    throw new RbqlIOHandlingError(`Unknown format name: \"${format_name}\"`);\n}\n\n\n\nfunction is_ascii(str) {\n    return /^[\\x00-\\x7F]*$/.test(str);\n}\n\n\nfunction read_user_init_code(rbql_init_source_path) {\n    return fs.readFileSync(rbql_init_source_path, 'utf-8');\n}\n\n\nfunction remove_utf8_bom(line, assumed_source_encoding) {\n    if (assumed_source_encoding == 'binary' && line.length >= 3 && line.charCodeAt(0) === 0xEF && line.charCodeAt(1) === 0xBB && line.charCodeAt(2) === 0xBF) {\n        return line.substring(3);\n    }\n    if (assumed_source_encoding == 'utf-8' && line.length >= 1 && line.charCodeAt(0) === 0xFEFF) {\n        return line.substring(1);\n    }\n    return line;\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1} -> ${num_fields_1} fields, record ${record_num_2} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nfunction expanduser(filepath) {\n    if (filepath.charAt(0) === '~') {\n        return path.join(os.homedir(), filepath.slice(1));\n    }\n    return filepath;\n}\n\n\nfunction try_read_index(index_path) {\n    var content = null;\n    try {\n        content = fs.readFileSync(index_path, 'utf-8');\n    } catch (e) {\n        return [];\n    }\n    var lines = content.split('\\n');\n    var records = [];\n    for (var i = 0; i < lines.length; i++) {\n        if (!lines[i])\n            continue;\n        var record = lines[i].split('\\t');\n        records.push(record);\n    }\n    return records;\n}\n\n\nfunction get_index_record(index_path, key) {\n    var records = try_read_index(index_path);\n    for (var i = 0; i < records.length; i++) {\n        if (records[i].length && records[i][0] == key) {\n            return records[i];\n        }\n    }\n    return null;\n}\n\n\nfunction find_table_path(main_table_dir, table_id) {\n    // If table_id is a relative path it could be relative either to the current directory or to the main table dir.\n    var candidate_path = expanduser(table_id);\n    if (fs.existsSync(candidate_path)) {\n        return candidate_path;\n    }\n    if (main_table_dir && !path.isAbsolute(candidate_path)) {\n        candidate_path = path.join(main_table_dir, candidate_path);\n        if (fs.existsSync(candidate_path)) {\n            return candidate_path;\n        }\n    }\n    let table_names_settings_path = path.join(os.homedir(), '.rbql_table_names');\n    var name_record = get_index_record(table_names_settings_path, table_id);\n    if (name_record && name_record.length > 1 && fs.existsSync(name_record[1])) {\n        return name_record[1];\n    }\n    return null;\n}\n\n\nclass RecordQueue {\n    // TODO compare performance with a linked list\n    constructor() {\n        this.push_stack = [];\n        this.pull_stack = [];\n    }\n\n    enqueue(record) {\n        this.push_stack.push(record);\n    }\n\n    dequeue() {\n        if (!this.pull_stack.length) {\n            if (!this.push_stack.length)\n                return null;\n            this.pull_stack = this.push_stack;\n            this.pull_stack.reverse();\n            this.push_stack = [];\n        }\n        return this.pull_stack.pop();\n    }\n}\n\n\nclass CSVRecordIterator extends rbql.RBQLInputIterator {\n    // CSVRecordIterator implements a typical async producer-consumer model with an internal buffer:\n    // get_record() - consumer\n    // stream.on('data') - producer\n    constructor(stream, csv_path, encoding, delim, policy, has_header=false, comment_prefix=null, table_name='input', variable_prefix='a') {\n        super();\n        this.stream = stream;\n        this.csv_path = csv_path;\n        assert((this.stream === null) != (this.csv_path === null));\n        this.encoding = encoding;\n        this.delim = delim;\n        this.policy = policy;\n\n        this.has_header = has_header;\n        this.first_record = null;\n        this.first_record_should_be_emitted = !has_header;\n        this.header_preread_complete = false;\n\n        this.table_name = table_name;\n        this.variable_prefix = variable_prefix;\n        this.comment_prefix = comment_prefix;\n\n        this.decoder = null;\n        if (encoding == 'utf-8' && this.csv_path === null) {\n            // Unfortunately util.TextDecoder has serious flaws:\n            // 1. It doesn't work in Node without ICU: https://nodejs.org/api/util.html#util_new_textdecoder_encoding_options\n            // 2. It is broken in Electron: https://github.com/electron/electron/issues/18733\n\n            // Technically we can implement our own custom streaming text decoder, using the 3 following technologies:\n            // 1. decode-encode validation method from https://stackoverflow.com/a/32279283/2898283\n            // 2. Scanning buffer chunks for non-continuation utf-8 bytes from the end of the buffer:\n            //    src_buffer -> (buffer_before, buffer_after) where buffer_after is very small(a couple of bytes) and buffer_before is large and ends with a non-continuation bytes\n            // 3. Internal buffer to store small tail part from the previous buffer\n            this.decoder = new util.TextDecoder(encoding, {fatal: true, stream: true});\n        }\n\n        this.input_exhausted = false;\n        this.started = false;\n\n        this.utf8_bom_removed = false; // BOM doesn't get automatically removed by the decoder when utf-8 file is treated as latin-1\n        this.first_defective_line = null;\n\n        this.fields_info = new Map();\n        this.NR = 0; // Record number\n        this.NL = 0; // Line number (NL != NR when the CSV file has comments or multiline fields)\n\n        this.line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n\n        this.partially_decoded_line = '';\n        this.partially_decoded_line_ends_with_cr = false;\n\n        // Holds an external \"resolve\" function which is called when everything is fine.\n        this.resolve_current_record = null;\n        // Holds an external \"reject\" function which is called when error has occured.\n        this.reject_current_record = null;\n        // Holds last exception if we don't have any reject callbacks from clients yet.\n        this.current_exception = null;\n\n        this.produced_records_queue = new RecordQueue();\n\n        this.process_line_polymorphic = policy == 'quoted_rfc' ? this.process_partial_rfc_record_line : this.process_record_line_simple;\n    }\n\n\n    handle_query_modifier(modifier) {\n        // For `... WITH (header) ...` syntax\n        if (['header', 'headers'].indexOf(modifier) != -1) {\n            this.has_header = true;\n            this.first_record_should_be_emitted = false;\n        }\n        if (['noheader', 'noheaders'].indexOf(modifier) != -1) {\n            this.has_header = false;\n            this.first_record_should_be_emitted = true;\n        }\n    }\n\n\n    reset_external_callbacks() {\n        // Drop external callbacks simultaneously since promises can only resolve once, see: https://stackoverflow.com/a/18218542/2898283\n        this.reject_current_record = null;\n        this.resolve_current_record = null;\n    }\n\n    try_propagate_exception() {\n        if (this.current_exception && this.reject_current_record) {\n            let reject = this.reject_current_record;\n            let exception = this.current_exception;\n            this.reset_external_callbacks();\n            this.current_exception = null;\n            reject(exception);\n        }\n    }\n\n\n    store_or_propagate_exception(exception) {\n        if (this.current_exception === null)\n            // Ignore subsequent exceptions if we already have an unreported error. This way we prioritize earlier errors over the more recent ones.\n            this.current_exception = exception;\n        this.try_propagate_exception();\n    }\n\n\n    async preread_first_record() {\n        if (this.header_preread_complete)\n            return;\n        this.first_record = await this.get_record();\n        this.header_preread_complete = true; // We must set header_preread_complete to true after calling get_record(), because get_record() uses it internally.\n        if (this.first_record === null) {\n            return;\n        }\n        if (this.stream)\n            this.stream.pause();\n        this.first_record = this.first_record.slice();\n    };\n\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        rbql.parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        rbql.parse_array_variables(query_text, this.variable_prefix, variable_map);\n\n        await this.preread_first_record();\n        if (this.has_header && this.first_record) {\n            rbql.parse_attribute_variables(query_text, this.variable_prefix, this.first_record, 'CSV header line', variable_map);\n            rbql.parse_dictionary_variables(query_text, this.variable_prefix, this.first_record, variable_map);\n        }\n        return variable_map;\n    };\n\n    async get_header() {\n        await this.preread_first_record();\n        return this.has_header ? this.first_record : null;\n    }\n\n\n    try_resolve_next_record() {\n        this.try_propagate_exception();\n        if (this.resolve_current_record === null)\n            return;\n\n        let record = null;\n        if (this.first_record_should_be_emitted && this.header_preread_complete) {\n            this.first_record_should_be_emitted = false;\n            record = this.first_record;\n        } else {\n            record = this.produced_records_queue.dequeue();\n        }\n\n        if (record === null && !this.input_exhausted)\n            return;\n        let resolve = this.resolve_current_record;\n        this.reset_external_callbacks();\n        resolve(record);\n    };\n\n\n    async get_record() {\n        if (!this.started)\n            await this.start();\n        if (this.stream && this.stream.isPaused())\n            this.stream.resume();\n\n        let parent_iterator = this;\n        let current_record_promise = new Promise(function(resolve, reject) {\n            parent_iterator.resolve_current_record = resolve;\n            parent_iterator.reject_current_record = reject;\n        });\n        this.try_resolve_next_record();\n        return current_record_promise;\n    };\n\n\n    async get_all_records(num_records=null) {\n        let records = [];\n        while (true) {\n            let record = await this.get_record();\n            if (record === null)\n                break;\n            records.push(record);\n            if (num_records && records.length >= num_records) {\n                this.stop();\n                break;\n            }\n        }\n        return records;\n    };\n\n\n    process_record_line_simple(line) {\n        if (this.comment_prefix && line.startsWith(this.comment_prefix))\n            return; // Just skip the line\n        this.process_record_line(line);\n    }\n\n\n    process_record_line(line) {\n        this.NR += 1;\n        var [record, warning] = csv_utils.smart_split(line, this.delim, this.policy, false);\n        if (warning) {\n            if (this.first_defective_line === null) {\n                this.first_defective_line = this.NL;\n                if (this.policy == 'quoted_rfc')\n                    this.store_or_propagate_exception(new RbqlIOHandlingError(`Inconsistent double quote escaping in ${this.table_name} table at record ${this.NR}, line ${this.NL}`));\n            }\n        }\n        let num_fields = record.length;\n        if (!this.fields_info.has(num_fields))\n            this.fields_info.set(num_fields, this.NR);\n        this.produced_records_queue.enqueue(record);\n        this.try_resolve_next_record();\n    };\n\n\n    process_partial_rfc_record_line(line) {\n        this.line_aggregator.add_line(line);\n        if (this.line_aggregator.has_comment_line) {\n            this.line_aggregator.reset();\n        } else if (this.line_aggregator.has_full_record) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n            this.line_aggregator.reset();\n        }\n    };\n\n\n    process_line(line) {\n        this.NL += 1;\n        if (this.NL === 1) {\n            var clean_line = remove_utf8_bom(line, this.encoding);\n            if (clean_line != line) {\n                line = clean_line;\n                this.utf8_bom_removed = true;\n            }\n        }\n        this.process_line_polymorphic(line);\n    };\n\n\n    process_data_stream_chunk(data_chunk) {\n        let decoded_string = null;\n        if (this.decoder) {\n            try {\n                decoded_string = this.decoder.decode(data_chunk);\n            } catch (e) {\n                if (e instanceof TypeError) {\n                    this.store_or_propagate_exception(new RbqlIOHandlingError(utf_decoding_error));\n                } else {\n                    this.store_or_propagate_exception(e);\n                }\n                return;\n            }\n        } else {\n            decoded_string = data_chunk.toString(this.encoding);\n        }\n        let line_starts_with_lf = decoded_string.length && decoded_string[0] == '\\n';\n        let first_line_index = line_starts_with_lf && this.partially_decoded_line_ends_with_cr ? 1 : 0;\n        this.partially_decoded_line_ends_with_cr = decoded_string.length && decoded_string[decoded_string.length - 1] == '\\r';\n        let lines = csv_utils.split_lines(decoded_string);\n        lines[0] = this.partially_decoded_line + lines[0];\n        assert(first_line_index == 0 || lines[0].length == 0);\n        this.partially_decoded_line = lines.pop();\n        for (let i = first_line_index; i < lines.length; i++) {\n            this.process_line(lines[i]);\n        }\n    };\n\n\n    process_data_bulk(data_blob) {\n        let decoded_string = data_blob.toString(this.encoding);\n        if (this.encoding == 'utf-8') {\n            // Using hacky comparison method from here: https://stackoverflow.com/a/32279283/2898283\n            // TODO get rid of this once TextDecoder is really fixed or when alternative method of reliable decoding appears\n            let control_buffer = Buffer.from(decoded_string, 'utf-8');\n            if (Buffer.compare(data_blob, control_buffer) != 0) {\n                this.store_or_propagate_exception(new RbqlIOHandlingError(utf_decoding_error));\n                return;\n            }\n        }\n        let lines = csv_utils.split_lines(decoded_string);\n        if (lines.length && lines[lines.length - 1].length == 0)\n            lines.pop();\n        for (let i = 0; i < lines.length; i++) {\n            this.process_line(lines[i]);\n        }\n        if (this.line_aggregator.is_inside_multiline_record()) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n        }\n        this.input_exhausted = true;\n        this.try_resolve_next_record(); // Should be a NOOP here?\n    }\n\n\n    process_data_stream_end() {\n        this.input_exhausted = true;\n        if (this.partially_decoded_line.length) {\n            let last_line = this.partially_decoded_line;\n            this.partially_decoded_line = '';\n            this.process_line(last_line);\n        }\n        if (this.line_aggregator.is_inside_multiline_record()) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n        }\n        this.try_resolve_next_record();\n    };\n\n\n    stop() {\n        if (this.stream)\n            this.stream.destroy(); // TODO consider using pause() instead\n    };\n\n\n    async start() {\n        if (this.started)\n            return;\n        this.started = true;\n        if (this.stream) {\n            this.stream.on('data', (data_chunk) => { this.process_data_stream_chunk(data_chunk); });\n            this.stream.on('end', () => { this.process_data_stream_end(); });\n        } else {\n            let parent_iterator = this;\n            return new Promise(function(resolve, reject) {\n                fs.readFile(parent_iterator.csv_path, (err, data_blob) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        parent_iterator.process_data_bulk(data_blob);\n                        resolve();\n                    }\n                });\n            });\n        }\n    };\n\n\n    get_warnings() {\n        let result = [];\n        if (this.first_defective_line !== null)\n            result.push(`Inconsistent double quote escaping in ${this.table_name} table. E.g. at line ${this.first_defective_line}`);\n        if (this.utf8_bom_removed)\n            result.push(`UTF-8 Byte Order Mark (BOM) was found and skipped in ${this.table_name} table`);\n        if (this.fields_info.size > 1)\n            result.push(make_inconsistent_num_fields_warning(this.table_name, this.fields_info));\n        return result;\n    };\n}\n\n\nclass CSVWriter extends rbql.RBQLOutputWriter {\n    constructor(stream, close_stream_on_finish, encoding, delim, policy, line_separator='\\n') {\n        super();\n        this.stream = stream;\n        this.encoding = encoding;\n        if (encoding)\n            this.stream.setDefaultEncoding(encoding);\n        this.stream.on('error', (error_obj) => { this.store_first_error(error_obj); })\n        this.delim = delim;\n        this.policy = policy;\n        this.line_separator = line_separator;\n        this.sub_array_delim = delim == '|' ? ';' : '|';\n\n        this.close_stream_on_finish = close_stream_on_finish;\n\n        this.null_in_output = false;\n        this.delim_in_simple_output = false;\n        this.header_len = null;\n        this.first_error = null;\n\n        if (policy == 'simple') {\n            this.polymorphic_join = this.simple_join;\n        } else if (policy == 'quoted') {\n            this.polymorphic_join = this.quoted_join;\n        } else if (policy == 'quoted_rfc') {\n            this.polymorphic_join = this.quoted_join_rfc;\n        } else if (policy == 'monocolumn') {\n            this.polymorphic_join = this.mono_join;\n        } else if (policy == 'whitespace') {\n            this.polymorphic_join = this.simple_join;\n        } else {\n            throw new RbqlIOHandlingError('Unknown output csv policy');\n        }\n    }\n\n\n    store_first_error(error_obj) {\n        // Store only first error because it is typically more important than the subsequent ones.\n        if (this.first_error === null)\n            this.first_error = error_obj;\n    }\n\n    set_header(header) {\n        if (header !== null) {\n            this.header_len = header.length;\n            this.write(header);\n        }\n    }\n\n\n    quoted_join(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    quoted_join_rfc(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.rfc_quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    mono_join(fields) {\n        if (fields.length > 1) {\n            throw new RbqlIOHandlingError('Unable to use \"Monocolumn\" output format: some records have more than one field');\n        }\n        return fields[0];\n    };\n\n\n    simple_join(fields) {\n        var res = fields.join(this.delim);\n        if (fields.join('').indexOf(this.delim) != -1) {\n            this.delim_in_simple_output = true;\n        }\n        return res;\n    };\n\n\n    normalize_fields(out_fields) {\n        for (var i = 0; i < out_fields.length; i++) {\n            if (out_fields[i] == null) {\n                this.null_in_output = true;\n                out_fields[i] = '';\n            } else if (Array.isArray(out_fields[i])) {\n                this.normalize_fields(out_fields[i]);\n                out_fields[i] = out_fields[i].join(this.sub_array_delim);\n            }\n        }\n    };\n\n\n    async write(fields) {\n        if (this.header_len !== null && fields.length != this.header_len)\n            throw new RbqlIOHandlingError(`Inconsistent number of columns in output header and the current record: ${this.header_len} != ${fields.length}`);\n        this.normalize_fields(fields);\n        this.stream.write(this.polymorphic_join(fields));\n        this.stream.write(this.line_separator);\n        let writer_error = this.first_error;\n        return new Promise(function(resolve, reject) {\n            if (writer_error !== null) {\n                reject(writer_error);\n            } else {\n                resolve(true);\n            }\n        });\n    };\n\n\n    _write_all(table) {\n        for (let i = 0; i < table.length; i++) {\n            this.write(table[i]);\n        }\n    };\n\n\n    async finish() {\n        let close_stream_on_finish = this.close_stream_on_finish;\n        let output_stream = this.stream;\n        let output_encoding = this.encoding;\n        let writer_error = this.first_error;\n        let finish_promise = new Promise(function(resolve, reject) {\n            if (writer_error !== null) {\n                reject(writer_error);\n            }\n            if (close_stream_on_finish) {\n                output_stream.end('', output_encoding, () => { resolve(); });\n            } else {\n                setTimeout(() => { resolve(); }, 0);\n            }\n        });\n        return finish_promise;\n    };\n\n\n    get_warnings() {\n        let result = [];\n        if (this.null_in_output)\n            result.push('null values in output were replaced by empty strings');\n        if (this.delim_in_simple_output)\n            result.push('Some output fields contain separator');\n        return result;\n    };\n\n}\n\n\nclass FileSystemCSVRegistry extends rbql.RBQLTableRegistry {\n    constructor(input_file_dir, delim, policy, encoding, has_header=false, comment_prefix=null, options=null) {\n        super();\n        this.input_file_dir = input_file_dir;\n        this.delim = delim;\n        this.policy = policy;\n        this.encoding = encoding;\n        this.has_header = has_header;\n        this.comment_prefix = comment_prefix;\n        this.stream = null;\n        this.record_iterator = null;\n\n        this.options = options;\n        this.bulk_input_path = null;\n        this.table_path = null;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        this.table_path = find_table_path(this.input_file_dir, table_id);\n        if (this.table_path === null) {\n            throw new RbqlIOHandlingError(`Unable to find join table \"${table_id}\"`);\n        }\n        if (this.options && this.options['bulk_read']) {\n            this.bulk_input_path = this.table_path;\n        } else {\n            this.stream = fs.createReadStream(this.table_path);\n        }\n        this.record_iterator = new CSVRecordIterator(this.stream, this.bulk_input_path, this.encoding, this.delim, this.policy, this.has_header, this.comment_prefix, table_id, 'b');\n        return this.record_iterator;\n    };\n\n    get_warnings(output_warnings) {\n        if (this.record_iterator && this.has_header) {\n            output_warnings.push(`The first record in JOIN file ${path.basename(this.table_path)} was also treated as header (and skipped)`);\n        }\n    }\n}\n\n\nasync function query_csv(query_text, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, output_warnings, with_headers=false, comment_prefix=null, user_init_code='', options=null) {\n    let input_stream = null;\n    let bulk_input_path = null;\n    if (options && options['bulk_read'] && input_path) {\n        bulk_input_path = input_path;\n    } else {\n        input_stream = input_path === null ? process.stdin : fs.createReadStream(input_path);\n    }\n    let [output_stream, close_output_on_finish] = output_path === null ? [process.stdout, false] : [fs.createWriteStream(output_path), true];\n    if (input_delim == '\"' && input_policy == 'quoted')\n        throw new RbqlIOHandlingError('Double quote delimiter is incompatible with \"quoted\" policy');\n    if (csv_encoding == 'latin-1')\n        csv_encoding = 'binary';\n    if (!is_ascii(query_text) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n    if ((!is_ascii(input_delim) || !is_ascii(output_delim)) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n\n    let default_init_source_path = path.join(os.homedir(), '.rbql_init_source.js');\n    if (user_init_code == '' && fs.existsSync(default_init_source_path)) {\n        user_init_code = read_user_init_code(default_init_source_path);\n    }\n    let input_file_dir = input_path ? path.dirname(input_path) : null;\n    let join_tables_registry = new FileSystemCSVRegistry(input_file_dir, input_delim, input_policy, csv_encoding, with_headers, comment_prefix, options);\n    let input_iterator = new CSVRecordIterator(input_stream, bulk_input_path, csv_encoding, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new CSVWriter(output_stream, close_output_on_finish, csv_encoding, output_delim, output_policy);\n\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    join_tables_registry.get_warnings(output_warnings);\n}\n\n\nmodule.exports.is_ascii = is_ascii;\nmodule.exports.CSVRecordIterator = CSVRecordIterator;\nmodule.exports.CSVWriter = CSVWriter;\nmodule.exports.FileSystemCSVRegistry = FileSystemCSVRegistry;\nmodule.exports.interpret_named_csv_format = interpret_named_csv_format;\nmodule.exports.read_user_init_code = read_user_init_code;\nmodule.exports.query_csv = query_csv;\nmodule.exports.RecordQueue = RecordQueue;\nmodule.exports.exception_to_error_info = rbql.exception_to_error_info;\n","const assert = require('assert');\nconst rainbow_utils = require('../../rainbow_utils.js');\nconst fast_load_utils = require('../../fast_load_utils.js');\n\n\nclass VscodePositionTestDouble {\n    constructor(line, character) {\n        this.line = line;\n        this.character = character;\n    }\n}\n\nclass VscodeSelectionTestDouble {\n    constructor(anchor, active) {\n        this.anchor = anchor;\n        this.active = active;\n    }\n}\n\nclass VscodeRangeTestDouble {\n    constructor(l1, c1, l2, c2) {\n        this.start = new VscodePositionTestDouble(l1, c1);\n        this.end = new VscodePositionTestDouble(l2, c2);\n    }\n    contains(position) {\n        let after_start = position.line > this.start.line || (position.line === this.start.line && position.character >= this.start.character);\n        let before_end = position.line < this.end.line || (position.line == this.end.line && position.character <= this.end.character);\n        return after_start && before_end;\n    }\n}\n\n\nclass VscodeDocumentTestDouble {\n    constructor(lines_buffer, fileName='TestDouble.txt', language_id='plaintext') {\n        this.lines_buffer = lines_buffer;\n        this.lineCount = lines_buffer.length;\n        this.fileName = fileName;\n        this.version = 1;\n        this.languageId = language_id;\n    }\n    lineAt(lnum) {\n        return {text: this.lines_buffer[lnum]};\n    }\n    getText() {\n        return this.lines_buffer.join('\\n');\n    }\n}\n\n\nclass VscodeStatusBarItemTestDouble {\n    constructor() {\n        this.text = null;\n        this.color = null;\n        this.tooltip = null;\n        this.command = null;\n        this.is_visible = false;\n    }\n    show() {\n        this.is_visible = true;\n    }\n}\n\n\nfunction create_status_bar_item_test_double(_alignment) {\n    return new VscodeStatusBarItemTestDouble();\n}\n\n\nfunction set_text_document_language_test_double(target_document, language_id) {\n    target_document.languageId = language_id;\n    return target_document;\n}\n\n\nlet vscode_test_double = {\n    Range: VscodeRangeTestDouble, \n    'window': {'createStatusBarItem': create_status_bar_item_test_double}, \n    StatusBarAlignment: {'Left': null}, \n    languages: {'setTextDocumentLanguage': set_text_document_language_test_double}, \n    Position: VscodePositionTestDouble, \n    Selection: VscodeSelectionTestDouble\n};\n\n\nfunction test_align_stats() {\n    // Previous fields are numbers but the current one is not - mark the column as non-numeric.\n    let field = 'foobar';\n    let is_first_line = 0;\n    //let field_components = [5, 2, 3];\n    let field_components = {max_total_length: 5, max_int_length: 2, max_fractional_length: 3};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    //assert.deepEqual(field_components, [6, -1, -1]);\n    assert.deepEqual(field_components, {max_total_length: 6, max_int_length: -1, max_fractional_length: -1});\n\n    // The field is non-numeric but it is at the first line so could be a header - do not mark the column as non-numeric just yet.\n    field = 'foobar';\n    is_first_line = 1;\n    field_components = {max_total_length: 0, max_int_length: 0, max_fractional_length: 0};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 6, max_int_length: 0, max_fractional_length: 0});\n\n    // The field is a number but the column is already marked as non-numeric so we just update the max string width.\n    field = '100000';\n    is_first_line = 0;\n    field_components = {max_total_length: 2, max_int_length: -1, max_fractional_length: -1};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 6, max_int_length: -1, max_fractional_length: -1});\n\n    // Empty field should not mark a potentially numeric column as non-numeric.\n    field = '';\n    is_first_line = 0;\n    field_components = {max_total_length: 5, max_int_length: 2, max_fractional_length: 3};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 5, max_int_length: 2, max_fractional_length: 3});\n\n    // The field doesn't change stats because all of 3 components are smaller than the current maximums.\n    field = '100.3';\n    is_first_line = 0;\n    field_components = {max_total_length: 7, max_int_length: 4, max_fractional_length: 3};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 7, max_int_length: 4, max_fractional_length: 3});\n\n    // Integer update example.\n    field = '100000';\n    is_first_line = 0;\n    field_components = {max_total_length: 5, max_int_length: 2, max_fractional_length: 3};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 6, max_int_length: 6, max_fractional_length: 3});\n\n    // Float update example.\n    field = '1000.23';\n    is_first_line = 0;\n    field_components = {max_total_length: 3, max_int_length: 3, max_fractional_length: 0};\n    rainbow_utils.update_subcomponent_stats(field, is_first_line, field_components);\n    assert.deepEqual(field_components, {max_total_length: 7, max_int_length: 4, max_fractional_length: 3});\n}\n\n\nfunction test_calc_column_stats() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [column_stats, first_failed_line, records, comments] = [null, null, null, null];\n\n    // A basic rfc test.\n    doc_lines = [\n        '# commment line', \n        '1a,\"1b', \n        '1b,\"\"1b\"\",1b', \n        '1b\",1c',\n        '2a,2bbb,2cc', \n        ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.deepEqual([{record_num: 0, comment_text: '# commment line'}, {record_num: 2, comment_text: ''}], comments);\n    assert.deepEqual(null, first_failed_line);\n    assert.deepEqual([{max_total_length: 2, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 12, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 3, max_int_length: -1, max_fractional_length: -1}], column_stats);\n\n    // Inconsistent num fields.\n    doc_lines = [\n        '1a,1b', \n        '2aa', \n        '3a,3b,3c'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    assert.deepEqual([{max_total_length: 3, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 2, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 2, max_int_length: -1, max_fractional_length: -1}], column_stats);\n\n    // Defective line.\n    doc_lines = [\n        '1a,1b', \n        '2a\"a', \n        '3a,3b,3c'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.deepEqual(2, first_failed_line);\n    assert.deepEqual(null, column_stats);\n    assert.deepEqual(null, records);\n\n    // First line non-numeric.\n    doc_lines = [\n        'type,weight', \n        'car,100', \n        'ship,  20000'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    assert.deepEqual([{max_total_length: 4, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 6, max_int_length: 5, max_fractional_length: 0}], column_stats);\n\n    // Numbers on different lines.\n    // Currently in this case we don't report second column as numeric, but this is more-or-less an arbitrary decission.\n    doc_lines = [\n        'car,100', \n        'ship,\"20000', \n        '300\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    assert.deepEqual([{max_total_length: 4, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 6, max_int_length: -1, max_fractional_length: -1}], column_stats);\n}\n\n\nfunction test_rfc_field_align() {\n    let [field, is_first_line, column_stats, aligned_field, is_field_segment] = [null, null, null, null, null, null];\n\n    // Align non-field segment in non-numeric non-last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = false;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], is_field_segment);\n    assert.deepEqual('foobar     ', aligned_field);\n\n    // Align field segment in non-numeric non-last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = true;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], is_field_segment);\n    assert.deepEqual('       foobar     ', aligned_field);\n}\n\n\nfunction test_field_align() {\n    // Align field in non-numeric non-last column.\n    let field = 'foobar';\n    let is_first_line = 0;\n    let max_components_lens = {max_total_length: 10, max_int_length: -1, max_fractional_length: -1};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    let aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('foobar     ', aligned_field);\n\n    // Align non-numeric first line (potentially header) field in numeric column.\n    field = 'foobar';\n    is_first_line = 1;\n    max_components_lens = {max_total_length: 10, max_int_length: 4, max_fractional_length: 6};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('foobar     ', aligned_field);\n\n    // Align numeric first line (potentially header) field in numeric column.\n    field = '10.1';\n    is_first_line = 1;\n    max_components_lens = {max_total_length: 10, max_int_length: 4, max_fractional_length: 6};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('  10.1     ', aligned_field);\n\n    // Align numeric field in non-numeric column (first line).\n    field = '10.1';\n    is_first_line = 1;\n    max_components_lens = {max_total_length: 10, max_int_length: -1, max_fractional_length: -1};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('10.1       ', aligned_field);\n\n    // Align numeric field in non-numeric column (not first line).\n    field = '10.1';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 10, max_int_length: -1, max_fractional_length: -1};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('10.1       ', aligned_field);\n\n    // Align numeric float in numeric non-last column.\n    field = '10.1';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 10, max_int_length: 4, max_fractional_length: 6};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('  10.1     ', aligned_field);\n\n    // Align numeric integer in numeric non-last column.\n    field = '1000';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 10, max_int_length: 4, max_fractional_length: 6};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('1000       ', aligned_field);\n\n    // Align numeric integer in numeric (integer) column.\n    field = '1000';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 4, max_int_length: 4, max_fractional_length: 0};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('1000 ', aligned_field);\n\n    // Align numeric integer in numeric (integer) column dominated by header width.\n    field = '1000';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 6, max_int_length: 4, max_fractional_length: 0};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('  1000 ', aligned_field);\n\n    // Align numeric float in numeric column dominated by header width.\n    field = '10.1';\n    is_first_line = 0;\n    max_components_lens = {max_total_length: 12, max_int_length: 4, max_fractional_length: 6};\n    max_components_lens = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    aligned_field = rainbow_utils.align_field(field, is_first_line, max_components_lens);\n    assert.deepEqual('    10.1     ', aligned_field);\n}\n\n\nfunction test_adjust_column_stats() {\n    let [max_components_lens, adjusted_components, column_stats, adjusted_stats] = [null, null, null];\n\n    // Not a numeric column, adjustment is NOOP.\n    max_components_lens = {max_total_length: 10, max_int_length: -1, max_fractional_length: -1};\n    adjusted_components = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    assert.deepEqual({max_total_length: 10, max_int_length: -1, max_fractional_length: -1, start_offset: 0}, adjusted_components);\n\n    // This is possisble with a single-line file.\n    max_components_lens = {max_total_length: 10, max_int_length: 0, max_fractional_length: 0};\n    adjusted_components = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    assert.deepEqual({max_total_length: 10, max_int_length: -1, max_fractional_length: -1, start_offset: 0}, adjusted_components);\n\n    // Header is smaller than the sum of the numeric components.\n    // value\n    // 0.12\n    // 1234\n    max_components_lens = {max_total_length: 5, max_int_length: 4, max_fractional_length: 3};\n    adjusted_components = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    assert.deepEqual({max_total_length: 7, max_int_length: 4, max_fractional_length: 3, start_offset: 0}, adjusted_components);\n\n    // Header is bigger than the sum of the numeric components.\n    max_components_lens = {max_total_length: 10, max_int_length: 4, max_fractional_length: 3};\n    adjusted_components = rainbow_utils.adjust_column_stats([max_components_lens], /*delim_length=*/1)[0];\n    assert.deepEqual({max_total_length: 10, max_int_length: 7, max_fractional_length: 3, start_offset: 0}, adjusted_components);\n\n    // Non-zero start offset\n    column_stats = [{max_total_length: 10, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 8, max_int_length: -1, max_fractional_length: -1}];\n    adjusted_stats = rainbow_utils.adjust_column_stats(column_stats, /*delim_length=*/1);\n    assert.deepEqual([{max_total_length: 10, max_int_length: -1, max_fractional_length: -1, start_offset: 0}, {max_total_length: 8, max_int_length: -1, max_fractional_length: -1, start_offset: 12}], adjusted_stats);\n}\n\n\nfunction test_parse_document_records() {\n    let [doc_lines, active_doc, comment_prefix, delim, policy] = [null, null, null, null, null];\n    let [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = [null, null, null, null, null, null];\n\n    // Simple test with single-field records and max_records_to_parse set to a very big number.\n    doc_lines = [\n        'aaa', \n        'bbb', \n        'ccc'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/1000, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['aaa'], ['bbb'], ['ccc']], records);\n    assert.deepEqual([[1, 0]], Array.from(fields_info.entries()));\n    assert.deepEqual([], comments);\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n    assert.equal(num_records_parsed, records.length);\n\n    // Simple test with two-field records and a comment and a trailing space line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1 ,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1 ', 'c2']], records);\n    assert.deepEqual([[2, 0]], Array.from(fields_info.entries()));\n    assert.deepEqual([{record_num: 2, comment_text: '#comment'}], comments);\n    assert.equal(first_defective_line, null);\n    // The first trailing space line is line 3 (0-based) because the comment line also counts for a document line.\n    assert.equal(first_trailing_space_line, 3);\n\n    // Simple test with inconsistent records and trailing space.\n    doc_lines = [\n        'a1,a2 ', \n        'b1,b2', \n        '', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2 '], ['b1', 'b2'], [''], ['c1'], ['d3', 'd4', 'd5']], records);\n    assert.deepEqual([[2, 0], [1, 2], [3, 4]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, 0);\n\n    // Quoted policy, defective line 3, do not stop on warning.\n    doc_lines = [\n        'a1,a2', \n        '#\"b1,b2', \n        '\"b1,b2', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2'], ['\"b1', 'b2'], ['c1'], ['d3', 'd4', 'd5']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#\"b1,b2'}], comments);\n    assert.equal(first_defective_line, 2);\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted policy, defective line 3, stop on warning.\n    doc_lines = [\n        'a1,a2', \n        '#\"b1,b2', \n        '\"b1,b2', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#\"b1,b2'}], comments);\n    assert.equal(first_defective_line, 2);\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted rfc policy - no issues.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\"\",b2 ', \n        'c1,c2\",c3', \n        '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2\\nb1\",b2 \\nc1,c2', 'c3'], ['e1,\"e2,e3'], ['f1 ', 'f2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#d1,\"'}], comments);\n    assert.equal(first_defective_line, null);\n    // Trailing spaces inside the fields do not count, so the first trailing space will be at line 5.\n    assert.equal(first_trailing_space_line, 5);\n\n    // Quoted rfc policy - stop on warning.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\"\",b2 ', \n        'c1,\"c2,c3', \n        '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([], records);\n    assert.deepEqual([], comments);\n    assert.equal(first_defective_line, 0);\n\n    // too few columns for autodetection\n    doc_lines = [\n        'a1', \n        'b1', \n        'c1'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    assert.equal(null, records);\n    assert.deepEqual([], comments);\n    // Only one entry in fields_info because of the early stop because of min_num_fields_for_autodetection check.\n    assert.deepEqual([[1, 0]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n\n    // Autodetection - enough columns.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    assert.equal(null, records);\n    assert.deepEqual([[2, 0]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n\n    // Autodetection - different number of columns - early stop.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2,c3', \n        'd1,d3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    // Because of the early stop we don't parse the last 2 lines.\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Make sure that we have two entries in fields_info - callers check fields_info to find out if we have autodetection failure.\n    assert.deepEqual([[2, 0], [3, 2]], Array.from(fields_info.entries()));\n\n    // Max record to parse - no defective line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '\"c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/2, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Although the third line is defective we don't detect it because of max_records_to_parse limitation.\n    assert.equal(first_defective_line, null);\n\n    // Max record to parse - defective line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '\"c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/5, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Although the third line is defective we don't detect it because of max_records_to_parse limitation.\n    assert.equal(first_defective_line, 2);\n\n    // Simple multichar separator, max_records_to_parse equals total number of records.\n    doc_lines = [\n        'a1#~#a2#~#a3', \n        'b1#~#b2#~#b3', \n        'c1#~#c2#~#c3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = '#~#';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/3, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2', 'a3'], ['b1', 'b2', 'b3'], ['c1', 'c2', 'c3']], records);\n    assert.equal(first_defective_line, null);\n\n    // Whitespace policy, trailing spaces are impossible for this policy.\n    doc_lines = [\n        '  a1 a2    a3', \n        'b1     b2 b3  ', \n        '  c1    c2       c3  '\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ' ';\n    policy = 'whitespace';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/3, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2', 'a3'], ['b1', 'b2', 'b3'], ['c1', 'c2', 'c3']], records);\n    assert.equal(first_defective_line, null);\n    // Although we have a lot of internal spaces, the first_trailing_space_line should be null because we use whitespace policy\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted rfc policy, preserve quotes.\n    doc_lines = [\n        'a1,\"a2', 'b1\"\",b2 ', \n        'c1,c2\",c3', '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', '\"a2\\nb1\"\",b2 \\nc1,c2\"', 'c3'], ['\"e1,\"\"e2,e3\"'], ['f1 ', 'f2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#d1,\"'}], comments);\n    assert.equal(first_defective_line, null);\n    // Trailing spaces inside the fields do not count, so the first trailing space will be at line 5.\n    assert.equal(first_trailing_space_line, 5);\n}\n\n\nfunction line_range_to_triple(vscode_range) {\n    assert.equal(vscode_range.start.line, vscode_range.end.line);\n    return [vscode_range.start.line, vscode_range.start.character, vscode_range.end.character];\n}\n\nfunction convert_ranges_to_triples(table_ranges) {\n    let table_comment_ranges = [];\n    let table_record_ranges = [];\n    for (let row_info of table_ranges) {\n        if (row_info.hasOwnProperty('comment_range')) {\n            table_comment_ranges.push(line_range_to_triple(row_info.comment_range));\n        } else {\n            assert(row_info.hasOwnProperty('record_ranges'));\n            let row_triple_groups = [];\n            for (let field_ranges of row_info.record_ranges) {\n                let field_triples = [];\n                for (let field_range of field_ranges) {\n                    field_triples.push(line_range_to_triple(field_range));\n                }\n                row_triple_groups.push(field_triples);\n            }\n            table_record_ranges.push(row_triple_groups);\n        }\n    }\n    return [table_comment_ranges, table_record_ranges];\n}\n\nfunction vr(l1, c1, l2, c2) {\n    return new VscodeRangeTestDouble(l1, c1, l2, c2);\n}\n\n// Flat Vscode Record. Use function for readability.\nfunction fvr(l, c1, c2) {\n    return [l, c1, c2];\n}\n\n\nfunction test_parse_document_range_rfc() {\n    let [doc_lines, active_doc, comment_prefix, delim, range] = [null, null, null, null, null];\n    let [table_ranges, table_comment_ranges, table_record_ranges] = [null, null, null];\n    let [record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3] = [null, null, null, null];\n    // Simple test case.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test last line parsing.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test behind last line and before first line parsing with large margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 5, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n\n    // Test extension with the default margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    // The range covers only one line, but the default margin=50 should extend it to cover everything.\n    range = new vscode_test_double.Range(2, 0, 2, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n\n\n    // Single record, 3 fields.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1\",d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, comment_prefix, range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 5), fvr(3, 0, 4)], [fvr(3, 4, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Mixture of single line and multiline fields in a single record. Also a comment prefix in the middle of the field which should not count.\n    doc_lines = [\n        'a1,a2,\"a3', \n        '#b1\",\"b2\"\",b3\",b4,\"b5', \n        'c1,c2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6)], [fvr(0, 6, 9), fvr(1, 0, 5)], [fvr(1, 5, 15)], [fvr(1, 15, 18)], [fvr(1, 18, 21), fvr(2, 0, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Discard some parsed lines which belongs to a record starting outside the parsing range\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2\"', \n        'e1,e2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 20, 0); // doesn't include first line with the openning double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Now shift window one back - it should include all lines now.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2\"', \n        'e1,e2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 20, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 5), fvr(3, 0, 6)]];\n    record_ranges_1 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Include only the first 2 records because end of the record is outside the parsing window.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,\"c2', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 5, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Now include everything because the end record got inside the parsing window\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,\"c2', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 6), fvr(3, 0, 5), fvr(4, 0, 5), fvr(5, 0, 6)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // ===================================================================================\n    // Beginning of 4 related test on the same data but with the different parsing windows\n\n    // Nothing is parsed because the window started at the record which end didn't fit into the parsing range.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    assert.deepEqual([], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Same as before but the window is shifted slightly so we (wrongly) assume that the internal field lines are independent records.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    // Note that the third line `c1\",\"c2` is not parsed because since parser assumes it to be an independent record it contains syntax errors.\n    record_ranges_1 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    record_ranges_2 = [[fvr(5, 0, 3)], [fvr(5, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2], table_record_ranges);\n    // Although `#hello world` is actually part of the multiline field we wrongly assume it to be a comment since our parsing window don't cover neither begin nor end of the record.\n    assert.deepEqual([fvr(4, 0, 12)], table_comment_ranges);\n\n    // Nothing is parsed again because the window ends right at the closing line and the beginning didn't fit.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 7, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    assert.deepEqual([], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n\n    // All lines now fit in the range and they are being properly parsed as a single record.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 7, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*comment_prefix=*/'#', range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 4)], [fvr(2, 4, 7), fvr(3, 0, 5), fvr(4, 0, 12), fvr(5, 0, 5), fvr(6, 0, 4)], [fvr(6, 4, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n\n    // End of 4 related test on the same data but with the different parsing windows\n    // ===================================================================================\n\n\n    // Discard some at the beginning and some at the end where the record didn't fit into the parsing window\n    doc_lines = [\n        'a1;\"a2', \n        'b1;b2', \n        'c1\";c2', \n        'd1;d2', \n        '#hello world', \n        'e1;e2', \n        'f1;\"f2', \n        'g1;g2', \n        'h1\";h2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ';';\n    range = new vscode_test_double.Range(1, 0, 8, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    record_ranges_2 = [[fvr(5, 0, 3)], [fvr(5, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([fvr(4, 0, 12)], table_comment_ranges);\n\n}\n\n\nfunction test_is_opening_rfc_line() {\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1;\"a2', ';'));\n    assert(rainbow_utils.is_opening_rfc_line('a1,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1  ,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,a1,a1  ,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a1,a1  \",  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a1,a1  \" ,  \" a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1,a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1\",a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1;a2', ';'));\n    assert(!rainbow_utils.is_opening_rfc_line('a1\";a2', ';'));\n\n    // Some lines can be both closing and opening, e.g. this one:\n    assert(rainbow_utils.is_opening_rfc_line('\",a2,a3', ','));\n\n    assert(!rainbow_utils.is_opening_rfc_line('abcd\"', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('abcd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('ab,cd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('ab\"\"x\"\"cd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1,\"a2,a3\"\"a4,a5\"\"\",a6,a7', ','));\n    assert(rainbow_utils.is_opening_rfc_line('\"', ','));\n    assert(rainbow_utils.is_opening_rfc_line('\",', ','));\n    assert(rainbow_utils.is_opening_rfc_line(',\"', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a,\"', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a,a\"', ','));\n}\n\n\nfunction test_sample_preview_records_from_context() {\n    let [doc_lines, active_doc, comment_prefix, delim, rbql_context, preview_window_size, cached_table_parse_result, dst_message, policy] = [null, null, null, null, null, null, null, null, null];\n    let doc_file_name = 'fake_doc.txt';\n\n    // Simple test with a comment and negative start record.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = -100;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Invalid quoting.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\",b2', \n        '#comment', \n        'c1,\"c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 0;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'quoted_rfc';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert(!dst_message.actual_start_record);\n    assert(!dst_message.preview_records);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 2 which starts at line 4');\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test window shift back to 0.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2', \n        'e1,e2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    // The start record is shifted to record 1 from requested record 3 to show the maximum number of the requested 10 entries.\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test window shift back exact.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2', \n        'e1,e2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 4;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    // The start record is shifted to record 1 from requested record 3 to show the requested 4 entries.\n    assert.equal(dst_message.actual_start_record, 1);\n    assert.deepEqual([['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test UI_STRING_TRIM_MARKER behavior.\n    doc_lines = [\n        '1'.repeat(251) + ',' + '2'.repeat(251)\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 4;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['1'.repeat(250) + '###UI_STRING_TRIM_MARKER###', '2'.repeat(250) + '###UI_STRING_TRIM_MARKER###']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test that comment lines do not prevent to sample requested number of entries.\n    doc_lines = [\n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 3;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 0;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Check caching logic.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2', \n        'g1,g2', \n        'h1,h2', \n        'i1,i2', \n        'j1,j2', \n        'k1,k2', \n        'l1,l2', \n        'm1,m2', \n        'n1,n2', \n        'o1\"\",o2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 2;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 11;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'quoted_rfc';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 15 which starts at line 16');\n    assert(cached_table_parse_result.has(doc_file_name));\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(15, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(1, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n\n    // Check that even with the updated doc the old version is returned because we haven't adjusted the version.\n    dst_message = new Object();\n    active_doc.lines_buffer[active_doc.lines_buffer.length - 1] = 'o1,o2';\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 15 which starts at line 16');\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(15, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(1, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n\n    // Check that updating doc version triggers reparsing which now returns the correct sample because the doc was fixed earlier..\n    dst_message = new Object();\n    active_doc.version = 2;\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 11);\n    assert.deepEqual([['l1', 'l2'], ['m1', 'm2']], dst_message.preview_records);\n    assert.equal(dst_message.preview_sampling_error, undefined);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2'], ['o1', 'o2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(undefined, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(2, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n}\n\n\nfunction test_show_lint_status_bar_button() {\n    let [extension_context, file_path, language_id, fields_info, first_defective_line, first_trailing_space_line] = [null, null, null, null, null, null];\n\n    // Test \"is processing\" display status.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true, is_ok: true}); // Adding `is_ok` to test that it has no affect.\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Processing\\nClick to recheck');\n\n    // Test that missing cache key entry doesn't create a new item.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}.bad`;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button, undefined);\n\n    // First defective line test. First trailing space line and inconsistent fields info should have no effect on the result.\n    extension_context = {lint_results: new Map()};\n    first_defective_line = 10;\n    first_trailing_space_line = 5;\n    fields_info = new Map([[2, 0], [3, 2]]);\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {first_defective_line: first_defective_line, fields_info: fields_info, first_trailing_space_line: first_trailing_space_line});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Error. Line 10 has formatting error: double quote chars are not consistent\\nClick to recheck');\n\n    // Inconsistent fields info test. First trailing space line should have no effect on the result.\n    extension_context = {lint_results: new Map()};\n    first_trailing_space_line = 5;\n    fields_info = new Map([[2, 0], [1, 10], [4, 15], [3, 2]]);\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {fields_info: fields_info, first_trailing_space_line: first_trailing_space_line});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Error. Number of fields is not consistent: e.g. record 1 has 2 fields, and record 3 has 3 fields\\nClick to recheck');\n\n    // Test first trailing space line.\n    extension_context = {lint_results: new Map()};\n    first_trailing_space_line = 0; // Even zero line should trigger the warning - test against dumb `!first_trailing_space_line` check.\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {first_trailing_space_line: first_trailing_space_line, is_ok: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Leading/Trailing spaces detected: e.g. at line 1. Run \"Shrink\" command to remove them\\nClick to recheck');\n\n    // Test OK lint status - no errors/warnings.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {is_ok: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'OK\\nClick to recheck');\n}\n\n\nfunction test_get_cursor_position_info() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix, position, position_info] = [null, null, null, null, null, null, null];\n\n    // Basic test.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/3);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, position_info);\n\n    // Delim character maps to preceeding field.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/2);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, position_info);\n\n    // Basic test, comment\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/2, /*character=*/5);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({is_comment: true}, position_info);\n\n    // Column info for the last character in line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/4);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, position_info);\n\n    // Multicharacter separator test - critical locations across field boundaries.\n    doc_lines = [\n        'a1@@@a2@@@a3', \n        'b1@@@b2@@@b3', \n        '#comment', \n        'c1@@@c2@@@c3', \n        'd1@@@d2@@@d3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = '@@@';\n    policy = 'simple';\n    comment_prefix = '#';\n    assert.deepEqual({column_number: 0, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/4)));\n    assert.deepEqual({column_number: 1, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/5)));\n    assert.deepEqual({column_number: 1, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/9)));\n    assert.deepEqual({column_number: 2, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/10)));\n\n    // Column info for whitespace policy.\n    doc_lines = [\n        'a1  a2 ', \n        'b1    b2', \n        '$$comment', \n        '$c1  c2  ', \n        'd1   d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ' ';\n    policy = 'whitespace';\n    comment_prefix = '$$';\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/0)));\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/4)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/5)));\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/2, /*character=*/6)));\n\n    // Test with quoted policy and split warning.\n    doc_lines = [\n        'a1,a2', \n        '$b1,\"b2', \n        '$$comment', \n        '\"c1,\"\"c1\"\"\",c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'quoted';\n    comment_prefix = '$$';\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/11)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/12)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/1, /*character=*/4)));\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/2, /*character=*/6)));\n\n    // Quoted RFC policy test.\n    doc_lines = [\n        'a1,a2', \n        '#comment', \n        'b1,\"b2', \n        '#not a \"\"comment\"\", inside multiline field!', \n        'd1,d2\"', \n        'e1,\"e2,e2\"', \n        'f1,\"f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'quoted_rfc';\n    comment_prefix = '#';\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/1, /*character=*/6)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/6)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/4, /*character=*/5)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/5, /*character=*/3)));\n    assert.equal(null, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/6, /*character=*/1)));\n    assert.equal(null, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/6, /*character=*/3)));\n}\n\n\nfunction test_align_columns() {\n    let [unaligned_doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [column_stats, first_failed_line, records, comments] = [null, null, null, null];\n    let [aligned_doc_text, aligned_doc_lines, expected_doc_lines] = [null, null]\n\n    // Basic test with numeric column.\n    unaligned_doc_lines = [\n        'type,weight',\n        'car,100',\n        'ship,20000'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, delim.length);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type ,weight',\n        'car  ,   100',\n        'ship , 20000'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with string-only columns.\n    unaligned_doc_lines = [\n        'type,color',\n        'car,red',\n        'ship,orange'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, delim.length);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type ,color',\n        'car  ,red',\n        'ship ,orange'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with float column and random spaces.\n    unaligned_doc_lines = [\n        '  type, wght,  color ',\n        '  car  ,   1.008  ,   red',\n        '   ship ,  200.5  ,  yellow'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, delim.length);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type ,wght    ,color',\n        'car  ,  1.008 ,red',\n        'ship ,200.5   ,yellow'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with comment lines and last empty line which should not diappear after alignment.\n    unaligned_doc_lines = [\n        '#info',\n        'type,weight',\n        '#foo,foo',\n        '#m',\n        'car,100',\n        'ship,20000',\n        '#bar', '#bar', ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, delim.length);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        '#info',\n        'type ,weight',\n        '#foo,foo',\n        '#m',\n        'car  ,   100',\n        'ship , 20000',\n        '#bar',\n        '#bar',\n        ''\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // RFC multiline fields test.\n    unaligned_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    column_stats = rainbow_utils.adjust_column_stats(column_stats, delim.length);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type ,info                                       ,max_speed',\n        'car  ,\"A nice red car.',\n        '      Can get you \"\"anywhere\"\" you want.',\n        '      GPS included\"                              ,      100',\n        'ship ,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        '      Comes with a crew of 10\"                   ,       25'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Test with syntax error.\n    unaligned_doc_lines = [\n        'type,color',\n        'car,red',\n        'ship\",orange'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix);\n    assert.equal(null, column_stats);\n    assert.equal(3, first_failed_line);\n    assert.equal(null, records);\n}\n\nfunction test_shrink_columns() {\n    let [original_doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [first_failed_line, shrinked_doc_text, shrinked_doc_lines, expected_doc_lines] = [null, null, null, null];\n\n    // Basic test.\n    original_doc_lines = [\n        '  type  , weight, color',\n        ' car,100  , yellow   ',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // No edits (already shrinked) should be reported as null.\n    original_doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(null, first_failed_line);\n    assert.equal(null, shrinked_doc_text);\n\n    // Test with comments and last trailing line.\n    original_doc_lines = [\n        '#hello',\n        '  type  , weight, color',\n        '#foo',\n        '#bar',\n        ' car,100  , yellow   ',\n        'ship,20000,red',\n        '# foo , bar',\n        ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        '#hello',\n        'type,weight,color',\n        '#foo',\n        '#bar',\n        'car,100,yellow',\n        'ship,20000,red',\n        '# foo , bar',\n        ''\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // Test with syntax error.\n    original_doc_lines = [\n        '  type  , weight, color',\n        ' car,100  , yellow   ',\n        'ship,20000\",red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(first_failed_line, 3);\n    assert.equal(shrinked_doc_text, null);\n\n    // RFC multiline fields test.\n    original_doc_lines = [\n        'type ,info                                       ,max_speed',\n        'car  ,\"A nice red car.',\n        '      Can get you \"\"anywhere\"\" you want.',\n        '      GPS included\"                              ,      100',\n        'ship ,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        '      Comes with a crew of 10\"                   ,       25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // RFC multiline fields test with no edits.\n    original_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(null, first_failed_line);\n    assert.equal(null, shrinked_doc_text);\n}\n\n\nfunction get_all_entries(record_comment_merger) {\n    let result = [];\n    while (record_comment_merger.has_entries_left()) {\n        result.push(record_comment_merger.get_next());\n    }\n    return result;\n}\n\n\nfunction test_record_comment_merger() {\n    let [records, comments] = [null, null];\n    let record_comment_merger = null;\n    let [entries, expected_entries] = [null, null];\n\n    // Basic test.\n    records = [\n        'hello', \n        'world'\n    ];\n    comments = [\n        {record_num: 0, comment_text: '#foo'},\n        {record_num: 2, comment_text: '#bar1'},\n        {record_num: 2, comment_text: '#bar2'}\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        [null, '#foo'], \n        ['hello', null], \n        ['world', null],\n        [null, '#bar1'], \n        [null, '#bar2'], \n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No records.\n    records = [\n    ];\n    comments = [\n        {record_num: 0, comment_text: '#foo'},\n        {record_num: 2, comment_text: '#bar1'},\n        {record_num: 2, comment_text: '#bar2'}\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        [null, '#foo'], \n        [null, '#bar1'], \n        [null, '#bar2'], \n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No comments.\n    records = [\n        'hello', \n        'world'\n    ];\n    comments = [\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        ['hello', null], \n        ['world', null],\n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No records and no comments.\n    records = [\n    ];\n    comments = [\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n    ];\n    assert.deepEqual(expected_entries, entries);\n}\n\n\nfunction test_generate_column_edit_selections() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix, edit_mode, col_num] = [null, null, null, null, null, null, null];\n    let [selections, error_msg, warning_msg] = [null, null, null];\n    let [expected_selections, expected_error_msg, expected_warning_msg] = [null, null, null];\n\n    // Basic test.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Basic test with quoted_rfc.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with multiline fields.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,\"yellow',\n        ' and black\"',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Column edit mode is not supported for files with multiline fields', error_msg);\n\n    // Basic test with comments.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        '#hello world',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(3, 5), new VscodePositionTestDouble(3, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with quoting error.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow \" red',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Unable to enter column edit mode: quoting error at line 2', error_msg);\n    assert.equal(null, warning_msg);\n    assert.deepEqual(null, selections);\n\n    // Test with inconsistent fields length.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'rocket,1000',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 2; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Line 3 doesn\\'t have field number 3', error_msg);\n    assert.equal(null, warning_msg);\n    assert.deepEqual(null, selections);\n\n    // Test with \"ce_before\" and a double quote in proximity.\n    doc_lines = [\n        'type,weight,color',\n        'car,\"100\",yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, cursor at line 2 has a double quote is in proximity.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_after\" and a double quote in proximity.\n    doc_lines = [\n        'type,weight,color',\n        'car,\"100\",yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_after';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, cursor at line 2 has a double quote is in proximity.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 11), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 9), new VscodePositionTestDouble(1, 9)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 10), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_select\" and an empty field.\n    doc_lines = [\n        'type\\tweight\\tcolor',\n        'car\\t\\tyellow',\n        'ship\\t20000\\tred'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = '\\t';\n    policy = 'simple';\n    edit_mode = 'ce_select';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, Field 2 at line 2 is empty.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_after\", double quote in proximity and simple policy.\n    doc_lines = [\n        'type|weight|color',\n        'car|\"100\"|yellow',\n        'ship|20000|red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = '|';\n    policy = 'simple';\n    edit_mode = 'ce_after';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 11), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 9), new VscodePositionTestDouble(1, 9)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 10), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n}\n\n\nfunction test_all() {\n    test_align_stats();\n    test_field_align();\n    test_rfc_field_align();\n    test_align_columns();\n    test_shrink_columns();\n    test_calc_column_stats();\n    test_adjust_column_stats();\n    test_parse_document_records();\n    test_parse_document_range_rfc();\n    test_is_opening_rfc_line();\n    test_sample_preview_records_from_context();\n    test_show_lint_status_bar_button();\n    test_get_cursor_position_info();\n    test_record_comment_merger();\n    test_generate_column_edit_selections();\n}\n\nexports.test_all = test_all;\nexports.VscodePositionTestDouble = VscodePositionTestDouble;\nexports.VscodeRangeTestDouble = VscodeRangeTestDouble;\nexports.VscodeDocumentTestDouble = VscodeDocumentTestDouble;\nexports.vscode_test_double = vscode_test_double;\n","module.exports = require(\"vscode\");","'use strict';\n\nvar possibleNames = [\n\t'BigInt64Array',\n\t'BigUint64Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Int8Array',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray'\n];\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\nmodule.exports = function availableTypedArrays() {\n\tvar out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const assert = require('assert');\nconst os = require('os');\n\nconst vscode = require('vscode');\n\nconst rainbow_utils = require('../../rainbow_utils.js');\nconst unit_tests = require('./unit_tests.js');\n\n\n// The only reason why we are importing extension as a module here is to run some small unit tests like autodetect_dialect_frequency_based. \n// All other functionality such as commands and highlighting would work without this import/require line, since the extension is activated using VSCode internal mechanisms.\n// So the require/import extension line below can be deleted and all of the main integration tests would still pass.\nconst extension = require('../../extension.js');\n\n\nconst is_web_ext = (os.homedir === undefined); // Runs as web extension in browser.\n\n// TODO make RBQL command wait for the result to reduce the timeout.\nconst poor_rbql_async_design_workaround_timeout = 6000;\n\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nfunction log_message(msg) {\n    console.log('###RAINBOW_CSV_UNIT_TEST_MESSAGE### ' + msg);\n}\n\n\nasync function test_comment_prefix_js(workspace_folder_uri) {\n    let [uri, active_doc, editor, lint_report] = [null, null, null, null];\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'countries_with_comments.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(!lint_report.is_ok); // Lint is failing because we mistakenly treat comment lines as records.\n\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.SetCommentPrefix');\n    await sleep(1500);\n\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok); // Lint is OK because we marked comment lines as comments.\n    await sleep(1000);\n\n    // Now lets toggle the comment.\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await vscode.commands.executeCommand(\"cursorRight\");\n    await vscode.commands.executeCommand(\"cursorRight\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"editor.action.commentLine\");\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(!lint_report.is_ok); // Lint is failing again because we toggled the first comment line.\n    await sleep(1000);\n    await vscode.commands.executeCommand(\"editor.action.commentLine\");\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok); // Lint is OK now because we toggled the first line again back to its comment state.\n    await sleep(1000);\n    // Undo twice to avoid unsaved changes for RBQL.\n    await vscode.commands.executeCommand(\"undo\");\n    await vscode.commands.executeCommand(\"undo\");\n    await sleep(1000);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"SELECT a.Country, a.Population\", with_headers: true, integration_test_delay: 1500};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    num_lines_after_query = active_doc.lineCount;\n    log_message(`Length after js query: ${num_lines_after_query}`);\n    let expected_num_lines = 11; // 10 records + header.\n    if (!is_web_ext) {\n        expected_num_lines += 1; // Standard non-web CSV writer adds a newline at the end.\n    }\n    assert.equal(expected_num_lines, num_lines_after_query);\n}\n\nasync function test_comment_prefix_python_rbql(workspace_folder_uri) {\n    let [uri, active_doc, editor, lint_report] = [null, null, null, null];\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'countries_with_comments.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    // Don't need to select comment prefix again since we already did it for this file in the previous test.\n    // Using Python native expressions to make sure that we are running python query.\n    test_task = {rbql_backend: \"python\", rbql_query: \"SELECT '[{}]'.format(a.Country), int(a.Population) / 10\", with_headers: true, integration_test_delay: 1500};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    num_lines_after_query = active_doc.lineCount;\n    log_message(`Length after python query: ${num_lines_after_query}`);\n    assert.equal(12, num_lines_after_query); // Ten records + header + trailing empty line = 12\n}\n\n\nasync function test_rbql_node(workspace_folder_uri) {\n    let [uri, active_doc, editor] = [null, null, null];\n\n    // Test comment prefix and js query with it.\n    await test_comment_prefix_js(workspace_folder_uri);\n    // Test comment prefix with python query.\n    await test_comment_prefix_python_rbql(workspace_folder_uri);\n\n    // Test Python query.\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    let test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"select top 20 a1, math.ceil(float(a.total_score) * 100), a['university_name'], None, 'foo bar' order by a2\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    // Indirectly check reported warnings.\n    let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"None values in output were replaced by empty strings\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let length_after_query = active_doc.getText().length;\n    log_message(`Length after python query: ${length_after_query}`);\n    assert.equal(868, length_after_query); // wc -c gives smaller value. Probably VSCode uses '\\r\\n' as line ends.\n\n    // Test JS query.\n    test_task = {rbql_backend: \"js\", rbql_query: \"select a2 * 10, a3, a3.length where NR > 1 order by a3.length limit 10\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js query: ${length_after_query}`);\n    assert.equal(268, length_after_query);\n\n    // Test RBQL query error reporting.\n    test_task = {rbql_backend: \"python\", rbql_query: \"select nonexistent_function(a1)\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_report: true});\n    assert.equal('query execution', state_report.error_type);\n    assert.equal(\"At record 1, Details: name 'nonexistent_function' is not defined\", state_report.error_msg);\n\n    // Test with multiline records.\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'synthetic_rfc_newline_data.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    assert.equal(active_doc.languageId, 'dynamic csv');\n    test_task = {rbql_backend: \"js\", rbql_query: \"select '<<<<<', a3, a2, a1, '>>>>> NR: ' + NR\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js multiline-record query: ${length_after_query}`);\n    assert.equal(645, length_after_query);\n\n    // Test RBQL JOIN query.\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"select a.university_name, b.Country, b.Population, b['GDP per capita'] JOIN countries.csv on a.country == b.Country order by int(b.Population) desc\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"The first record in JOIN file countries.csv was also treated as header (and skipped)\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after join query: ${length_after_query}`);\n    // Not sure why it is 11592 and not 11610, when saving the file `wc -c` gives 11610.\n    assert.equal(11592, length_after_query);\n    // We have 202 not 201 because the trailing '\\n' maps to a trailing empty line in VSCode.\n    assert.equal(202, active_doc.lineCount);\n\n    // Test UPDATE, no warnings and copy back.\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'countries.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    let filename_before = active_doc.fileName;\n    let length_before_query = active_doc.getText().length;\n    editor = await vscode.window.showTextDocument(active_doc);\n    assert(active_doc.getText().indexOf('oceania') == -1);\n    assert(active_doc.getText().indexOf('OCEANIA') > 0);\n    await sleep(1000);\n\n    test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"UPDATE set a.Region = a.Region.lower()\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let filename_after = active_doc.fileName;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after update query: ${length_after_query}`);\n    // Changing column to lowercase should not affect the doc length if we account for the '\\r\\n' line endings.\n    assert.equal(length_before_query, length_after_query - active_doc.lineCount + 1);\n    assert(active_doc.getText().indexOf('OCEANIA') == -1);\n    assert(active_doc.getText().indexOf('oceania') > 0);\n\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.CopyBack');\n    await sleep(1000);\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    let filename_after_copy_back = active_doc.fileName;\n    // Make sure that the name stays the same as the original doc but the content has changed.\n    assert.equal(filename_before, filename_after_copy_back);\n    assert(active_doc.getText().indexOf('OCEANIA') == -1);\n    assert(active_doc.getText().indexOf('oceania') > 0);\n}\n\n\nasync function test_rbql_web(workspace_folder_uri) {\n    let [uri, active_doc, editor] = [null, null, null];\n\n    // Test comment prefix and js query with it.\n    await test_comment_prefix_js(workspace_folder_uri);\n\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    let test_task = {rbql_backend: \"js\", with_headers: true, rbql_query: \"select top 20 a1, Math.ceil(parseFloat(a.total_score) * 100), a['university_name'], null, 'foo bar' order by a2\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n\n    // Indirectly check reported warnings.\n    let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"null values in output were replaced by empty strings\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let length_after_query = active_doc.getText().length;\n    log_message(`Length after first js query: ${length_after_query}`);\n    assert.equal(846, length_after_query);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"select a2 * 10, a3, a3.length where NR > 1 order by a3.length limit 10\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after second js query: ${length_after_query}`);\n    // 267 instead of 268 because no trailing '\\n' at the end of file.\n    assert.equal(267, length_after_query);\n\n    // Test RBQL query error reporting.\n    test_task = {rbql_backend: \"js\", rbql_query: \"select nonexistent_function(a1)\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_report: true});\n    assert.equal('query execution', state_report.error_type);\n    assert.equal(\"At record 1, Details: nonexistent_function is not defined\", state_report.error_msg);\n\n    // Test with multiline records.\n    log_message('Starting multiline records test');\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'synthetic_rfc_newline_data.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"select '<<<<<', a3, a2, a1, '>>>>> NR: ' + NR\", enable_rfc_newlines: true};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js multiline-record query: ${length_after_query}`);\n    // 644 instead of 645 because no trailing '\\n' at the end of file.\n    assert.equal(644, length_after_query);\n}\n\n\nasync function test_align_shrink_lint(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'university_ranking.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    let length_original = active_doc.getText().length;\n    log_message(`Original length: ${length_original}`)\n    assert.equal(12538, length_original);\n    await sleep(2000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Align');\n    let length_aligned = active_doc.getText().length;\n    log_message(`Aligned length: ${length_aligned}`)\n    assert.equal(25896, length_aligned);\n    assert(length_aligned > length_original);\n    let lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok);\n    await sleep(2000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Shrink');\n    let length_shrinked = active_doc.getText().length;\n    log_message(`Shrinked length: ${length_shrinked}`)\n    // This is to ensure that after original -> align -> shrink sequence we get back to original doc.\n    assert.equal(length_original, length_shrinked);\n    await sleep(500);\n\n    let text_with_comma = 'foobar,';\n    await vscode.commands.executeCommand('default:type', { text: text_with_comma });\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.fields_info.size > 1);\n    await sleep(500);\n\n    for (let i = 0; i < text_with_comma.length; i++) {\n        await vscode.commands.executeCommand(\"deleteLeft\");\n    }\n    await sleep(500);\n}\n\n\nasync function test_column_edit(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'movies.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    let length_original = active_doc.getText().length;\n    assert.equal(9986, length_original);\n    for (let i = 0; i < 10; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    await sleep(1000);\n    await vscode.commands.executeCommand(\"rainbow-csv.ColumnEditAfter\");\n    await sleep(1000);\n    let text_with_comma = 'foobar,';\n    await vscode.commands.executeCommand('default:type', { text: text_with_comma });\n    let length_after_column_edit = active_doc.getText().length;\n    assert.equal(length_original + active_doc.lineCount * text_with_comma.length, length_after_column_edit);\n    await sleep(1000);\n    for (let i = 0; i < text_with_comma.length; i++) {\n        await vscode.commands.executeCommand(\"deleteLeft\");\n    }\n    await sleep(1000);\n    let length_after_delete = active_doc.getText().length;\n    // Ensure that after multicursor deletion of the added `text_with_comma` text we get back to the original doc.\n    assert.equal(length_original, length_after_delete);\n}\n\n\nasync function test_no_autodetection(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'lorem_ipsum.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for lorem_ipsum.txt: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'suite', 'index.js');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for index.js: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'javascript');\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'lorem_ipsum');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for lorem_ipsum: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n}\n\n\nasync function test_dynamic_csv(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'movies_multichar_separator.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for movies_multichar_separator.txt: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    for (let i = 0; i < 6; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    for (let i = 0; i < 3; i++) {\n        await vscode.commands.executeCommand(\"cursorRightSelect\");\n    }\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparator: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'dynamic csv');\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparatorOff');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparatorOff: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    await sleep(1000);\n\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator');\n    await sleep(1000);\n\n    // Scroll around to test.\n    await vscode.commands.executeCommand(\"scrollPageDown\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"scrollPageUp\");\n    await sleep(500);\n\n    let length_original = active_doc.getText().length;\n    await vscode.commands.executeCommand('rainbow-csv.Align');\n    let length_aligned = active_doc.getText().length;\n    assert.equal(length_original + 8513, length_aligned); // 8513 was calculated as the difference in file sizes reported by wc -c.\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.Shrink');\n    await sleep(1000);\n    let length_shrinked = active_doc.getText().length;\n    assert.equal(length_original, length_shrinked);\n\n    // Now we need to undo the commands to run RBQL.\n    await vscode.commands.executeCommand('undo'); // Undo Shrink.\n    await sleep(500);\n    await vscode.commands.executeCommand('undo'); // Undo Align.\n    await sleep(500);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"select a1, a4 % 100, a5 order by a1 limit 20\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js query: ${length_after_query}`);\n    await sleep(1000);\n    let expected_num_lines = 742;\n    if (!is_web_ext) {\n        expected_num_lines += 1; // Standard non-web CSV writer adds a newline at the end.\n    }\n    assert.equal(expected_num_lines, length_after_query);\n}\n\nasync function test_huge_file(workspace_folder_uri) {\n    // Test huge file close to VSCode syntax highlighting limit (20MB Or 300K lines).\n    // Do some basic navigation commands and some basic editing to ensure that performance is OK.\n    let start_time = performance.now();\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'books_huge.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    assert.equal(active_doc.languageId, 'csv');\n    await vscode.commands.executeCommand(\"cursorBottom\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await sleep(500);\n    for (let i = 0; i < 100; i++) {\n        await vscode.commands.executeCommand(\"scrollPageDown\");\n        await sleep(10);\n    }\n    for (let i = 0; i < 10; i++) {\n        // Delete some lines.\n        await vscode.commands.executeCommand(\"editor.action.deleteLines\");\n        await sleep(10);\n    }\n    await sleep(500);\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await sleep(500);\n    let end_time = performance.now();\n    let total_sleep_time = 500 * 4 - 10 * 100 - 10 * 10;\n    let total_adjusted_latency = (end_time - start_time) - total_sleep_time;\n    log_message(`total adjusted latency: ${total_adjusted_latency}`)\n    assert(total_adjusted_latency < 20000);\n}\n\nasync function test_autodetection(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'university_ranking_semicolon.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    log_message(`languageId for university_ranking_semicolon.txt: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'csv (semicolon)');\n    await sleep(1000);\n}\n\n\nasync function test_manual_enable_disable(workspace_folder_uri) {\n    let uri = vscode.Uri.joinPath(workspace_folder_uri, 'test', 'csv_files', 'small_movies.pipe');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for small_movies.pipe: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    for (let i = 0; i < 6; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparator: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'csv (pipe)');\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparatorOff');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparatorOff: ${active_doc.languageId}`)\n    assert.equal(active_doc.languageId, 'plaintext');\n    await sleep(1000);\n}\n\n\nfunction test_range_position_contains_equivalence() {\n    // Ensure equivalence of test double and native classes \"contains\" logic.\n    let [vscode_range, vscode_position, test_double_range, test_double_position] = [null, null, null, null];\n\n    // Simple test.\n    vscode_range = new vscode.Range(1, 0, 1, 10);\n    vscode_position = new vscode.Position(1, 4);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(1, 0, 1, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(1, 4);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Simple not contains test - different line.\n    vscode_range = new vscode.Range(1, 0, 1, 10);\n    vscode_position = new vscode.Position(2, 4);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(1, 0, 1, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(2, 4);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Simple not contains test - after last character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 11);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 11);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Contains test - last character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 10);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 10);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Contains test - first character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 5);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 5);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Not contains test - line before.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(2, 5);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(2, 5);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Contains test - multiline range, but character is off - still contains.\n    vscode_range = new vscode.Range(3, 5, 10, 4);\n    vscode_position = new vscode.Position(3, 100);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 10, 4);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 100);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n}\n\n\nfunction test_autodetect_dialect_frequency_based() {\n    let [doc_lines, active_doc, candidate_separators, max_num_chars_to_test, dialect_info] = [null, null, null, null, null];\n\n    // Basic test.\n    doc_lines = ['a1;a2', 'b1;b2', '#comment', 'c1;c2', 'd1;d2'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [',', ';'];\n    max_num_chars_to_test = 10000;\n    dialect_info = extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test);\n    assert.deepEqual(['csv (semicolon)', ';', 'quoted'], dialect_info);\n\n    // Empty doc - should return csv since this is the default (presumably doc has .csv extension in order to call this function).\n    doc_lines = [];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['|', ' ', '\\t', ',', ';'];\n    max_num_chars_to_test = 10000;\n    dialect_info = extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test);\n    assert.deepEqual(['csv', ',', 'quoted'], dialect_info);\n\n    // Test max_num_chars_to_test effect on autodetection result.\n    doc_lines = ['a|b|c|d,f|g|h|d', 'a,b', 'c,d', 'e,f', 'g,h', 'k,l', 'm,n', 'o,p'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['|', ',', ';'];\n    assert.deepEqual(['csv (pipe)', '|', 'simple'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10));\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Dynamic csv test.\n    doc_lines = ['a$b', 'c$d', 'e$f', 'g,h', 'k,l'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['$', ',', ';'];\n    assert.deepEqual(['dynamic csv', '$', 'simple'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Skipping frequent dot and whitespace because they are in blocklist.\n    doc_lines = ['a;  b...', 'c ;d...', 'e   ;f...', 'g  ; h...', 'k  l...'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [' ', '.', ';'];\n    assert.deepEqual(['csv (semicolon)', ';', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Using default comma separator because the user configured ones have zero frequency. Not sure if this is the right behavior in this case though.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [';', '\\t'];\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Empty configured separators list.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [];\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n}\n\n\nasync function test_try_autoenable_rainbow_csv() {\n    let [config, extension_context, doc_lines, active_doc] = [null, null, null, null];\n\n    // Simple test. `other_fake.txt` in stop list doesn't prevent autodetection. Trailing space is not detected because the config option is set to 'false'.\n    doc_lines = ['a|b', 'c|d  ', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['other_fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Simple test. No autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f', 'g,h'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that the autodetection doesn't happen if enable_separator_autodetection is false.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', false], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test `TAB` to -> '\\t' conversion.\n    doc_lines = ['a\\tb', 'c\\td', 'e\\tf'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', false], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test stoplist.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // No filename - no autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, '', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Mysterious .git filename - no autodetection. TODO figure out why do we have these .git files.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.git', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Non-plaintext language id - no autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'foobar');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('foobar', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Non-plaintext language id but filename has .csv extension - autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.csv.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.csv', 'csv']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test quoted_rfc policy autodetection for `,` and `;` separators.\n    doc_lines = ['a,b', 'c,\"d', 'a\"\"sd\"\"f', 'ef\"', 'g,h', 'i,j'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('dynamic csv', active_doc.languageId);\n    assert.deepEqual([['fake.txt.dynamic csv', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([['fake.txt', {delim: ',', policy: 'quoted_rfc'}]], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that quoted_rfc policy doesn't extend for other separators e.g. pipe `|`.\n    doc_lines = ['a|b', 'c|\"d', 'a\"\"sd\"\"f', 'ef\"', 'g|h', 'i|j'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test trailing spaces detection.\n    doc_lines = ['a|b', 'c  |d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['other_fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', true], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: 1}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test too few lines for autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 4], ['comment_prefix', '#']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test autodetection with default comment prefix.\n    doc_lines = ['a|b', '#comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test autodetection with custom comment prefix\n    doc_lines = ['a|b', '$$comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '$$']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test no autodetection with default comment prefix.\n    doc_lines = ['a|b', '$$comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test second candidate (TAB) more popular than the first (comma).\n    doc_lines = ['a,b\\tc\\td', 'a,b\\tc\\td', 'a,b\\tc\\td', 'a,b\\tc\\td'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '$$']]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('tsv', active_doc.languageId);\n    assert.deepEqual([['fake.txt.tsv', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test inconsistent num of fields.\n    doc_lines = ['a|b', 'c|d', 'e|f', 'e|f|g'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test defective line (quoting error).\n    doc_lines = ['a,b', 'c,d', 'e,\"fsdf\"\"', 'g,h'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test switch to frequency based autodetection.\n    doc_lines = ['a,b,c', 'a,b,c', 'a,b,c', 'a,b\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tc'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('tsv', active_doc.languageId);\n    // In case of frequency based autodetection we will have lint results cache empty - this is probably fine because we will recalculate it later after enabling rainbow features for the file.\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.csv', 'csv']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetected language matches the original language id.\n    doc_lines = ['a,b,c', 'a,b,c', 'a,b ,c', '#comment'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', true], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv', active_doc.languageId);\n    assert.deepEqual([['fake.csv.csv', {is_ok: true, first_trailing_space_line: 2}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    // Original language id should not be set since it matches the autodetected language\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetection_min_line_count also applies to the record count, not just source lines - do not count comment lines.\n    doc_lines = ['Device ids, use with caution!', '#a20', '#a50', '#a30'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetection_min_line_count also applies to the record count, not just source lines - count multiline record once.\n    doc_lines = ['hello,\"world', 'asd,fasf', '', 'sadf', 'fasdf\"'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autoenable_rainbow_csv(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n}\n\n\nasync function run() {\n    try {\n        log_message('Starting tests');\n\n        assert.equal(-1, [1, 2, 3].indexOf(0));\n\n        assert(vscode.workspace.workspaceFolders);\n        assert.equal(1, vscode.workspace.workspaceFolders.length);\n        let workspace_folder_uri = vscode.workspace.workspaceFolders[0].uri;\n\n        test_range_position_contains_equivalence();\n\n        unit_tests.test_all();\n\n        test_autodetect_dialect_frequency_based();\n\n        await test_try_autoenable_rainbow_csv();\n\n        await test_no_autodetection(workspace_folder_uri);\n        if (!is_web_ext) {\n            // Ensure that opening non-csv files doesn't cause rainbow csv to import relatively heavy lazy-loaded code.\n            // There is no point to check this in web since all of the files are bundled into a single script anyway.\n            let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_initialization_state: true});\n            assert(state_report.initialized);\n            assert(!state_report.lazy_loaded);\n        }\n\n        await test_autodetection(workspace_folder_uri);\n        await test_manual_enable_disable(workspace_folder_uri);\n\n        await test_huge_file(workspace_folder_uri);\n\n        await test_dynamic_csv(workspace_folder_uri);\n\n        if (is_web_ext) {\n            await test_rbql_web(workspace_folder_uri);\n        } else {\n            await test_rbql_node(workspace_folder_uri);\n        }\n\n        if (!is_web_ext) {\n            // Sanity check that after using advanced functionality such as RBQL, the non-basic code is lazy loaded.\n            let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_initialization_state: true});\n            assert(state_report.initialized);\n            assert(state_report.lazy_loaded);\n        }\n\n        await test_align_shrink_lint(workspace_folder_uri);\n        await test_column_edit(workspace_folder_uri);\n\n        log_message('Finishing tests');\n    } catch (e) {\n        log_message('Error: tests have failed. Exception:');\n        log_message(String(e));\n        log_message(String(e.stack));\n    }\n}\n\nexports.run = run;\n"],"names":["vscode","path","fs","os","child_process","fast_load_utils","csv_utils","rbql_csv","rainbow_utils","ll_rainbow_utils","is_web_ext","undefined","homedir","preview_window_size","scratch_buf_marker","client_html_template_web","aligned_files","Set","result_set_parent_map","Map","cached_table_parse_result","manual_comment_prefix_stoplist","rbql_status_bar_button","align_shrink_button","rainbow_off_status_bar_button","copy_back_button","column_info_button","dynamic_dialect_select_button","rbql_context","last_rbql_queries","client_html_template","global_state","preview_panel","doc_first_edit_subscription","keyboard_cursor_subscription","_unit_test_last_rbql_report","_unit_test_last_warnings","cursor_timeout_handle","rainbow_token_event","comment_token_event","DYNAMIC_CSV","QUOTED_POLICY","QUOTED_RFC_POLICY","SIMPLE_POLICY","extension_context","lint_results","lint_status_bar_button","dynamic_document_dialects","custom_comment_prefixes","original_language_ids","autodetection_stoplist","autodetection_temporarily_disabled_for_rbql","dynamic_dialect_for_next_request","dialect_map","tokenTypes","tokens_legend","SemanticTokensLegend","safe_lower","src_str","toLowerCase","get_default_policy","separator","language_id","hasOwnProperty","map_dialect_to_language_id","policy","absolute_path_map","show_single_line_error","error_msg","active_window","window","showErrorMessage","sleep","ms","Promise","resolve","setTimeout","async","push_current_stack_to_js_callback_queue_to_allow_ui_update","get_from_global_state","key","default_value","value","get","save_to_global_state","update","replace_doc_content","active_editor","active_doc","new_content","invalid_range","Range","lineCount","full_range","validateRange","edit","replace","make_header_key","file_path","make_with_headers_key","get_from_config","param_name","config","workspace","getConfiguration","get_header_from_document","document","delim","comment_prefix","header_line","get_header_line","smart_split","get_header","fileName","raw_header","JSON","parse","get_dialect","languageId","has","dialect_info","enable_dynamic_semantic_tokenization","token_provider","RainbowTokenProvider","dispose","document_selector","language","languages","registerDocumentRangeSemanticTokensProvider","register_comment_tokenization_handler","CommentTokenProvider","push","get_dialect_from_user_dialog","showInputBox","enable_rainbow_features_if_csv","endsWith","set","hide_buttons","createStatusBarItem","StatusBarAlignment","Left","text","tooltip","command","show","onDidChangeTextEditorSelection","handle_cursor_movement","setLanguageConfiguration","comments","lineComment","hide","show_lint_status_bar_button","show_align_shrink_button","parent_table_path","indexOf","parent_basename","basename","show_rbql_copy_to_source_button","show_column_info_button","show_status_bar_items","csv_lint","all_buttons","i","length","disable_rainbow_features_if_non_csv","get_active_editor","activeTextEditor","get_active_doc","position","get_cursor_position_if_unambiguous","cursor_position_info","get_cursor_position_info","enable_tooltip_column_names","header","full_report","short_report","format_cursor_position_info","Right","do_show_column_info_button","is_manual_op","lint_cache_key","is_processing","detect_trailing_spaces","_records","_num_records_parsed","fields_info","first_defective_line","first_trailing_space_line","_comments","parse_document_records","lint_result","size","csv_lint_cmd","run_internal_test_cmd","integration_test_options","check_initialization_state","initialized","lazy_loaded","check_last_rbql_report","check_last_rbql_warnings","show_warnings","warnings","showWarningMessage","handle_rbql_result_file_node","text_doc","showTextDocument","error","setTextDocumentLanguage","run_command","cmd","args","close_and_error_guard","callback_func","spawn","stdout","stderr","on","data","toString","code","name","message","handle_command_result","src_table_path","dst_table_path","dst_delim","dst_policy","error_code","webview_report_handler","json_report","error_type","report","e","add","target_language_id","doc","openTextDocument","file_path_to_query_key","set_header_line","_comment_prefix","selection","lineAt","start","line","stringify","preserve_original_language_id_if_needed","original_language_id","manually_set_rainbow_separator","end","substring","character","set_comment_prefix","delete","restore_original_language","set_join_table_name","table_name","make_table_name_key","set_virtual_header","old_header_str","fields","map","val","field","quote_field","join","quoted_join","input_box_props","raw_new_header","new_header","column_edit","edit_mode","col_num","column_number","selections","warning_msg","generate_column_edit_selections","shrink_table","progress_options","location","ProgressLocation","Window","title","withProgress","progress","shrinked_doc_text","first_failed_line","shrink_columns","align_table","column_stats","records","calc_column_stats","adjust_column_stats","aligned_doc_text","align_columns","copy_back","result_doc","parent_doc","parent_editor","query_result_doc","getText","do_copy_back","handle_rbql_client_message","webview","message_type","report_msg","postMessage","init_msg","sample_preview_records_from_context","path_key","input_document_path","history_list","with_headers","rbql_backend","rbql_query","integration_test_delay","table_id","encoding","input_table_dir","dirname","table_path","find_table_path","read_header","warning","console","String","navig_direction","requested_start_record","input_document","protocol_message","backend_language","output_dialect","query","old_index","splice","update_query_history","input_path","csv_encoding","input_delim","input_policy","output_delim","output_policy","output_path","input_table_path","rbql_output_dir","tmpdir","get_dst_table_dir","orig_extension","extname","delim_ext_map","dst_extension","result_table_name","get_dst_table_name","startsWith","output_doc_cfg","content","rbql_query_web","handle_rbql_result_file_web","csv_options","rbql_query_node","exception_to_error_info","cmd_safe_query","Buffer","from","run_rbql_query","udf_file_path","default_content","get_default_js_udf_content","get_default_python_udf_content","existsSync","writeFileSync","udf_doc","edit_rbql","orig_uri","uri","scheme","isDirty","rnd_suffix","Math","floor","random","with_headers_by_default","createWebviewPanel","ViewColumn","Active","enableScripts","readFileSync","client_html","paths_list","local_path","adjusted_webview_url","asWebviewUri","Uri","file","adjust_webview_paths","html","onDidReceiveMessage","autodetect_dialect_frequency_based","candidate_separators","max_num_chars_to_test","best_dialect","best_separator","best_policy","best_dialect_frequency","frequency","j","dialect_id","try_autoenable_rainbow_csv","s","is_default_csv","comment_prefix_for_autodetection","rainbow_csv_language_id","candidate_dialects","min_num_lines","best_dialect_first_trailing_space_line","best_dialect_num_columns","candidate_dialect","num_records_parsed","num_columns","Array","keys","autodetect_dialect","handle_first_edit_for_an_empty_doc","change_event","handle_editor_switch","editor","_unused_cursor_event","clearTimeout","handle_doc_open","isUntitled","onDidChangeTextDocument","register_csv_copy_paste_for_empty_doc","make_preview","preview_mode","fsPath","size_limit","file_size_in_bytes","statSync","full_orig_doc","file_basename","out_path","open","err","fd","log","buffer","alloc","read_begin_pos","max","read","_num","buffer_str","substr","lastIndexOf","includes","then","register_csv_hover_info_provider","context","hover_provider","registerHoverProvider","provideHover","token","cancellation_token","isCancellationRequested","_full_text","mds","MarkdownString","appendCodeblock","Hover","make_hover","subscriptions","constructor","range","_token","table_ranges","parse_document_range","builder","SemanticTokensBuilder","row_info","comment_range","record_ranges","record_range","build","_delim","begin_line","end_line","min","lnum","line_text","exports","activate","globalState","rbql_client_uri","joinPath","extensionUri","bytes","readFile","TextDecoder","decode","asAbsolutePath","lint_cmd","commands","registerCommand","rbql_cmd","set_header_line_cmd","set_comment_prefix_cmd","edit_column_names_cmd","set_join_table_name_cmd","column_edit_before_cmd","choose_dynamic_separator_cmd","choose_dynamic_separator","column_edit_after_cmd","column_edit_select_cmd","set_separator_cmd","set_separator_multiline_cmd","rainbow_off_cmd","sample_head_cmd","sample_tail_cmd","align_cmd","shrink_cmd","copy_back_cmd","internal_test_cmd","doc_open_event","onDidOpenTextDocument","switch_event","onDidChangeActiveTextEditor","deactivate","AssertionError","Error","assert","condition","RecordTextConsumer","stop_on_warning","collect_records","preserve_quotes_and_whitespaces","min_num_fields_for_autodetection","this","consume","record_text","record_start_line","record","charAt","module","max_records_to_parse","num_lines","line_aggregator","MultilineRecordAggregator","consumer","record_num","comment_text","add_line","has_comment_line","reset","has_full_record","get_full_line","is_inside_multiline_record","_typeof","obj","Symbol","iterator","prototype","isDeepEqual","isDeepStrictEqual","_require$codes","codes","ERR_AMBIGUOUS_ARGUMENT","ERR_INVALID_ARG_TYPE","ERR_INVALID_ARG_VALUE","ERR_INVALID_RETURN_VALUE","ERR_MISSING_ARGS","inspect","_require$types","isPromise","isRegExp","objectAssign","Object","assign","objectIs","is","lazyLoadComparison","comparison","warned","ok","NO_EXCEPTION_SENTINEL","innerFail","innerOk","fn","argLen","generatedMessage","actual","expected","operator","stackStartFn","_len","arguments","_key","apply","concat","fail","internalMessage","argsLen","warn","process","emitWarning","bind","errArgs","equal","notEqual","deepEqual","notDeepEqual","deepStrictEqual","notDeepStrictEqual","strictEqual","notStrictEqual","Comparison","_this","instance","Constructor","TypeError","_classCallCheck","forEach","test","compareExceptionKey","a","b","expectedException","msg","isPrototypeOf","call","getActual","checkIsPromise","catch","waitForActual","promiseFn","resultPromise","expectsError","details","fnType","expectsNoError","strict","_len6","_key6","throws","_len2","_key2","rejects","_len3","_key3","result","doesNotThrow","_len4","_key4","doesNotReject","_len5","_key5","ifError","newErr","origStack","stack","tmp2","split","shift","tmp1","pos","slice","_defineProperty","defineProperty","enumerable","configurable","writable","_defineProperties","target","props","descriptor","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Function","Wrapper","_construct","_getPrototypeOf","create","_setPrototypeOf","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","Parent","o","p","setPrototypeOf","__proto__","getPrototypeOf","str","search","this_len","blue","green","red","white","kReadableOperator","strictEqualObject","notStrictEqualObject","notIdentical","copyError","source","inspectValue","compact","customInspect","depth","maxArrayLength","Infinity","showHidden","breakLength","showProxy","sorted","getters","_Error","options","limit","stackTraceLimit","isTTY","getColorDepth","other","res","lastPos","skipped","actualInspected","actualLines","expectedLines","indicator","inputLength","columns","count","maxCount","repeat","pop","maxLines","_actualLines","printedLines","skippedMsg","cur","expectedLine","actualLine","divergingLines","createErrDiff","base","_res","knownOperators","captureStackTrace","protoProps","subClass","superClass","_inherits","custom","recurseTimes","ctx","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","util","createErrorType","Base","NodeError","_Base","arg1","arg2","arg3","getMessage","oneOf","thing","isArray","len","determiner","type","reason","inspected","RangeError","input","_slicedToArray","arr","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","_nonIterableRest","regexFlagsSupported","flags","arrayFromSet","array","arrayFromMap","objectGetOwnPropertySymbols","numberIsNaN","Number","isNaN","uncurryThis","f","propertyIsEnumerable","objectToString","isAnyArrayBuffer","isArrayBufferView","isDate","isMap","isSet","isNativeError","isBoxedPrimitive","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isFloat32Array","isFloat64Array","isNonIndex","charCodeAt","pow","getOwnNonIndexProperties","compare","x","y","innerDeepEqual","val1","val2","memos","buf1","buf2","val1Tag","keys1","keys2","keyCheck","getTime","RegExp","byteLength","Uint8Array","byteOffset","areSimilarTypedArrays","offset","areSimilarFloatArrays","_keys","_keys2","valueOf","Boolean","BigInt","isEqualBoxedPrimitive","getEnumerables","k","iterationType","aKeys","bKeys","symbolKeysA","symbolKeysB","_symbolKeysB","val2MemoA","val2MemoB","areEq","objEquiv","setHasEqualElement","memo","setValues","findLooseMatchingPrimitives","prim","setMightHaveLoosePrim","altValue","mapMightHaveLoosePrim","item","curB","mapHasEqualEntry","key1","item1","key2","aValues","bValues","_val","setEquiv","aEntries","_aEntries$i","item2","bEntries","_i2","_bEntries$_i","mapEquiv","keysA","GetIntrinsic","callBind","$indexOf","allowMissing","intrinsic","$apply","$call","$reflectApply","$gOPD","$defineProperty","$max","originalFunction","func","desc","applyBind","hasSymbols","toStr","origDefineProperty","hasPropertyDescriptors","supportsDescriptors","object","predicate","defineProperties","predicates","firstSource","to","nextSource","keysArray","nextIndex","nextKey","polyfill","isCallable","forEachArray","receiver","forEachString","string","forEachObject","list","thisArg","ERROR_MESSAGE","funcType","that","bound","binder","boundLength","boundArgs","Empty","implementation","$SyntaxError","SyntaxError","$Function","$TypeError","getEvalledConstructor","expressionSyntax","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","getProto","needsEval","TypedArray","INTRINSICS","AggregateError","ArrayBuffer","Atomics","DataView","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","EvalError","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","parseFloat","parseInt","SharedArrayBuffer","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","doEval","gen","LEGACY_ALIASES","hasOwn","$concat","$spliceApply","$replace","$strSlice","$exec","exec","rePropName","reEscapeChar","stringToPath","first","last","match","number","quote","subString","getBaseIntrinsic","alias","intrinsicName","parts","intrinsicBaseName","intrinsicRealName","skipFurtherCaching","isOwn","part","hasArrayLengthDefineBug","origSymbol","hasSymbolSham","symObj","getOwnPropertyNames","syms","toStringTag","ctor","superCtor","super_","TempCtor","hasToStringTag","$toString","callBound","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments","badArrayLike","isCallableMarker","fnToStr","reflectApply","_","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","isIE68","isDDA","all","strClass","GeneratorFunction","isFnRegex","generatorFunc","getGeneratorFunc","define","getPolyfill","shim","NaN","availableTypedArrays","gOPD","g","globalThis","typedArrays","$slice","toStrTags","typedArray","proto","superProto","tag","anyTrue","getter","tryTypedArrays","keysShim","isArgs","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","isObject","isFunction","isArguments","isString","theKeys","skipProto","skipConstructor","equalsConstructorPrototypeIfNotBuggy","origKeys","originalKeys","keysWorksWithArguments","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","arg","copy","fill","readUInt8","isArgumentsObject","isGeneratorFunction","whichTypedArray","isTypedArray","BigIntSupported","SymbolSupported","ObjectToString","numberValue","stringValue","booleanValue","bigIntValue","symbolValue","checkBoxedPrimitive","prototypeValueOf","isMapToString","isSetToString","isWeakMapToString","isWeakSetToString","isArrayBufferToString","isArrayBuffer","working","isDataViewToString","isDataView","isView","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isBigInt64Array","isBigUint64Array","isWeakMap","isWeakSet","SharedArrayBufferCopy","isSharedArrayBufferToString","isSharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","method","getOwnPropertyDescriptors","descriptors","formatRegExp","format","objects","isNull","deprecate","noDeprecation","throwDeprecation","traceDeprecation","trace","debugs","debugEnvRegex","NODE_DEBUG","debugEnv","toUpperCase","opts","seen","stylize","stylizeNoColor","colors","isBoolean","_extend","isUndefined","stylizeWithColor","formatValue","styleType","style","styles","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","idx","arrayToHash","isError","formatError","output","braces","toUTCString","l","formatProperty","formatArray","reduce","prev","reduceToSingleString","ar","re","d","pad","n","debuglog","pid","types","isNullOrUndefined","isSymbol","isPrimitive","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","cb","newReason","promisify","original","promiseResolve","promiseReject","promise","reject","callbackify","callbackified","maybeCb","rej","foundName","rbql","non_numeric_sentinel","number_regex","update_subcomponent_stats","is_first_record","max_field_components_lens","max_total_length","max_int_length","match_result","max_fractional_length","cur_integer_part_length","cur_fractional_part_length","align_field","trim","delta_length","dot_pos","integer_delta_length","fractional_delta_length","trailing_spaces","rfc_align_field","is_field_segment","aligned","start_offset","strip_trailing_spaces","src","RecordCommentMerger","nr","next_comment","get_next","has_comments_left","has_records_left","has_entries_left","vscode_global_state","main_table_dir","filepath","candidate_path","isAbsolute","RbqlIOHandlingError","VSCodeRecordIterator","RBQLInputIterator","has_header","variable_prefix","super","NR","NL","fail_on_warning","_first_trailing_space_line","first_record","next_record_index","stop","query_text","variable_map","parse_basic_variables","parse_array_variables","parse_attribute_variables","parse_dictionary_variables","do_get_record","get_warnings","inconsistent_records_info","record_num_1","num_fields_1","record_num_2","num_fields_2","sample_first_two_inconsistent_records","warn_msg","make_inconsistent_num_fields_warning","VSCodeWriter","RBQLOutputWriter","header_len","null_in_output","delim_in_simple_output","output_lines","polymorphic_join","simple_join","quoted_join_rfc","mono_join","set_header","write","v","rfc_quote_field","normalize_fields","out_fields","sub_array_delim","VSCodeTableRegistry","get_iterator_by_table_id","_table_id","VSCodeFileSystemCSVRegistry","RBQLTableRegistry","input_file_dir","stream","record_iterator","bulk_input_path","createReadStream","CSVRecordIterator","output_warnings","make_multiline_record_ranges","delim_length","newline_marker","start_line","expected_end_line_for_control","lnum_current","pos_in_editor_line","next_pos_in_editor_line","pos_in_logical_field","logical_field_tokens","newline_marker_pos","is_opening_rfc_line","_record","split_quoted_str","parse_document_range_rfc","custom_parsing_margin","inside_multiline_record_before","get_num_lines_in_record","inside_multiline_record_after","combined_line","get_field_by_line_position","query_pos","cpos","input_reader","createInterface","closed","promise_resolve","promise_reject","output_promise","close","join_tables_registry","input_iterator","output_writer","user_init_code","input_stream","stdin","output_stream","close_output_on_finish","createWriteStream","is_ascii","default_init_source_path","read_user_init_code","CSVWriter","result_lines","merger","comment","aligned_fields","fnum","field_lines","aligned_field","_fields_info","has_edit","field_line","adjusted_stats","column_stat","previous_stat","last_found_position_info","contains","is_comment","total_columns","split_warning","get_cursor_position_info_rfc","cnum","entries","get_cursor_position_info_standard","show_column_names","show_comments","max_label_length","column_label","short_column_label","next_cpos","parse_document_range_single_line","dst_message","end_record","vscode_doc_version","need_full_doc_parse","sample_records","preview_sampling_error","preview_records","r","cur_record","c","actual_start_record","lint_report","lint_report_msg","color","isInteger","is_ok","active","isEqual","anchor","char_pos_before","char_pos_after","position_before","Position","position_after","Selection","field_rgx","field_rgx_external_whitespaces","extract_next_field","dlm","allow_external_whitespaces","cidx","src_cur","match_obj","match_end","uidx","extraction_report","unquote_field","split_whitespace_separated_str","preserve_whitespaces","rgxp","unquote_fields","split_lines","rfc_line_buffer","match_list","has_unbalanced_double_quote","line_separator","RbqlParsingError","RbqlRuntimeError","InternalBadFieldError","bad_idx","params","replace_all","replacement","RBQLContext","writer","unnest_list","top_count","like_regex_cache","sort_key_expression","aggregation_stage","aggregation_key_expression","functional_aggregators","join_map_impl","join_map","lhs_join_var_expression","where_expression","select_expression","update_expressions","variables_init_code","query_context","wrong_aggregation_usage_error","RBQL_VERSION","check_if_brackets_match","opening_bracket","closing_bracket","parse_root_bracket_level_text_spans","text_spans","last_pos","bracket_stack","cur_char","span","unquote_string","quoted_str","column_info_from_text_span","text_span","string_literals","rbql_star_marker","simple_var_match","attribute_match","subscript_int_match","subscript_str_match","column_index","column_name","is_star","replaced_string_literal_id","unquoted_column_name","adhoc_parse_select_expression_to_column_infos","ts","stable_compare","safe_get","safe_join_get","safe_set","regexp_escape","like_to_regex","pattern","converted","like","matcher","LIKE","RBQLAggregationToken","marker_id","UnnestMarker","UNNEST","vals","unnest","Unnest","UNFOLD","parse_number","MinAggregator","stats","increment","cur_aggr","get_final","MaxAggregator","SumAggregator","AvgAggregator","cur_sum","cur_cnt","VarianceAggregator","cur_sum_sq","avg_val","MedianAggregator","sort","m","CountAggregator","ArrayAggAggregator","post_proc","ConstGroupVerifier","output_index","const_values","old_value","init_aggregator","generator_name","MIN","Min","MAX","Max","COUNT","Count","SUM","sum","Sum","AVG","avg","Avg","VARIANCE","variance","Variance","MEDIAN","median","Median","ARRAY_AGG","array_agg","FOLD","add_to_set","dst_set","len_before","TopWriter","subwriter","NW","finish","UniqWriter","UniqCountWriter","old_val","unshift","SortedWriter","reverse_sort","unsorted_entries","stable_entry","reverse","entry","AggregateWriter","aggregators","aggregation_keys","all_keys","ag","InnerJoiner","get_rhs","lhs_key","get_join_records","LeftJoiner","null_record","max_record_len","StrictLeftJoiner","select_except","except_fields","select_simple","sort_key","sort_entry","select_aggregated","transparent_values","num_aggregators_found","trans_value","select_unnested","folded_fields","unnest_pos","findIndex","PROCESS_SELECT_COMMON","PROCESS_SELECT_SIMPLE","PROCESS_SELECT_JOIN","PROCESS_UPDATE_JOIN","PROCESS_UPDATE_SIMPLE","MAIN_LOOP_BODY","embed_expression","parent_code","child_placeholder","child_expression","embed_code","child_code","parent_lines","child_lines","placeholder_indentation","generate_main_loop_code","is_select_query","is_join_query","js_code","compile_and_run","main_loop_body","main_loop_promise","lower_case_query","GROUP_BY","UPDATE","SELECT","JOIN","INNER_JOIN","LEFT_JOIN","LEFT_OUTER_JOIN","STRICT_LEFT_JOIN","ORDER_BY","WHERE","LIMIT","EXCEPT","WITH","get_ambiguous_error_msg","variable_name","get_all_matches","regexp","str_strip","strip_comments","cline","combine_string_literals","backend_expression","prefix","dst_variables_map","matches","field_num","initialize","index","js_string_escape_column_name","quote_char","query_probably_has_dictionary_variable","continuous_name_segments","continuous_segment","column_names","dict_test_rgx","escaped_column_name","column_names_source","column_names_from_query","zero_based_idx","map_variables_directly","ensure_no_ambiguous_variables","input_column_names","join_column_names","join_column_names_set","parse_join_expression","invalid_join_syntax_error","variable_pairs","pair_rgx","and_rgx","resolve_join_variables","input_variables_map","join_variables_map","lhs_variables","rhs_indices","valid_join_syntax_msg","variable_pair","join_var_1","join_var_2","lhs_key_index","rhs_key_index","generate_common_init_code","base_var","attr_var","generate_init_statements","variables_map","indent","code_lines","simple_var_name_rgx","var_info","variable_declaration_keyword","replace_star_count","aggregate_expression","replace_star_vars","rbql_expression","replacement_expression","replace_star_vars_for_header_parsing","translate_update_expression","update_expression","first_assignment_error","assignment_looking_rgx","dst_var_name","var_index","current_indent","translate_select_expression","expression_without_stars","translated","translated_for_header","separate_string_literals","rgx","format_parts","idx_before","literal_id","string_literal","start_index","lastIndex","format_expression","locate_statements","statement_groups","ig","statement","match_str","separate_actions","with_match","ordered_statements","statement_start","span_start","span_end","statement_params","new_span","find_top","rb_actions","select_action","translate_except_expression","except_expression","input_header","skip_vars","skip_indices","var_name","HashJoinMap","key_indices","hash_map","key_index","polymorphic_get_key","get_single_key","get_multi_key","ki","get_record","nf","key_records","cleanup_query","remove_redundant_table_name","select_output_header","join_header","query_column_infos","output_header","qci","handle_query_modifier","TableIterator","table","normalize_column_names","stopped","num_fields","TableWriter","external_table","SingleTableRegistry","shallow_parse_input_query","get_variables_map","rhs_table_id","join_record_iterator","sql_join_type","select_expression_for_ast","query_table","input_table","output_table","join_table","output_column_names","exceptions_type_map","utf_decoding_error","rbql_init_source_path","name_record","index_path","lines","try_read_index","get_index_record","RecordQueue","push_stack","pull_stack","enqueue","dequeue","csv_path","first_record_should_be_emitted","header_preread_complete","decoder","fatal","input_exhausted","started","utf8_bom_removed","partially_decoded_line","partially_decoded_line_ends_with_cr","resolve_current_record","reject_current_record","current_exception","produced_records_queue","process_line_polymorphic","process_partial_rfc_record_line","process_record_line_simple","modifier","reset_external_callbacks","try_propagate_exception","exception","store_or_propagate_exception","pause","preread_first_record","try_resolve_next_record","isPaused","resume","parent_iterator","current_record_promise","num_records","process_record_line","process_line","clean_line","assumed_source_encoding","remove_utf8_bom","process_data_stream_chunk","data_chunk","decoded_string","first_line_index","process_data_bulk","data_blob","control_buffer","process_data_stream_end","last_line","destroy","close_stream_on_finish","setDefaultEncoding","error_obj","store_first_error","first_error","writer_error","_write_all","output_encoding","FileSystemCSVRegistry","interpret_named_csv_format","format_name","query_csv","VscodePositionTestDouble","VscodeSelectionTestDouble","VscodeRangeTestDouble","l1","c1","l2","c2","after_start","before_end","VscodeDocumentTestDouble","lines_buffer","VscodeStatusBarItemTestDouble","is_visible","vscode_test_double","_alignment","target_document","line_range_to_triple","vscode_range","convert_ranges_to_triples","table_comment_ranges","table_record_ranges","row_triple_groups","field_ranges","field_triples","field_range","fvr","get_all_entries","record_comment_merger","test_all","is_first_line","field_components","test_align_stats","max_components_lens","test_field_align","test_rfc_field_align","unaligned_doc_lines","aligned_doc_lines","expected_doc_lines","test_align_columns","original_doc_lines","shrinked_doc_lines","test_shrink_columns","doc_lines","test_calc_column_stats","adjusted_components","test_adjust_column_stats","test_parse_document_records","record_ranges_0","record_ranges_1","record_ranges_2","record_ranges_3","test_parse_document_range_rfc","doc_file_name","test_sample_preview_records_from_context","test_show_lint_status_bar_button","position_info","test_get_cursor_position_info","expected_entries","test_record_comment_merger","expected_selections","expected_error_msg","expected_warning_msg","test_generate_column_edit_selections","require","possibleNames","out","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","unit_tests","extension","poor_rbql_async_design_workaround_timeout","log_message","test_comment_prefix_js","workspace_folder_uri","executeCommand","test_task","num_lines_after_query","expected_num_lines","test_comment_prefix_python_rbql","workspaceFolders","vscode_position","test_double_range","test_double_position","test_range_position_contains_equivalence","test_autodetect_dialect_frequency_based","test_try_autoenable_rainbow_csv","test_no_autodetection","state_report","test_autodetection","test_manual_enable_disable","start_time","performance","now","total_adjusted_latency","test_huge_file","length_original","length_aligned","length_shrinked","length_after_query","test_dynamic_csv","enable_rfc_newlines","test_rbql_web","filename_before","length_before_query","filename_after_copy_back","test_rbql_node","text_with_comma","test_align_shrink_lint","length_after_column_edit","length_after_delete","test_column_edit"],"sourceRoot":""}